(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{h4KG:function(e,t,n){"use strict";n.r(t),n.d(t,"AddCustomerModule",(function(){return f}));var i=n("ofXK"),r=n("tyNb"),l=n("fXoL"),o=n("ccyI"),a=n("1VJT");class s{constructor(){}}var d=n("c92J"),m=n("3Pt+");let c=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new l.EventEmitter,this.uploadUrl="admin/uploadPicture",this.url="customer/findById",null!=this.id&&null!=this.id||(this.customer=new s)}ngOnInit(){null==this.id||null==this.id||this.getCustomer(this.id)}uploadFinished(e){this.pic_location=e,this.customer.picture=e}getCustomer(e){this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe(e=>{this.customer=e.data,this.pic_location=this.customer.picture;var t=this.customer.picture.split("/");this.customer.picture=t.pop(),this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}submit(){this.notify.showLoading();let e=new FormData;for(let t in this.customer)e.append(t,this.customer[t]);null!=this.id&&null!=this.id||e.append("createdAt",this.dbService.getToday()),e.append("display_name",this.authService.current_user.display_name),this.dbService.postData(e,"customer/save",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.customer.id=e.status,this.notify.successNotification("Customer saved successfully"),this.onFinish.emit(this.customer),this.customer=new s)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customer-form"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:56,vars:8,consts:[["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"row"],[1,"col-sm-6"],["required","","type","text","name","first_name",3,"ngModel","ngModelChange"],["required","","type","text","name","last_name",3,"ngModel","ngModelChange"],[1,"help-inline"],["required","","name","sex",3,"ngModel","ngModelChange"],["value","Male"],["value","Female"],["id","nationality","type","text","name","nationality",3,"ngModel","ngModelChange"],["required","","type","text","name","phone",3,"ngModel","ngModelChange"],["name","email","type","email",3,"ngModel","ngModelChange"],["name","notes","rows","3","cols","40",3,"ngModel","ngModelChange"],["type","text","name","place_of_work",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"form",0,1),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),l["\u0275\u0275elementStart"](2,"b"),l["\u0275\u0275text"](3,"Fields marked * are required"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"label"),l["\u0275\u0275text"](7,"First Name*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](8,"br"),l["\u0275\u0275elementStart"](9,"input",4),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.first_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",3),l["\u0275\u0275elementStart"](11,"label"),l["\u0275\u0275text"](12,"Last Name*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"br"),l["\u0275\u0275elementStart"](14,"input",5),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.last_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](15,"span",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",3),l["\u0275\u0275elementStart"](17,"label"),l["\u0275\u0275text"](18,"Sex*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](19,"br"),l["\u0275\u0275elementStart"](20,"select",7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.sex=e})),l["\u0275\u0275elementStart"](21,"option",8),l["\u0275\u0275text"](22,"Male"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"option",9),l["\u0275\u0275text"](24,"Female"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div",3),l["\u0275\u0275elementStart"](26,"label"),l["\u0275\u0275text"](27,"Nationality"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](28,"br"),l["\u0275\u0275elementStart"](29,"input",10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.nationality=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",3),l["\u0275\u0275elementStart"](31,"label"),l["\u0275\u0275text"](32,"Picture"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](33,"br"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"div",3),l["\u0275\u0275elementStart"](35,"label"),l["\u0275\u0275text"](36,"Phone*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](37,"br"),l["\u0275\u0275elementStart"](38,"input",11),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.phone=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",3),l["\u0275\u0275elementStart"](40,"label"),l["\u0275\u0275text"](41,"Email"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](42,"br"),l["\u0275\u0275elementStart"](43,"input",12),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.email=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"div",3),l["\u0275\u0275elementStart"](45,"label"),l["\u0275\u0275text"](46,"Notes"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](47,"br"),l["\u0275\u0275elementStart"](48,"textarea",13),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.notes=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](49,"div",3),l["\u0275\u0275elementStart"](50,"label"),l["\u0275\u0275text"](51,"Place of Work"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](52,"br"),l["\u0275\u0275elementStart"](53,"input",14),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.place_of_work=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](54,"div",3),l["\u0275\u0275element"](55,"input",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngModel",t.customer.first_name),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.customer.last_name),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.customer.sex),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngModel",t.customer.nationality),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngModel",t.customer.phone),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.customer.email),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.customer.notes),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.customer.place_of_work))},directives:[m.f,m.g,m.b,m.l,m.e,m.h,m.m,m.i,m.n],styles:[""]}),e})();const u=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.router=t,this.authService=n,this.notify=i,this.id=e.snapshot.params.id,-1==this.authService.current_user.permissions.indexOf("Manage Customer")&&(this.notify.failNotification("You are not permitted to view that page"),this.goBack())}ngOnInit(){}customerAdded(e){null==this.id||null==this.id||this.router.navigate(["/customer/"+this.id])}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](r.a),l["\u0275\u0275directiveInject"](r.d),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-customer"]],decls:12,vars:1,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,""],[1,"btn","btn-success",3,"click"],[1,"row","clearfix"],[1,"col-xs-12"],[1,"card"],[1,"body"],[3,"id","onFinish"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"section",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h2",3),l["\u0275\u0275elementStart"](4,"a",4),l["\u0275\u0275listener"]("click",(function(){return t.goBack()})),l["\u0275\u0275text"](5,"Back"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](6," ADD/EDIT A CUSTOMER "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",5),l["\u0275\u0275elementStart"](8,"div",6),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275elementStart"](10,"div",8),l["\u0275\u0275elementStart"](11,"app-customer-form",9),l["\u0275\u0275listener"]("onFinish",(function(e){return t.customerAdded(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](11),l["\u0275\u0275property"]("id",t.id))},directives:[c],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.f.forChild(u)],r.f]}),e})();var p=n("nEHF");let g=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,p.a]]}),e})(),f=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,h,p.a,g]]}),e})()}}]);