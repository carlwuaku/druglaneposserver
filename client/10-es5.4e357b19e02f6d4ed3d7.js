function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{TDBs:function(e,t,n){"use strict";n.r(t),n.d(t,"DashboardModule",(function(){return Y}));var r=n("ofXK"),a=n("tyNb"),i=n("fXoL"),o=n("ccyI"),s=n("c92J");function u(e,t){1&e&&i["\u0275\u0275element"](0,"i",18)}function c(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Expired Items Found "),i["\u0275\u0275elementEnd"]())}function l(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Expired Items "),i["\u0275\u0275elementEnd"]())}function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Expiring This Month "),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Expiring This Month "),i["\u0275\u0275elementEnd"]())}function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Expiring Next Month "),i["\u0275\u0275elementEnd"]())}function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Expiring Next Month "),i["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Out Of Stock "),i["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Out Of Stock "),i["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Nearing Minimum Stock "),i["\u0275\u0275elementEnd"]())}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Nearing Minimum Stock "),i["\u0275\u0275elementEnd"]())}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Nearing Maximum Stock "),i["\u0275\u0275elementEnd"]())}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Nearing Maximum Stock "),i["\u0275\u0275elementEnd"]())}function _(e,t){1&e&&i["\u0275\u0275element"](0,"i",18)}var b,k,E,I=function(){return["/new_sale"]},C=function(){return["/sales"]},N=function(){return["/add_purchase"]},D=function(){return["/products"]},w=function(){return["/expiry"]},M=function(){return["/expiry/all"]},L=function(){return["/expiry/this_month"]},F=function(){return["/expiry/next_month"]},T=function(){return["/stockout"]},O=function(){return["/near_min"]},P=function(){return["/near_max"]},j=function(){return["/add_transfer"]},A=function(){return["/receive_transfers"]},H=function(){return["/transfers"]},J=function(){return["/outgoing_transfers"]},B=function(){return["/transfer_conflicts"]},R=[{path:"",component:(b=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.dbService=n,this.customers="...",this.products="...",this.vendors="...",this.orders="...",this.total_arrears=0,this.loading=!1,this.extras=[],this.user=this.authService.current_user}return _createClass(e,[{key:"ngOnInit",value:function(){this.getExpiredCount(),this.getNextMonthExpiredCount(),this.getAllExpiredCount(),this.getNewTransfersCount(),this.getNewTransferConflictsCount(),this.getStockOutCount(),this.getStockNearMaxCount(),this.getStockNearMinCount()}},{key:"getCustomerCount",value:function(){var e=this;this.dbService.getData("customer/getCustomerCount",this.authService.current_user).subscribe((function(t){"0"==t.status&&e.authService.logout(),e.customers=t.data}),(function(e){}))}},{key:"getArrears",value:function(){var e=this;this.dbService.getData("order/getCustomersArrearsCount",this.authService.current_user).subscribe((function(t){e.arrears=t.data,e.total_arrears=t.total}),(function(e){}))}},{key:"getProductCount",value:function(){var e=this;this.dbService.getData("product/count",this.authService.current_user).subscribe((function(t){e.products=t.data}),(function(e){}))}},{key:"getVendorCount",value:function(){var e=this;this.dbService.getData("vendor/count",this.authService.current_user).subscribe((function(t){e.vendors=t.data}),(function(e){}))}},{key:"getOrderCount",value:function(){var e=this;this.dbService.getData("order/count?status=Pending",this.authService.current_user).subscribe((function(t){e.orders=t.data}),(function(e){}))}},{key:"getStockOutCount",value:function(){var e=this;this.dbService.getData("product/hasStockOut",this.authService.current_user).subscribe((function(t){e.stock_out=t.data}),(function(e){}))}},{key:"getStockNearMinCount",value:function(){var e=this;this.dbService.getData("product/hasStockNearMin",this.authService.current_user).subscribe((function(t){e.near_min=t.data}),(function(e){}))}},{key:"getStockNearMaxCount",value:function(){var e=this;this.dbService.getData("product/hasStockNearMax",this.authService.current_user).subscribe((function(t){e.near_max=t.data}),(function(e){}))}},{key:"getExpiredCount",value:function(){var e=this;this.dbService.getData("product/hasExpiry",this.authService.current_user).subscribe((function(t){"0"==t.status&&e.authService.logout(),e.expired=t.data}),(function(e){}))}},{key:"getNextMonthExpiredCount",value:function(){var e=this,t=this.dbService.getToday("month"),n=parseInt(t)+1,r=this.dbService.getThisYear();this.expiry_year=r,"12"==t&&(this.expiry_year=r+1);var a=this.dbService.getLastDayOfMonth(n),i=this.dbService.formatDate(new Date(this.expiry_year+"-"+n+"-01")),o=this.dbService.formatDate(new Date(this.expiry_year+"-"+n+"-"+a));this.dbService.getData("product/hasExpiry?start_date="+i+"&end_date="+o,this.authService.current_user).subscribe((function(t){e.expired_next=t.data}),(function(e){}))}},{key:"getAllExpiredCount",value:function(){var e=this,t=this.dbService.getToday("month"),n=parseInt(t)+1,r=this.dbService.getThisYear();this.expiry_year=r,"12"==t&&(this.expiry_year=r+1),this.dbService.getLastDayOfMonth(n),this.dbService.getData("product/hasExpired",this.authService.current_user).subscribe((function(t){e.expired_all=t.data}),(function(e){}))}},{key:"goBack",value:function(){window.history.back()}},{key:"getNewTransfersCount",value:function(){var e=this;this.dbService.getData("transfer/getPendingTransfersCount",this.authService.current_user).subscribe((function(t){e.pending_transfers=t.data}),(function(e){}))}},{key:"getNewTransferConflictsCount",value:function(){var e=this;this.dbService.getData("transfer/getConflictCount",this.authService.current_user).subscribe((function(t){e.pending_conflicts=t.data}),(function(e){}))}},{key:"getData",value:function(){var e=this;this.loading=!0,this.dbService.getData("admin/getDashboardMeter",this.authService.current_user).subscribe((function(t){e.loading=!1,e.pending_conflicts=t.transfer_conflicts,e.expired_all=t.expired,e.expired_next=t.expiring_next_month,e.expired=t.expiring_this_month,e.stock_out=t.out_of_stock,e.near_max=t.max_stock,e.near_min=t.min_stock,e.pending_transfers=t.incoming_transfers}),(function(t){e.loading=!1}))}},{key:"uploadFile",value:function(e){var t=e.target.files;t.length>0&&(this.file=t[0])}},{key:"upload2",value:function(){var e=this;this.dbService.uploadFileAuth(this.file,"api_product/uploadProducts",this.authService.current_user,this.extras).subscribe((function(t){"1"===t.json().status&&(alert("Uploaded successfully. "),e.filename="",e.dbService.refresh_products.next(!0))}),(function(t){e.filename="",console.log(t),alert("Unable to send file. Please try again or contact us")}))}}]),e}(),b.\u0275fac=function(e){return new(e||b)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](s.a))},b.\u0275cmp=i["\u0275\u0275defineComponent"]({type:b,selectors:[["app-dashboard"]],decls:76,vars:50,consts:[[1,"content"],[1,"container"],[1,"text-info"],[1,"text-danger"],[1,"row"],[1,"col-md-4"],[1,"list-group"],[1,"list-group-item","text-white","bg-info"],[1,"feather","icon-chevrons-right"],[1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"fa","fa-print"],[1,"fa","fa-barcode"],[1,"fa","fa-truck"],[1,"fa","fa-database"],[1,"fa","fa-exclamation-triangle"],["class","fa fa-spin fa-spinner",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-primary","badge-pill"],[1,"fa","fa-spin","fa-spinner"],[1,"fa","fa-exclamation-triangle","text-danger"],[1,"fa","fa-check-circle","text-success"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"h4",2),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"h5",3),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"h5"),i["\u0275\u0275text"](7," Dashboard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",4),i["\u0275\u0275elementStart"](9,"div",5),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275elementStart"](11,"a",7),i["\u0275\u0275elementStart"](12,"b"),i["\u0275\u0275element"](13,"i",8),i["\u0275\u0275text"](14," Quick Links"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"a",9),i["\u0275\u0275element"](16,"i",10),i["\u0275\u0275text"](17," Start Sales"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"a",9),i["\u0275\u0275element"](19,"i",11),i["\u0275\u0275text"](20," Sales History"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"a",9),i["\u0275\u0275element"](22,"i",12),i["\u0275\u0275text"](23," Receive Purchases"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"a",9),i["\u0275\u0275element"](25,"i",13),i["\u0275\u0275text"](26," Inventory"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"a",9),i["\u0275\u0275element"](28,"i",14),i["\u0275\u0275text"](29," Expiries"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"div",5),i["\u0275\u0275elementStart"](31,"div",6),i["\u0275\u0275elementStart"](32,"a",7),i["\u0275\u0275elementStart"](33,"b"),i["\u0275\u0275element"](34,"i",8),i["\u0275\u0275text"](35," Inventory Status "),i["\u0275\u0275template"](36,u,1,0,"i",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"a",9),i["\u0275\u0275template"](38,c,3,0,"span",16),i["\u0275\u0275template"](39,l,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"a",9),i["\u0275\u0275template"](41,d,3,0,"span",16),i["\u0275\u0275template"](42,p,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"a",9),i["\u0275\u0275template"](44,m,3,0,"span",16),i["\u0275\u0275template"](45,f,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"a",9),i["\u0275\u0275template"](47,h,3,0,"span",16),i["\u0275\u0275template"](48,v,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"a",9),i["\u0275\u0275template"](50,g,3,0,"span",16),i["\u0275\u0275template"](51,S,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"a",9),i["\u0275\u0275template"](53,x,3,0,"span",16),i["\u0275\u0275template"](54,y,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"div",5),i["\u0275\u0275elementStart"](56,"div",6),i["\u0275\u0275elementStart"](57,"a",7),i["\u0275\u0275elementStart"](58,"b"),i["\u0275\u0275element"](59,"i",8),i["\u0275\u0275text"](60," Transfers Status "),i["\u0275\u0275template"](61,_,1,0,"i",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"a",9),i["\u0275\u0275text"](63," Transfer Items "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"a",9),i["\u0275\u0275text"](65," Receive Transfers "),i["\u0275\u0275elementStart"](66,"span",17),i["\u0275\u0275text"](67),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](68,"a",9),i["\u0275\u0275text"](69," Incoming Transfers History "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](70,"a",9),i["\u0275\u0275text"](71," Outgoing Transfers History "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"a",9),i["\u0275\u0275text"](73," Transfer conflicts "),i["\u0275\u0275elementStart"](74,"span",17),i["\u0275\u0275text"](75),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Welcome, ",t.user.display_name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",t.user.company.name," "),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](34,I)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](35,C)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](36,N)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](37,D)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](38,w)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](39,M)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired_all),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired_all),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](40,L)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](41,F)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired_next),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired_next),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](42,T)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.stock_out),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.stock_out),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](43,O)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.near_min),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.near_min),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](44,P)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.near_max),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.near_max),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](45,j)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](46,A)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",t.pending_transfers," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](47,H)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](48,J)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](49,B)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",t.pending_conflicts," "))},directives:[a.e,r.j],styles:[""]}),b)}],U=((k=function e(){_classCallCheck(this,e)}).\u0275mod=i["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},imports:[[a.f.forChild(R)],a.f]}),k),X=n("nEHF"),Y=((E=function e(){_classCallCheck(this,e)}).\u0275mod=i["\u0275\u0275defineNgModule"]({type:E}),E.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||E)},imports:[[r.b,U,X.a]]}),E)}}]);