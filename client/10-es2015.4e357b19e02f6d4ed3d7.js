(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{TDBs:function(e,t,n){"use strict";n.r(t),n.d(t,"DashboardModule",(function(){return R}));var r=n("ofXK"),a=n("tyNb"),i=n("fXoL"),s=n("ccyI"),o=n("c92J");function c(e,t){1&e&&i["\u0275\u0275element"](0,"i",18)}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Expired Items Found "),i["\u0275\u0275elementEnd"]())}function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Expired Items "),i["\u0275\u0275elementEnd"]())}function l(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Expiring This Month "),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Expiring This Month "),i["\u0275\u0275elementEnd"]())}function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Expiring Next Month "),i["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Expiring Next Month "),i["\u0275\u0275elementEnd"]())}function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Out Of Stock "),i["\u0275\u0275elementEnd"]())}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Out Of Stock "),i["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Nearing Minimum Stock "),i["\u0275\u0275elementEnd"]())}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Nearing Minimum Stock "),i["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",19),i["\u0275\u0275text"](2," Some Items Nearing Maximum Stock "),i["\u0275\u0275elementEnd"]())}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275element"](1,"i",20),i["\u0275\u0275text"](2," No Items Nearing Maximum Stock "),i["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&i["\u0275\u0275element"](0,"i",18)}const y=function(){return["/new_sale"]},E=function(){return["/sales"]},k=function(){return["/add_purchase"]},I=function(){return["/products"]},C=function(){return["/expiry"]},N=function(){return["/expiry/all"]},D=function(){return["/expiry/this_month"]},M=function(){return["/expiry/next_month"]},L=function(){return["/stockout"]},w=function(){return["/near_min"]},F=function(){return["/near_max"]},T=function(){return["/add_transfer"]},O=function(){return["/receive_transfers"]},j=function(){return["/transfers"]},P=function(){return["/outgoing_transfers"]},A=function(){return["/transfer_conflicts"]},H=[{path:"",component:(()=>{class e{constructor(e,t){this.authService=e,this.dbService=t,this.customers="...",this.products="...",this.vendors="...",this.orders="...",this.total_arrears=0,this.loading=!1,this.extras=[],this.user=this.authService.current_user}ngOnInit(){this.getExpiredCount(),this.getNextMonthExpiredCount(),this.getAllExpiredCount(),this.getNewTransfersCount(),this.getNewTransferConflictsCount(),this.getStockOutCount(),this.getStockNearMaxCount(),this.getStockNearMinCount()}getCustomerCount(){this.dbService.getData("customer/getCustomerCount",this.authService.current_user).subscribe(e=>{"0"==e.status&&this.authService.logout(),this.customers=e.data},e=>{})}getArrears(){this.dbService.getData("order/getCustomersArrearsCount",this.authService.current_user).subscribe(e=>{this.arrears=e.data,this.total_arrears=e.total},e=>{})}getProductCount(){this.dbService.getData("product/count",this.authService.current_user).subscribe(e=>{this.products=e.data},e=>{})}getVendorCount(){this.dbService.getData("vendor/count",this.authService.current_user).subscribe(e=>{this.vendors=e.data},e=>{})}getOrderCount(){this.dbService.getData("order/count?status=Pending",this.authService.current_user).subscribe(e=>{this.orders=e.data},e=>{})}getStockOutCount(){this.dbService.getData("product/hasStockOut",this.authService.current_user).subscribe(e=>{this.stock_out=e.data},e=>{})}getStockNearMinCount(){this.dbService.getData("product/hasStockNearMin",this.authService.current_user).subscribe(e=>{this.near_min=e.data},e=>{})}getStockNearMaxCount(){this.dbService.getData("product/hasStockNearMax",this.authService.current_user).subscribe(e=>{this.near_max=e.data},e=>{})}getExpiredCount(){this.dbService.getData("product/hasExpiry",this.authService.current_user).subscribe(e=>{"0"==e.status&&this.authService.logout(),this.expired=e.data},e=>{})}getNextMonthExpiredCount(){var e=this.dbService.getToday("month"),t=parseInt(e)+1,n=this.dbService.getThisYear();this.expiry_year=n,"12"==e&&(this.expiry_year=n+1);var r=this.dbService.getLastDayOfMonth(t),a=this.dbService.formatDate(new Date(this.expiry_year+"-"+t+"-01")),i=this.dbService.formatDate(new Date(this.expiry_year+"-"+t+"-"+r));this.dbService.getData("product/hasExpiry?start_date="+a+"&end_date="+i,this.authService.current_user).subscribe(e=>{this.expired_next=e.data},e=>{})}getAllExpiredCount(){var e=this.dbService.getToday("month"),t=parseInt(e)+1,n=this.dbService.getThisYear();this.expiry_year=n,"12"==e&&(this.expiry_year=n+1),this.dbService.getLastDayOfMonth(t),this.dbService.getData("product/hasExpired",this.authService.current_user).subscribe(e=>{this.expired_all=e.data},e=>{})}goBack(){window.history.back()}getNewTransfersCount(){this.dbService.getData("transfer/getPendingTransfersCount",this.authService.current_user).subscribe(e=>{this.pending_transfers=e.data},e=>{})}getNewTransferConflictsCount(){this.dbService.getData("transfer/getConflictCount",this.authService.current_user).subscribe(e=>{this.pending_conflicts=e.data},e=>{})}getData(){this.loading=!0,this.dbService.getData("admin/getDashboardMeter",this.authService.current_user).subscribe(e=>{this.loading=!1,this.pending_conflicts=e.transfer_conflicts,this.expired_all=e.expired,this.expired_next=e.expiring_next_month,this.expired=e.expiring_this_month,this.stock_out=e.out_of_stock,this.near_max=e.max_stock,this.near_min=e.min_stock,this.pending_transfers=e.incoming_transfers},e=>{this.loading=!1})}uploadFile(e){let t=e.target.files;t.length>0&&(this.file=t[0])}upload2(){this.dbService.uploadFileAuth(this.file,"api_product/uploadProducts",this.authService.current_user,this.extras).subscribe(e=>{"1"===e.json().status&&(alert("Uploaded successfully. "),this.filename="",this.dbService.refresh_products.next(!0))},e=>{this.filename="",console.log(e),alert("Unable to send file. Please try again or contact us")})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dashboard"]],decls:76,vars:50,consts:[[1,"content"],[1,"container"],[1,"text-info"],[1,"text-danger"],[1,"row"],[1,"col-md-4"],[1,"list-group"],[1,"list-group-item","text-white","bg-info"],[1,"feather","icon-chevrons-right"],[1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"fa","fa-print"],[1,"fa","fa-barcode"],[1,"fa","fa-truck"],[1,"fa","fa-database"],[1,"fa","fa-exclamation-triangle"],["class","fa fa-spin fa-spinner",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-primary","badge-pill"],[1,"fa","fa-spin","fa-spinner"],[1,"fa","fa-exclamation-triangle","text-danger"],[1,"fa","fa-check-circle","text-success"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"h4",2),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"h5",3),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"h5"),i["\u0275\u0275text"](7," Dashboard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",4),i["\u0275\u0275elementStart"](9,"div",5),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275elementStart"](11,"a",7),i["\u0275\u0275elementStart"](12,"b"),i["\u0275\u0275element"](13,"i",8),i["\u0275\u0275text"](14," Quick Links"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"a",9),i["\u0275\u0275element"](16,"i",10),i["\u0275\u0275text"](17," Start Sales"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"a",9),i["\u0275\u0275element"](19,"i",11),i["\u0275\u0275text"](20," Sales History"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"a",9),i["\u0275\u0275element"](22,"i",12),i["\u0275\u0275text"](23," Receive Purchases"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"a",9),i["\u0275\u0275element"](25,"i",13),i["\u0275\u0275text"](26," Inventory"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"a",9),i["\u0275\u0275element"](28,"i",14),i["\u0275\u0275text"](29," Expiries"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"div",5),i["\u0275\u0275elementStart"](31,"div",6),i["\u0275\u0275elementStart"](32,"a",7),i["\u0275\u0275elementStart"](33,"b"),i["\u0275\u0275element"](34,"i",8),i["\u0275\u0275text"](35," Inventory Status "),i["\u0275\u0275template"](36,c,1,0,"i",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"a",9),i["\u0275\u0275template"](38,u,3,0,"span",16),i["\u0275\u0275template"](39,d,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"a",9),i["\u0275\u0275template"](41,l,3,0,"span",16),i["\u0275\u0275template"](42,p,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"a",9),i["\u0275\u0275template"](44,m,3,0,"span",16),i["\u0275\u0275template"](45,h,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"a",9),i["\u0275\u0275template"](47,f,3,0,"span",16),i["\u0275\u0275template"](48,S,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"a",9),i["\u0275\u0275template"](50,g,3,0,"span",16),i["\u0275\u0275template"](51,x,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"a",9),i["\u0275\u0275template"](53,v,3,0,"span",16),i["\u0275\u0275template"](54,_,3,0,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"div",5),i["\u0275\u0275elementStart"](56,"div",6),i["\u0275\u0275elementStart"](57,"a",7),i["\u0275\u0275elementStart"](58,"b"),i["\u0275\u0275element"](59,"i",8),i["\u0275\u0275text"](60," Transfers Status "),i["\u0275\u0275template"](61,b,1,0,"i",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"a",9),i["\u0275\u0275text"](63," Transfer Items "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"a",9),i["\u0275\u0275text"](65," Receive Transfers "),i["\u0275\u0275elementStart"](66,"span",17),i["\u0275\u0275text"](67),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](68,"a",9),i["\u0275\u0275text"](69," Incoming Transfers History "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](70,"a",9),i["\u0275\u0275text"](71," Outgoing Transfers History "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"a",9),i["\u0275\u0275text"](73," Transfer conflicts "),i["\u0275\u0275elementStart"](74,"span",17),i["\u0275\u0275text"](75),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Welcome, ",t.user.display_name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",t.user.company.name," "),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](34,y)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](35,E)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](36,k)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](37,I)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](38,C)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](39,N)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired_all),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired_all),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](40,D)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](41,M)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.expired_next),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.expired_next),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](42,L)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.stock_out),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.stock_out),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](43,w)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.near_min),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.near_min),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](44,F)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.near_max),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.near_max),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](45,T)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](46,O)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",t.pending_transfers," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](47,j)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](48,P)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](49,A)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",t.pending_conflicts," "))},directives:[a.e,r.j],styles:[""]}),e})()}];let J=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(H)],a.f]}),e})();var B=n("nEHF");let R=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.b,J,B.a]]}),e})()}}]);