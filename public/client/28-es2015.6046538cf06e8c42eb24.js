(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("nEHF"),s=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a]]}),e})()},pEcs:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("fXoL");class a{constructor(){}}var s=n("c92J"),r=n("ccyI"),o=n("1VJT"),c=n("ofXK"),d=n("3Pt+"),l=n("hiAm");function h(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addItem()})),i["\u0275\u0275element"](1,"i",9),i["\u0275\u0275elementEnd"]()}}function u(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).list()})),i["\u0275\u0275element"](1,"i",11),i["\u0275\u0275elementEnd"]()}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function m(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275template"](1,h,2,0,"button",4),i["\u0275\u0275template"](2,u,2,0,"button",5),i["\u0275\u0275elementStart"](3,"select",6),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).selected_item=t}))("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).itemSelected()})),i["\u0275\u0275template"](4,p,2,2,"option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.show_add),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.show_add),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selected_item),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",2),i["\u0275\u0275template"](1,m,5,4,"span",3),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_loaded)}}function y(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",18),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"i",19),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",e.name," ")}}function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275template"](1,v,4,1,"a",17),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275template"](2,y,1,0,"app-loading",3),i["\u0275\u0275template"](3,_,3,0,"div",3),i["\u0275\u0275template"](4,g,2,1,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_finished_search)}}let S=(()=>{class e{constructor(e,t,n){this.dbService=e,this.authService=t,this.notify=n,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="select",this.show_add=!0,this.param="",this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.is_loaded=!1,this.added=[]}ngOnInit(){console.log(this.type),"list"!=this.type&&"select"!=this.type||this.list(),"emit"==this.type&&this.getAll()}itemSelected(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.selected_item){this.onFinish.emit(this.objects[e]);break}}itemAdded(e){this.objects.push(e),$("#add_vendor_modal").modal("hide"),this.onFinish.emit(e)}list(){this.is_loaded=!1,this.notify.showLoading(),this.dbService.getData("admin/getBranches?only_others=yes",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status||(this.objects=e.data,this.is_loaded=!0)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}getAll(){this.is_loaded=!1,this.notify.showLoading();let e="admin/getBranches?only_others=no";"admin"==this.authService.current_user.type&&(e+="&parent_company_id="+this.authService.current_user.parent_company_id),this.dbService.getData(e,this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status||(this.objects=e.data,this.onFinish.emit(this.objects),this.is_loaded=!0)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}add(e){this.added.push(e),this.onAdd.emit(e),e.is_selected=!0}select(e){this.selected=e,this.onFinish.emit(e)}addItem(){this.notify.showLoading();let e=window.prompt("Enter name of branch");if(this.dbService.isEmpty(e))return this.notify.failNotification("name is required"),!1;let t=window.prompt("Enter phone number of branch");if(this.dbService.isEmpty(t))return this.notify.failNotification("Phone number is required"),!1;let n=new FormData;n.append("name",e),n.append("phone",t),this.dbService.postData(n,"admin/saveBranch",this.authService.current_user).subscribe(n=>{if(this.notify.hideLoading(),"-1"===n.status)this.notify.failNotification("Server error. Please try again");else if("-1"===n.status)this.notify.failNotification("Unable to authenticate. Please login again");else if("-9"===n.status)this.notify.showNotification("You are not permitted to perform this action","fail",3e3);else{let i=new a;i.id=n.status,i.name=e,i.phone=t,this.objects.push(i),this.notify.successNotification("Branch added successfully"),this.selected_item=i.id,this.itemSelected()}},e=>{this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-branch"]],inputs:{btn_text:"btn_text",type:"type",show_add:"show_add",selected_item:"selected_item"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},decls:2,vars:2,consts:[["class","",4,"ngIf"],["class","card",4,"ngIf"],[1,""],[4,"ngIf"],["type","button","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-info",3,"click",4,"ngIf"],["name","vendors",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-refresh"],[3,"value"],[1,"card"],[1,"body"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"fa","fa-plus","pull-right"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,f,2,1,"span",0),i["\u0275\u0275template"](1,b,5,3,"div",1)),2&e&&(i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","list"==t.type))},directives:[c.j,d.m,d.e,d.h,c.i,d.i,d.n,l.a],styles:[""]}),e})()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("nEHF"),s=n("6QD7"),r=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,s.b],s.b]}),e})()},sodU:function(e,t,n){"use strict";n.r(t),n.d(t,"StockAdjustmentReportModule",(function(){return v}));var i=n("ofXK"),a=n("tyNb"),s=n("fXoL"),r=n("ccyI"),o=n("c92J"),c=n("1VJT"),d=n("3Pt+"),l=n("pEcs"),h=n("UXBy");function u(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",21),s["\u0275\u0275elementStart"](1,"div",22),s["\u0275\u0275element"](2,"app-stock-report",23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("search_by","dates")("start_date",e.start_date)("end_date",e.end_date)}}const p=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a){this.authService=e,this.dbService=t,this.notify=n,this.router=i,this.ar=a,this.quick_option="this_month",this.parent_company_id=null,this.company_id=null,this.branches=[],this.user_type="staff",this.objects=[],this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.sessions=[],this.search_by="dates",this.start_date=this.dbService.getToday(),this.end_date=this.dbService.getToday(),-1==this.authService.current_user.permissions.indexOf("Adjust Stock")&&(this.notify.failNotification("You are not permitted to view that page"),this.goBack()),this.dbService.setTitle("Stock Adjustment Report"),this.year=this.dbService.getThisYear(),"staff"===this.user_type&&(this.user_type=this.authService.current_user.type,this.parent_company_id=this.authService.current_user.parent_company_id,this.company_name=this.authService.current_user.company_name,this.company_id=this.authService.current_user.company_id)}ngOnInit(){console.log(this.company_id),this.setDates()}setBranches(e){this.branches=e}cancel(){this.start_date=void 0,this.end_date=void 0}setDates(){let e=this.dbService.setDates(this.quick_option);this.start_date=e.start_date,this.end_date=e.end_date}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-stock-adjustment-report"]],decls:42,vars:5,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],["name","quick_options",3,"ngModel","change","ngModelChange"],["value","today"],["value","yesterday"],["value","this_week"],["value","last_week"],["value","this_month"],["value","last_month"],["value","first_quarter"],["value","second_quarter"],["value","third_quarter"],["value","last_quarter"],["value","this_year"],["value","last_year"],["type","date","name","start_date",3,"ngModel","ngModelChange"],["type","date","name","end_date",3,"ngModel","ngModelChange"],["class","card",4,"ngIf"],[3,"type","onFinish"],[1,"card"],[1,"card-body"],[3,"search_by","start_date","end_date"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"section",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Stock Adjustment Report"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div"),s["\u0275\u0275elementStart"](7,"label"),s["\u0275\u0275text"](8,"Select period"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"select",4),s["\u0275\u0275listener"]("change",(function(){return t.setDates()}))("ngModelChange",(function(e){return t.quick_option=e})),s["\u0275\u0275elementStart"](10,"option",5),s["\u0275\u0275text"](11,"Today"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"option",6),s["\u0275\u0275text"](13,"Yesterday"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"option",7),s["\u0275\u0275text"](15,"This Week"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"option",8),s["\u0275\u0275text"](17,"Last Week"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"option",9),s["\u0275\u0275text"](19,"This Month"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"option",10),s["\u0275\u0275text"](21,"Last Month"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"option",11),s["\u0275\u0275text"](23,"1st quarter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"option",12),s["\u0275\u0275text"](25,"2nd quarter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"option",13),s["\u0275\u0275text"](27,"3rd quarter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"option",14),s["\u0275\u0275text"](29,"4th quarter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"option",15),s["\u0275\u0275text"](31,"This Year"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"option",16),s["\u0275\u0275text"](33,"Last Year"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"label"),s["\u0275\u0275text"](35,"Start Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"input",17),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.start_date=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"label"),s["\u0275\u0275text"](38,"End Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"input",18),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.end_date=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](40,u,3,3,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"app-select-branch",20),s["\u0275\u0275listener"]("onFinish",(function(e){return t.setBranches(e)})),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngModel",t.quick_option),s["\u0275\u0275advance"](27),s["\u0275\u0275property"]("ngModel",t.start_date),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.end_date),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null!=t.start_date&&null!=t.end_date),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("type","emit"))},directives:[d.m,d.e,d.h,d.i,d.n,d.b,i.j,l.a,h.a],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(p)],a.f]}),e})();var f=n("nEHF"),y=n("rNAZ"),_=n("nBlB");let v=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,m,f.a,y.a,_.a]]}),e})()}}]);