(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Ikxx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){}}},NFbv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),r=n("nEHF"),o=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a]]}),e})()},h4KG:function(e,t,n){"use strict";n.r(t),n.d(t,"AddCustomerModule",(function(){return p}));var i=n("ofXK"),r=n("tyNb"),o=n("fXoL"),s=n("c92J"),a=n("ccyI"),d=n("1VJT"),l=n("mEfR");const c=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r){this.router=t,this.dbService=n,this.authService=i,this.notify=r,this.id=e.snapshot.params.id,-1==this.authService.current_user.permissions.indexOf("Manage Customers")&&(this.notify.failNotification("You are not permitted to view that page"),this.dbService.goBackHome())}ngOnInit(){}customerAdded(e){null==this.id||null==this.id||this.router.navigate(["/customer/details/"+this.id])}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.a),o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-customer"]],decls:7,vars:1,consts:[[1,"content"],[1,"container"],[1,"card"],[1,"card-body"],[3,"id","onFinish"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h4"),o["\u0275\u0275text"](3,"Customer"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"app-customer-form",4),o["\u0275\u0275listener"]("onFinish",(function(e){return t.customerAdded(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("id",t.id))},directives:[l.a],styles:[""]}),e})()}];let u=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.f.forChild(c)],r.f]}),e})();var m=n("nEHF"),h=n("NFbv");let p=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,u,m.a,h.a]]}),e})()},mEfR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),r=n("Ikxx"),o=n("c92J"),s=n("1VJT"),a=n("ccyI"),d=n("3Pt+");let l=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.uploadUrl="admin/uploadPicture",this.url="customer/findById",null!=this.id&&null!=this.id||(this.customer=new r.a)}ngOnInit(){null==this.id||null==this.id||this.getCustomer(this.id)}uploadFinished(e){this.pic_location=e,this.customer.picture=e}getCustomer(e){this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe(e=>{this.customer=e.data,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}submit(){this.notify.showLoading();let e=new FormData;for(let t in this.customer)e.append(t,this.customer[t]);null!=this.id&&null!=this.id||e.append("createdAt",this.dbService.getToday()),e.append("display_name",this.authService.current_user.display_name),this.dbService.postData(e,"customer/save",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.customer.id=e.status,this.notify.successNotification("Customer saved successfully"),this.onFinish.emit(this.customer),this.customer=new r.a)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customer-form"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:36,vars:5,consts:[["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"row"],[1,"col-sm-6"],["required","","type","text","name","name",3,"ngModel","ngModelChange"],["required","","type","text","name","phone",3,"ngModel","ngModelChange"],["name","sex",3,"ngModel","ngModelChange"],["value","Male"],["value","Female"],["name","email","type","email",3,"ngModel","ngModelChange"],["name","date_of_birth","type","date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),i["\u0275\u0275elementStart"](2,"b"),i["\u0275\u0275text"](3,"Fields marked * are required"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"label"),i["\u0275\u0275text"](7,"Name*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"br"),i["\u0275\u0275elementStart"](9,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.name=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",3),i["\u0275\u0275elementStart"](11,"label"),i["\u0275\u0275text"](12,"Phone*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"br"),i["\u0275\u0275elementStart"](14,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.phone=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",3),i["\u0275\u0275elementStart"](16,"label"),i["\u0275\u0275text"](17,"Sex"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"br"),i["\u0275\u0275elementStart"](19,"select",6),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.sex=e})),i["\u0275\u0275elementStart"](20,"option",7),i["\u0275\u0275text"](21,"Male"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"option",8),i["\u0275\u0275text"](23,"Female"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",3),i["\u0275\u0275elementStart"](25,"label"),i["\u0275\u0275text"](26,"Email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"br"),i["\u0275\u0275elementStart"](28,"input",9),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.email=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",3),i["\u0275\u0275elementStart"](30,"label"),i["\u0275\u0275text"](31,"Date of Birth"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](32,"br"),i["\u0275\u0275elementStart"](33,"input",10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.date_of_birth=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",3),i["\u0275\u0275element"](35,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.name),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.phone),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.sex),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.email),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.date_of_birth))},directives:[d.f,d.g,d.b,d.l,d.e,d.h,d.m,d.i,d.n],styles:[""]}),e})()}}]);