function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"1oy2":function(e,t,n){"use strict";n.r(t),n.d(t,"AddOrderModule",(function(){return O}));var i=n("ofXK"),a=n("tyNb"),r=n("fXoL"),o=n("N6Jo"),l=function e(){_classCallCheck(this,e)},s=n("c92J"),d=n("eJvr"),c=n("1VJT"),m=n("ccyI"),u=n("3Pt+");function p(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",5),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275propertyInterpolate"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n," ")}}function h(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"option",6),r["\u0275\u0275text"](1,"Other"),r["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"select",1),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().selected=e}))("change",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().item_selected()})),r["\u0275\u0275template"](2,p,2,2,"option",2),r["\u0275\u0275template"](3,h,2,0,"option",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"i",4),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().ngOnInit()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",i.selected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",i.objects),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.show_other)}}function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",5),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275propertyInterpolate"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n," ")}}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"datalist",7),r["\u0275\u0275template"](2,v,2,2,"option",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",n.objects)}}var g,_=((g=function(){function e(t,n,i){_classCallCheck(this,e),this.dbService=t,this.notify=n,this.authService=i,this.objects=[],this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.onFinish=new r.EventEmitter,this.selected=null,this.type="",this.show_other=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.start()}},{key:"ngOnChanges",value:function(){console.log(this.tracker),this.start()}},{key:"start",value:function(){var e=this;this.is_loaded=!1,this.is_loading=!0;var t="";switch(this.type){case"packaging":t="order/getDeliveryPoints?status=Pending";break;case"delivery":t="order/getDeliveryPoints?status=Packaged";break;default:t="order/getDeliveryPoints"}this.dbService.getData(t,this.authService.current_user).subscribe((function(t){"-1"===t.status&&(e.notify.failNotification(t.message),e.error=!0),"-9"===t.status?(e.notify.failNotification(t.message),e.error=!0):(e.objects=t.data,e.is_loaded=!0,e.error=!1),e.is_loading=!1}),(function(t){e.notify.noConnectionNotification()}))}},{key:"item_selected",value:function(){this.onFinish.emit(this.selected)}}]),e}()).\u0275fac=function(e){return new(e||g)(r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](m.a))},g.\u0275cmp=r["\u0275\u0275defineComponent"]({type:g,selectors:[["app-select-delivery-point"]],inputs:{selected:"selected",type:"type",show_other:"show_other",tracker:"tracker"},outputs:{onFinish:"onFinish"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[[4,"ngIf"],["name","selected",1,"",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["value","other",4,"ngIf"],[1,"fa","fa-refresh",3,"click"],[3,"value"],["value","other"],["id","delivery_point_list"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,f,5,3,"span",0),r["\u0275\u0275template"](1,y,3,1,"span",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.is_loaded&&"datalist"!=t.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded&&"datalist"==t.type))},directives:[i.j,u.m,u.e,u.h,i.i,u.i,u.n],styles:[""]}),g),S=n("4j6H");function b(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",30),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().order.delivery_point=e})),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",i.order.delivery_point)}}function w(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275elementStart"](4,"input",31),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),t.$implicit.quantity=e}))("change",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().getTotal()}))("keyup",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().getTotal()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275elementStart"](10,"a",32),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().removeItem(e)})),r["\u0275\u0275element"](11,"i",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](i.product_name),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",i.quantity),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](i.price),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"]((i.price*i.quantity).toFixed(2))}}function E(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275elementStart"](2,"div",34),r["\u0275\u0275elementStart"](3,"input",35),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().new_quantity=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",36),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate3"](" ",i.new_item.name," [price: ",i.new_item.price,"/",i.new_item.unit,"] "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",i.new_quantity)}}function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.phone," ")}}var C,k,M,I,q=((C=function(){function e(t,n,i,a){_classCallCheck(this,e),this.dbService=t,this.localforage=n,this.notify=i,this.authService=a,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new r.EventEmitter,this.url="orders/findById",this.items=[],this.new_item=null,this.new_quantity=0,this.amount_paid="0",this.added_names=[],this.order_total=0,this.editing=!1,this.customers_local=[],this.ts="",null!=this.id&&null!=this.id||(this.order=new o.a,this.order.createdAt=this.dbService.getToday())}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.ts=this.dbService.getToday(),null==this.id||null==this.id||this.getObject(this.id),null!=this.order._id&&null!=this.order._id){this.getTotal();var t=this;this.items.map((function(e){t.added_names.push(e.product_name)})),this.order.createdAt=this.dbService.getToday("",this.order.createdAt),this.editing=!0}this.localforage.getItem("customers").subscribe((function(t){e.customers_local=t,console.log(e.customers_local)}),(function(e){console.log(e)}))}},{key:"deliveryPointSelected",value:function(e){this.dp_selected=e,"other"!=this.dp_selected&&(this.order.delivery_point=e)}},{key:"getObject",value:function(e){var t=this;this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe((function(e){t.order=e.data,t.is_loading=!1,t.is_loaded=!0,t.error=!1}),(function(e){t.is_loading=!1,t.error=!0,t.is_loaded=!1}))}},{key:"customerSelected",value:function(e){this.order.customer=e}},{key:"populateCustomer",value:function(){this.first_name="",this.last_name="",this.work_place="";for(var e=0;e<this.customers_local.length;e++){var t=this.customers_local[e];if(t.phone==this.phone){this.first_name=t.first_name,this.last_name=t.last_name,this.work_place=t.place_of_work;break}}}},{key:"trackBy",value:function(e,t){return t.product._id}},{key:"productSelected",value:function(e){if(-1==this.added_names.indexOf(e.name)){if(this.new_item=e,"number"!=typeof e.price)return this.notify.failNotification("Price not defined."),!1;this.new_quantity=1,$("#enter_quantity_modal").modal("show"),$("#enter_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}else this.notify.failNotification("Item already in list")}},{key:"increment",value:function(e){null!=e&&null!=e?(e.quantity=(parseFloat(e.quantity)+1).toString(),this.getTotal()):this.new_quantity++}},{key:"decrement",value:function(e){null!=e&&null!=e?parseFloat(e.quantity)>1&&(e.quantity=(parseFloat(e.quantity)-1).toString(),this.getTotal()):parseFloat(this.new_quantity)>1&&this.new_quantity--}},{key:"addItem",value:function(){if(!$.isNumeric(this.new_quantity))return this.notify.failNotification("Enter a valid number"),!1;if(parseFloat(this.new_quantity)<0)return this.notify.failNotification("Enter a quantity above 0"),!1;if(-1==this.added_names.indexOf(this.new_item.name)){var e=new l;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.price=this.new_item.price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_item.price,this.items.push(e),this.added_names.push(this.new_item.name),this.new_item=null,this.new_quantity=0,this.getTotal(),$("#enter_quantity_modal").modal("hide"),this.ts=this.dbService.getToday("timestamp_string")}else this.ts=this.dbService.getToday("timestamp_string"),this.notify.failNotification("Item already in the list")}},{key:"removeItem",value:function(e){this.items.splice(this.items.indexOf(e),1),this.added_names.splice(this.added_names.indexOf(e.name),1),this.getTotal()}},{key:"setQuantities",value:function(){var e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}},{key:"getTotal",value:function(){var e=0;this.items.map((function(t){e+=t.quantity*t.price})),this.order_total=e}},{key:"saveItems",value:function(){var e=this;if(this.phone)return this.notify.failNotification("Please fill the customer details"),!1;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;this.notify.showLoading();for(var t="RF-"+this.dbService.getToday("timestamp_string"),n=0;n<this.items.length;n++){var i=this.items[n],a=new FormData;a.append("id",this.order._id),a.append("product",i.product_id),a.append("price",i.price.toFixed(2)),a.append("quantity",i.quantity.toFixed(2)),a.append("phone",this.phone),a.append("first_name",this.first_name),a.append("last_name",this.last_name),a.append("place_of_work",this.work_place),a.append("delivery_point",this.order.delivery_point),a.append("notes",this.order.notes),a.append("status","Pending"),a.append("code",t),a.append("customer_name",this.order.customer.first_name+" "+this.order.customer.last_name),a.append("product_name",i.product_name),a.append("createdAt",this.dbService.getToday("timestamp")),a.append("display_name",this.authService.current_user.display_name),this.dbService.postData(a,"orders/save",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):(e.order=new o.a,e.items=e.added_names=[],e.getTotal())}),(function(e){}))}this.notify.successNotification("Orders saved successfully")}},{key:"saveBulk",value:function(){var e=this;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(null==this.phone||null==this.phone||null==this.first_name||null==this.first_name||null==this.last_name||null==this.last_name)return this.notify.failNotification("Please fill the customer details"),!1;if(""==this.order.delivery_point||null==this.order.delivery_point||null==this.order.delivery_point)return this.notify.failNotification("Please select a delivery point"),!1;this.notify.showLoading();var t=[],n=[],i=[],a=[];if(this.editing)r=this.order.code;else{this.order_code=this.dbService.abbreviate(this.order.delivery_point,2);var r=this.order_code+"-"+this.dbService.getToday("timestamp_string")}for(var l=0;l<this.items.length;l++){var s=this.items[l];t.push(s.product_id),n.push(s.price),i.push(s.quantity),a.push(s.product_name)}var d=new FormData;d.append("products",t.join("||")),d.append("prices",n.join("||")),d.append("quantities",i.join("||")),d.append("code",r),d.append("product_names",a.join("||")),d.append("added_by",this.authService.current_user._id),d.append("display_name",this.authService.current_user.display_name),d.append("phone",this.phone),d.append("first_name",this.first_name),d.append("last_name",this.last_name),d.append("place_of_work",this.work_place),d.append("amount_paid",this.amount_paid),d.append("delivery_point",this.order.delivery_point),d.append("notes",this.order.notes),d.append("status",this.order.status),this.editing&&d.append("editing","yes"),this.dbService.postData(d,"order/saveBulk",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):(e.notify.hideLoading(),e.order=new o.a,e.items=e.added_names=[],e.getTotal(),e.notify.successNotification("Order saved successfully"),e.ts=e.dbService.getToday("timestamp_string"))}),(function(t){e.ts=e.dbService.getToday("timestamp_string"),e.notify.hideLoading(),e.notify.noConnectionNotification()}))}}]),e}()).\u0275fac=function(e){return new(e||C)(r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](m.a))},C.\u0275cmp=r["\u0275\u0275defineComponent"]({type:C,selectors:[["app-order-form"]],inputs:{order:"order",id:"id",items:"items"},outputs:{onFinish:"onFinish"},decls:83,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["autocomplete","off","list","customers","type","text","name","phone",3,"ngModel","change","keyup","ngModelChange"],["type","text","name","first_name",3,"ngModel","ngModelChange"],["type","text","name","last_name",3,"ngModel","ngModelChange"],["type","text","name","work_place",3,"ngModel","ngModelChange"],["required","","type","date","name","createdAt",3,"ngModel","ngModelChange"],["type","text","list","delivery_point_list","name","delivery_point",3,"ngModel","ngModelChange"],[3,"type"],["required","","type","text","name","delivery_point",3,"ngModel","ngModelChange",4,"ngIf"],["name","notes",1,"form-control",3,"ngModel","ngModelChange"],[3,"timestamp","type","onAdd"],[1,"col-md-8"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success",3,"click"],["id","enter_quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-warning","waves-effect"],["id","customers"],["required","","type","text","name","delivery_point",3,"ngModel","ngModelChange"],["type","number","name","quantities[]",3,"ngModel","ngModelChange","change","keyup"],["title","remove this item",1,"btn","btn-xs","btn-warning",3,"click"],[1,"feather","icon-x"],[1,""],["type","text","required","","name","new_quantity","id","qtt","placeholder","quantity",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Add Item",1,"btn","btn-success","waves-effect"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"h6"),r["\u0275\u0275text"](3,"Customer details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"label"),r["\u0275\u0275text"](8,"Phone number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](9,"br"),r["\u0275\u0275elementStart"](10,"input",5),r["\u0275\u0275listener"]("change",(function(){return t.populateCustomer()}))("keyup",(function(){return t.populateCustomer()}))("ngModelChange",(function(e){return t.phone=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"label"),r["\u0275\u0275text"](13,"First Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"br"),r["\u0275\u0275elementStart"](15,"input",6),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.first_name=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"br"),r["\u0275\u0275elementStart"](17,"label"),r["\u0275\u0275text"](18,"Last Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"br"),r["\u0275\u0275elementStart"](20,"input",7),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.last_name=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",4),r["\u0275\u0275elementStart"](22,"label"),r["\u0275\u0275text"](23,"Work Place"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](24,"br"),r["\u0275\u0275elementStart"](25,"input",8),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.work_place=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",3),r["\u0275\u0275elementStart"](27,"div",4),r["\u0275\u0275elementStart"](28,"label"),r["\u0275\u0275text"](29,"Date of Order*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"br"),r["\u0275\u0275elementStart"](31,"input",9),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.createdAt=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",4),r["\u0275\u0275elementStart"](33,"label"),r["\u0275\u0275text"](34,"Delivery Point*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](35,"br"),r["\u0275\u0275elementStart"](36,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.delivery_point=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](37,"app-select-delivery-point",11),r["\u0275\u0275template"](38,b,1,1,"input",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"div",4),r["\u0275\u0275elementStart"](40,"label"),r["\u0275\u0275text"](41,"Notes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](42,"br"),r["\u0275\u0275elementStart"](43,"textarea",13),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.notes=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"div",3),r["\u0275\u0275elementStart"](45,"div",4),r["\u0275\u0275elementStart"](46,"app-select-product",14),r["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",15),r["\u0275\u0275elementStart"](48,"div",0),r["\u0275\u0275elementStart"](49,"div",2),r["\u0275\u0275elementStart"](50,"table",16),r["\u0275\u0275elementStart"](51,"thead"),r["\u0275\u0275elementStart"](52,"tr"),r["\u0275\u0275elementStart"](53,"th"),r["\u0275\u0275text"](54,"Product"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"th"),r["\u0275\u0275text"](56,"Quantity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"th"),r["\u0275\u0275text"](58,"Price"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"th"),r["\u0275\u0275text"](60,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](61,"th"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"tbody"),r["\u0275\u0275template"](63,w,12,4,"tr",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](64,"h4"),r["\u0275\u0275text"](65),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"label"),r["\u0275\u0275text"](67,"Amount Paid"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](68,": "),r["\u0275\u0275elementStart"](69,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.amount_paid=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"input",19),r["\u0275\u0275listener"]("click",(function(){return t.saveBulk()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"div",20),r["\u0275\u0275elementStart"](72,"div",21),r["\u0275\u0275elementStart"](73,"div",22),r["\u0275\u0275elementStart"](74,"div",23),r["\u0275\u0275elementStart"](75,"form",24,25),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.addItem()})),r["\u0275\u0275template"](77,E,5,4,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"div",27),r["\u0275\u0275elementStart"](79,"button",28),r["\u0275\u0275text"](80,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"datalist",29),r["\u0275\u0275template"](82,x,2,1,"option",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngModel",t.phone),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.first_name),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.last_name),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.work_place),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.order.createdAt),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.order.delivery_point),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("type","datalist"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","other"==t.dp_selected),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.order.notes),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("timestamp",t.ts)("type","search"),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",t.items),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("Total: ",t.order_total,""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.amount_paid),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",null!=t.new_item),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",t.customers_local))},directives:[u.b,u.e,u.h,u.l,_,i.j,S.a,i.i,u.f,u.g,u.j,u.i,u.n],styles:[""]}),C),F=[{path:"",component:(k=function(){function e(t,n){_classCallCheck(this,e),this.router=n,this.id=t.snapshot.params.id}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"productAdded",value:function(e){null==this.id||null==this.id||this.router.navigate(["/order/"+this.id])}},{key:"goBack",value:function(){window.history.back()}}]),e}(),k.\u0275fac=function(e){return new(e||k)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](a.c))},k.\u0275cmp=r["\u0275\u0275defineComponent"]({type:k,selectors:[["app-add-order"]],decls:7,vars:0,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Add a new order"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"app-order-form"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())},directives:[q],styles:[""]}),k)}],N=((M=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},imports:[[a.e.forChild(F)],a.e]}),M),j=n("nEHF"),P=n("rMCG"),O=((I=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[i.b,N,j.a,P.a]]}),I)},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()}}]);