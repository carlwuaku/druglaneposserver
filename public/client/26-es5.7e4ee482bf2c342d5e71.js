function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"9EpT":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n("fXoL"),a=["bcElement"],r=n("YsXA"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.elementType="svg",this.cssClass="barcode",this.format="CODE128",this.lineColor="#000000",this.width=2,this.height=100,this.displayValue=!1,this.fontOptions="",this.font="monospace",this.textAlign="center",this.textPosition="bottom",this.textMargin=2,this.fontSize=20,this.background="#ffffff",this.margin=10,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.value="",this.valid=function(){return!0}}return _createClass(e,[{key:"ngOnChanges",value:function(){this.createBarcode()}},{key:"createBarcode",value:function(){if(this.value){var e;switch(this.elementType){case"img":e=this.renderer.createElement("img");break;case"canvas":e=this.renderer.createElement("canvas");break;case"svg":default:e=this.renderer.createElement("svg","svg")}r(e,this.value,this.options);var t,n=_createForOfIteratorHelper(this.bcElement.nativeElement.childNodes);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.renderer.removeChild(this.bcElement.nativeElement,i)}}catch(a){n.e(a)}finally{n.f()}this.renderer.appendChild(this.bcElement.nativeElement,e)}}},{key:"options",get:function(){return{format:this.format,lineColor:this.lineColor,width:this.width,height:this.height,displayValue:this.displayValue,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:this.valid}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.Renderer2))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-barcode6"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275staticViewQuery"](a,!0),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.bcElement=n.first)},inputs:{elementType:["bc-element-type","elementType"],cssClass:["bc-class","cssClass"],format:["bc-format","format"],lineColor:["bc-line-color","lineColor"],width:["bc-width","width"],height:["bc-height","height"],displayValue:["bc-display-value","displayValue"],fontOptions:["bc-font-options","fontOptions"],font:["bc-font","font"],textAlign:["bc-text-align","textAlign"],textPosition:["bc-text-position","textPosition"],textMargin:["bc-text-margin","textMargin"],fontSize:["bc-font-size","fontSize"],background:["bc-background","background"],margin:["bc-margin","margin"],marginTop:["bc-margin-top","marginTop"],marginBottom:["bc-margin-bottom","marginBottom"],marginLeft:["bc-margin-left","marginLeft"],marginRight:["bc-margin-right","marginRight"],value:["bc-value","value"],valid:["bc-valid","valid"]},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["bcElement",""]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",null,0),2&e&&i["\u0275\u0275classMap"](t.cssClass)},encapsulation:2}),e}(),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[]]}),e}()},mbIT:function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},n49D:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("4AQi"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.excel=t,this.objects=[],this.filename="download"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"export",value:function(){this.excel.exportAsExcelFile(this.objects,this.filename)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-export-to-excel"]],inputs:{objects:"objects",filename:"filename"},decls:3,vars:0,consts:[[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-file-excel-o"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("click",(function(){return t.export()})),i["\u0275\u0275element"](1,"i",1),i["\u0275\u0275text"](2," Export To Excel"),i["\u0275\u0275elementEnd"]())},styles:[""]}),e}()},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("nEHF"),r=n("9EpT"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,r.b]]}),e}()},"p0+S":function(e,t,n){"use strict";var i=n("mbIT");t.isNumeric=function(e){return!i.isArray(e)&&e-parseFloat(e)+1>=0}},r3Tv:function(e,t,n){"use strict";n.r(t),n.d(t,"StockTakingUploadModule",(function(){return k}));var i=n("ofXK"),a=n("tyNb"),r=n("p0+S"),o=n("fXoL"),l=n("c92J"),s=n("1VJT"),c=n("ccyI"),d=n("3Pt+"),u=n("n49D"),m=n("nVU4"),f=["productsGrid"];function h(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"div",12),o["\u0275\u0275elementStart"](2,"div",13),o["\u0275\u0275elementStart"](3,"div",14),o["\u0275\u0275text"](4," Instructions: "),o["\u0275\u0275element"](5,"br"),o["\u0275\u0275text"](6," The first row must contain the following column headers. Please make sure all are in lowercase (small caps) and spelled exactly as seen here. The order does not matter. "),o["\u0275\u0275element"](7,"br"),o["\u0275\u0275elementStart"](8,"table",15),o["\u0275\u0275elementStart"](9,"thead"),o["\u0275\u0275elementStart"](10,"tr"),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Column"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"th"),o["\u0275\u0275text"](14,"Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"tbody"),o["\u0275\u0275elementStart"](16,"tr"),o["\u0275\u0275elementStart"](17,"td"),o["\u0275\u0275text"](18,"id"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"td"),o["\u0275\u0275text"](20,"The product id, must be a number. If left blank, the item details will be added to the database as a new product"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"tr"),o["\u0275\u0275elementStart"](22,"td"),o["\u0275\u0275text"](23,"name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"td"),o["\u0275\u0275text"](25,"required. The product name. If left blank, the item will be skipped."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"tr"),o["\u0275\u0275elementStart"](27,"td"),o["\u0275\u0275text"](28,"category"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"td"),o["\u0275\u0275text"](30,"optional. E.g. antibiotics. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"tr"),o["\u0275\u0275elementStart"](32,"td"),o["\u0275\u0275text"](33,"price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"td"),o["\u0275\u0275text"](35,"required. the selling price of the item. must be a number."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"tr"),o["\u0275\u0275elementStart"](37,"td"),o["\u0275\u0275text"](38,"cost_price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"td"),o["\u0275\u0275text"](40,"optional. must be a number if provided."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](41,"tr"),o["\u0275\u0275elementStart"](42,"td"),o["\u0275\u0275text"](43,"expiry"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"td"),o["\u0275\u0275text"](45,"optional. must be in the format YYYY-MM-DD , e.g. 2020-12-25."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](46,"tr"),o["\u0275\u0275elementStart"](47,"td"),o["\u0275\u0275text"](48,"counted"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"td"),o["\u0275\u0275text"](50,"required. the actual quantity of the product counted"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](51,"tr"),o["\u0275\u0275elementStart"](52,"td"),o["\u0275\u0275text"](53,"expected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](54,"td"),o["\u0275\u0275text"](55,"required. the quantity of the item that was expected. i.e. the current stock according to the inventory system. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](56,"tr"),o["\u0275\u0275elementStart"](57,"td"),o["\u0275\u0275text"](58,"unit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](59,"td"),o["\u0275\u0275text"](60,"optional. whether per tablet or bottle, etc "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](61,"tr"),o["\u0275\u0275elementStart"](62,"td"),o["\u0275\u0275text"](63,"shelf"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](64,"td"),o["\u0275\u0275text"](65,"optional. the physical location of the item. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](66,"hr"),o["\u0275\u0275elementStart"](67,"b"),o["\u0275\u0275text"](68,"Click the button below to select the file. It will be automatically processed"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](69,"input",16),o["\u0275\u0275listener"]("ngModelChange",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().filename=e}))("change",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().uploadFile(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](69),o["\u0275\u0275property"]("ngModel",i.filename)}}var p=function(e,t){return{"text-danger":e,"text-success":t}};function b(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",17),o["\u0275\u0275elementStart"](1,"div",18),o["\u0275\u0275elementStart"](2,"div",13),o["\u0275\u0275elementStart"](3,"div",19),o["\u0275\u0275elementStart"](4,"h5"),o["\u0275\u0275text"](5,"Confirm the data. You may edit a cell by double-clicking it, typing in the new value, and pressing Enter."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"br"),o["\u0275\u0275elementStart"](7,"button",20),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().reset()})),o["\u0275\u0275element"](8,"i",21),o["\u0275\u0275text"](9," Cancel and upload another file"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"app-export-to-excel",22),o["\u0275\u0275text"](11),o["\u0275\u0275element"](12,"hr"),o["\u0275\u0275elementStart"](13,"div"),o["\u0275\u0275elementStart"](14,"span"),o["\u0275\u0275elementStart"](15,"b",23),o["\u0275\u0275text"](16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](17," | "),o["\u0275\u0275elementStart"](18,"b",24),o["\u0275\u0275text"](19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](20," | "),o["\u0275\u0275elementStart"](21,"b",25),o["\u0275\u0275text"](22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"button",26),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().startSave()})),o["\u0275\u0275text"](24,"Submit & Finish"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",14),o["\u0275\u0275elementStart"](26,"ag-grid-angular",27,28),o["\u0275\u0275listener"]("gridReady",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onGridReady(e)}))("cellValueChanged",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onCellValueChanged(e)}))("selectionChanged",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onSelectionChanged(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("objects",i.objects),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" #",i.code," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("Total Loss: GHC ",i.loss_total.toFixed(2)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("Total Excess: GHC ",i.excess_total.toFixed(2)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction2"](11,p,i.excess_total+i.loss_total<0,i.loss_total+i.excess_total>0)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Overall Total: GHC ",(i.excess_total+i.loss_total).toFixed(2),""),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("rowData",i.objects)("columnDefs",i.columnDefs)("rowClassRules",i.rowClassRules)("defaultColDef",i.defaultColDef)("suppressMenuHide",!0)}}var g,y,v,x=[{path:"",component:(g=function(){function e(t,n,i,a){_classCallCheck(this,e),this.dbService=t,this.notify=n,this.authService=i,this.router=a,this.objects=[],this.filename="",this.show_data=!1,this.columnDefs=[{headerName:"#",valueGetter:"node.rowIndex + 1"},{headerName:"Product",field:"name",sortable:!0,filter:!0,autoHeight:!0,cellClass:"bordered"},{headerName:"Cost Price",field:"cost_price",sortable:!0,filter:!0,editable:!0,cellClass:"bordered"},{headerName:"Selling Price",field:"price",editable:!0,type:"numericColumn",sortable:!0,filter:!0,cellClass:"bordered"},{headerName:"Category",field:"category",sortable:!0,editable:!0,filter:!0,cellClass:"bordered"},{headerName:"Unit",field:"unit",sortable:!0,editable:!0,filter:!0,cellClass:"bordered"},{headerName:"Shelf",field:"shelf",sortable:!0,editable:!0,filter:!0,cellClass:"bordered"},{headerName:"Closest Expiry",field:"expiry",type:"dateColumn",sortable:!0,filter:!0,editable:!0,cellClass:"bordered"},{headerName:"Current Stock",field:"stock",type:"numericColumn",sortable:!0,filter:!0,cellClass:"bordered"},{headerName:"Quantity Counted",field:"quantity",type:"numericColumn",sortable:!0,filter:!0,editable:!0,cellClass:"bordered"},{headerName:"Difference",field:"difference",type:"numericColumn",sortable:!0,filter:!0,cellClass:"bordered"},{headerName:"Total Cost",field:"total_cost",type:"numericColumn",sortable:!0,filter:!0,cellClass:"bordered"},{headerName:"Total Price",field:"total",type:"numericColumn",sortable:!0,filter:!0,cellClass:"bordered"}],this.loss_total=0,this.excess_total=0,this.defaultColDef={resizable:!0},this.rowClassRules={warning:"data.difference < 0",success:"data.difference > 0"}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"reset",value:function(){this.filename="",this.show_data=!1}},{key:"onGridReady",value:function(e){this.gridApi=e.api,e.api.sizeColumnsToFit()}},{key:"onSelectionChanged",value:function(e){var t=this.gridApi.getSelectedRows();this.selected_items=t[0]}},{key:"getCode",value:function(){var e=this;this.notify.showLoading(),this.dbService.getData("product/createStockAdjustmentSession",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Server error. Please try again."):"0"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):e.code=t.data}),(function(t){e.notify.noConnectionNotification()}))}},{key:"uploadFile",value:function(e){var t=this,n=e.target.files;if(n.length>0){this.notify.showLoading();var i=n[0],a=new FormData;a.append("uploadfile",i),this.dbService.postData(a,"product/upload",this.authService.current_user).subscribe((function(e){t.notify.hideLoading(),"-1"===e.status?t.notify.failNotification("Server error. Please try again."):"0"===e.status?t.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?t.notify.showNotification("You are not permitted to perform this action","fail",3e3):(t.objects=e.data,t.show_data=!0,t.getTotal(),t.getCode())}),(function(e){t.notify.hideLoading(),t.notify.noConnectionNotification(),console.log(e)}))}}},{key:"onCellValueChanged",value:function(e){var t=e.node.id,n=e.oldValue,i=e.column.getId(),a=e.newValue;console.log(e);var o=this.objects[t];switch(i){case"quantity":Object(r.isNumeric)(a)?(null!=o.stock&&null!=o.stock||(o.stock="0"),o.difference=parseFloat(o.quantity)-parseFloat(o.stock),this.getTotal()):(alert("only numbers are accepted for the quantity"),o.quantity=n);break;case"cost_price":case"price":Object(r.isNumeric)(a)?this.getTotal():(alert("only numbers are accepted for the prices"),o.quantity=n)}e.node.setData(o)}},{key:"getTotal",value:function(){var e=0,t=0;this.objects.map((function(n){if(Object(r.isNumeric)(n.quantity)){var i=(n.quantity-parseFloat(n.stock))*n.price,a=Object(r.isNumeric)(n.cost_price)?(n.quantity-parseFloat(n.stock))*n.cost_price:0;n.total=i,n.total_cost=a,n.quantity<parseFloat(n.stock)?e+=i:t+=i}})),this.loss_total=e,this.excess_total=t}},{key:"startSave",value:function(){$("#finish_stock_modal").modal({keyboard:!1,backdrop:"static"})}},{key:"saveItems",value:function(){var e=this;this.notify.showLoading();for(var t=[],n=[],i=[],a=[],r=[],o=[],l=[],s=[],c=[],d=[],u=[],m=0;m<this.objects.length;m++){var f=this.objects[m];null!=f.quantity&&null!=f.quantity&&(t.push(f.id),n.push(f.price),i.push(f.quantity),a.push(f.name),r.push(f.stock),o.push(null==f.cost_price||null==f.cost_price?0:f.cost_price),l.push(f.size),s.push(f.category),c.push(f.expiry),d.push(f.unit),u.push(f.shelf))}var h=new FormData;h.append("products",t.join("||")),h.append("prices",n.join("||")),h.append("cost_prices",o.join("||")),h.append("quantities_counted",i.join("||")),h.append("quantities_expected",r.join("||")),h.append("code",this.code),h.append("product_names",a.join("||")),h.append("expiries",c.join("||")),h.append("sizes",l.join("||")),h.append("units",d.join("||")),h.append("damaged",""),h.append("expired",""),h.append("shelves",u.join("||")),h.append("categories",s.join("||")),h.append("created_by",this.authService.current_user.id),h.append("display_name",this.authService.current_user.display_name),h.append("date",this.dbService.getToday()),h.append("created_on",this.dbService.getToday("timestamp")),this.dbService.postData(h,"product/saveStockAdjustment",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Server error. Please try again."):"0"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):($("#finish_stock_modal").modal("hide"),e.notify.hideLoading(),e.notify.successNotification("Stock adjustment saved successfully"),e.router.navigate(["/stockSessionReport/"+e.code]))}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification(),console.log(t)}))}}]),e}(),g.\u0275fac=function(e){return new(e||g)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](a.c))},g.\u0275cmp=o["\u0275\u0275defineComponent"]({type:g,selectors:[["app-stock-taking-upload"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](f,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.agGrid=n.first)},decls:17,vars:2,consts:[[1,"content"],[1,"container"],["class","row  justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["id","finish_stock_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[1,"btn","btn-success",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"row","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-body"],[1,"table","table-bordered","table-striped"],["type","file","name","filename","placeholder","Select excel file","accept",".xlsx",3,"ngModel","ngModelChange","change"],[1,"row"],[1,"col-md-12"],[1,"card-header"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-refresh"],[3,"objects"],[1,"text-danger"],[1,"text-success"],[3,"ngClass"],[1,"btn","btn-sm","btn-success",3,"click"],["rowSelection","single",1,"ag-theme-balham",2,"width","100%","height","calc(400px)","font-family","Muli","font-size","15px",3,"rowData","columnDefs","rowClassRules","defaultColDef","suppressMenuHide","gridReady","cellValueChanged","selectionChanged"],["productsGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h4"),o["\u0275\u0275text"](3,"Upload Stock Taking Data From Excel File"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,h,70,1,"div",2),o["\u0275\u0275template"](5,b,28,14,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275elementStart"](10,"h5"),o["\u0275\u0275text"](11,"Sure you are done?"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",8),o["\u0275\u0275elementStart"](13,"button",9),o["\u0275\u0275listener"]("click",(function(){return t.saveItems()})),o["\u0275\u0275text"](14,"Yes, submit and finish this session"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"button",10),o["\u0275\u0275text"](16,"No, go back"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",!t.show_data),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.show_data))},directives:[i.j,d.b,d.e,d.h,u.a,i.h,m.AgGridAngular],styles:[""]}),g)}],S=((y=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[a.f.forChild(x)],a.f]}),y),C=n("nEHF"),E=n("rNAZ"),w=n("nBlB"),k=((v=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[i.b,S,C.a,E.a,w.a]]}),v)},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("nEHF"),r=n("6QD7"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,r.b],r.b]}),e}()}}]);