(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"7wo0":function(e,t,n){"use strict";n.r(t),n.d(t,"SettingsModule",(function(){return E}));var i=n("ofXK"),s=n("tyNb"),a=n("fXoL"),o=n("c92J"),r=n("1VJT"),l=n("ccyI"),d=n("hiAm"),c=n("3Pt+");let m=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.is_numeric=!1,this.onFinish=new a.EventEmitter}ngOnInit(){this.is_numeric=$.isNumeric(this.setting.value)}save(e){this.notify.showLoading();let t=new FormData;t.append("name",this.setting.name),t.append("value",this.setting.value),t.append("module",this.setting.module),this.dbService.postData(t,"changeSetting",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status&&this.notify.failNotification("Internal server error. Please contact admin"),"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.onFinish.emit(this.setting),this.notify.showNotification("Setting: "+this.setting.name+" saved successfully","success",3e3))},e=>{this.notify.noConnectionNotification()})}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-edit-settings"]],inputs:{setting:"setting"},outputs:{onFinish:"onFinish"},decls:4,vars:1,consts:[["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["name","value","type","text",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Save",1,"btn","btn-success"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0,1),a["\u0275\u0275listener"]("ngSubmit",(function(e){return t.save(e)})),a["\u0275\u0275elementStart"](2,"input",2),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.setting.value=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",3),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.setting.value))},directives:[c.f,c.g,c.b,c.e,c.h],styles:[""]}),e})();function u(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",18),a["\u0275\u0275elementStart"](1,"h4"),a["\u0275\u0275text"](2,"Unable to connect to server. Try again"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&a["\u0275\u0275element"](0,"app-loading",19)}function h(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"](2).edit(n)})),a["\u0275\u0275elementStart"](1,"b"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"br"),a["\u0275\u0275elementStart"](4,"em",24),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.name," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.value)}}function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",20),a["\u0275\u0275elementStart"](1,"div",21),a["\u0275\u0275text"](2," Click any item in the list to edit it "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,h,6,2,"div",22),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.settings)}}function g(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"h4",25),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" Edit setting: ",e.selected.name," ")}}function v(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",26),a["\u0275\u0275elementStart"](1,"app-edit-settings",27),a["\u0275\u0275listener"]("onFinish",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().editFinished(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("setting",e.selected)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.sms_balance="",-1==this.authService.current_user.permissions.indexOf("Manage Settings")&&(this.goBack(),this.notify.failNotification("You are not permitted to view this page")),this.dbService.setTitle("Settings")}ngOnInit(){this.dbService.getData("getSettings",this.authService.current_user).subscribe(e=>{this.settings=e,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}backup(){this.dbService.getData("backupDB",this.authService.current_user).subscribe(e=>{},e=>{})}hasPermission(e){return-1!=this.authService.current_user.permissions.indexOf(e+".Settings.Edit")}edit(e){this.selected=e,$("#edit_modal").modal("show")}editFinished(e){$("#edit_modal").modal("hide")}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-settings"]],decls:21,vars:5,consts:[[1,"content"],[1,"row"],[1,"col-12"],[1,"row","clearfix"],[1,"col-md-6"],[1,"card"],[1,"card-body"],["class","body",4,"ngIf"],["class","",4,"ngIf"],["class","list-group",4,"ngIf"],["id","edit_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-header"],["class","modal-title","id","smallModalLabel",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-danger","waves-effect"],[1,"body"],[1,""],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"pull-right"],["id","smallModalLabel",1,"modal-title"],[1,"modal-body"],[3,"setting","onFinish"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"h5"),a["\u0275\u0275text"](4,"Settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",3),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275template"](9,u,3,0,"div",7),a["\u0275\u0275template"](10,p,1,0,"app-loading",8),a["\u0275\u0275template"](11,f,4,1,"div",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",10),a["\u0275\u0275elementStart"](13,"div",11),a["\u0275\u0275elementStart"](14,"div",12),a["\u0275\u0275elementStart"](15,"div",13),a["\u0275\u0275template"](16,g,2,1,"h4",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](17,v,2,1,"div",15),a["\u0275\u0275elementStart"](18,"div",16),a["\u0275\u0275elementStart"](19,"button",17),a["\u0275\u0275text"](20,"CLOSE"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngIf",t.error),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.is_loading),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.is_loaded),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",null!=t.selected),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null!=t.selected))},directives:[i.j,d.a,i.i,m],styles:[""]}),e})()}];let b=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.f.forChild(S)],s.f]}),e})();var y=n("nEHF");let E=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,b,y.a]]}),e})()},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()}}]);