function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"9EpT":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n("fXoL"),a=["bcElement"],r=n("YsXA"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.elementType="svg",this.cssClass="barcode",this.format="CODE128",this.lineColor="#000000",this.width=2,this.height=100,this.displayValue=!1,this.fontOptions="",this.font="monospace",this.textAlign="center",this.textPosition="bottom",this.textMargin=2,this.fontSize=20,this.background="#ffffff",this.margin=10,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.value="",this.valid=function(){return!0}}return _createClass(e,[{key:"ngOnChanges",value:function(){this.createBarcode()}},{key:"createBarcode",value:function(){if(this.value){var e;switch(this.elementType){case"img":e=this.renderer.createElement("img");break;case"canvas":e=this.renderer.createElement("canvas");break;case"svg":default:e=this.renderer.createElement("svg","svg")}r(e,this.value,this.options);var t,n=_createForOfIteratorHelper(this.bcElement.nativeElement.childNodes);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.renderer.removeChild(this.bcElement.nativeElement,i)}}catch(a){n.e(a)}finally{n.f()}this.renderer.appendChild(this.bcElement.nativeElement,e)}}},{key:"options",get:function(){return{format:this.format,lineColor:this.lineColor,width:this.width,height:this.height,displayValue:this.displayValue,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:this.valid}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.Renderer2))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-barcode6"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275staticViewQuery"](a,!0),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.bcElement=n.first)},inputs:{elementType:["bc-element-type","elementType"],cssClass:["bc-class","cssClass"],format:["bc-format","format"],lineColor:["bc-line-color","lineColor"],width:["bc-width","width"],height:["bc-height","height"],displayValue:["bc-display-value","displayValue"],fontOptions:["bc-font-options","fontOptions"],font:["bc-font","font"],textAlign:["bc-text-align","textAlign"],textPosition:["bc-text-position","textPosition"],textMargin:["bc-text-margin","textMargin"],fontSize:["bc-font-size","fontSize"],background:["bc-background","background"],margin:["bc-margin","margin"],marginTop:["bc-margin-top","marginTop"],marginBottom:["bc-margin-bottom","marginBottom"],marginLeft:["bc-margin-left","marginLeft"],marginRight:["bc-margin-right","marginRight"],value:["bc-value","value"],valid:["bc-valid","valid"]},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["bcElement",""]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",null,0),2&e&&i["\u0275\u0275classMap"](t.cssClass)},encapsulation:2}),e}(),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[]]}),e}()},"a/do":function(e,t,n){"use strict";n.r(t),n.d(t,"NewSaleModule",(function(){return be}));var i=n("ofXK"),a=n("tyNb"),r=n("XC36"),o=function e(){_classCallCheck(this,e)},l=n("fXoL"),s=n("c92J"),d=n("bgkY"),m=n("1VJT"),c=n("eJvr"),u=n("ccyI"),h=n("4j6H"),f=n("3Pt+"),p=n("QQkv"),_=n("yGzR"),g=n("/9/o"),v=function e(){_classCallCheck(this,e),this.momo="0",this.pos="0",this.cash="0",this.credit="0",this.insurance="0",this.other="0",this.cheque="0"};function b(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n)}}var y,S=((y=function(){function e(t,n,i){_classCallCheck(this,e),this.dbService=t,this.notify=n,this.authService=i,this.onFinish=new l.EventEmitter,this.shifts=[],this.dbService.isEmpty(this.date)&&(this.date=this.dbService.getToday()),this.object=new v,this.object.shift=this.shift,this.object.date=this.date}return _createClass(e,[{key:"ngOnInit",value:function(){this.dbService.isEmpty(this.shift)||this.dbService.isEmpty(this.date)||this.getData(),this.getShifts()}},{key:"getData",value:function(){var e=this;if(this.dbService.isEmpty(this.shift))return!1;this.notify.showLoading(),this.dbService.getData("sale/findDailyRecordsByDates?date="+this.object.date+"&shift="+this.object.shift,this.authService.current_user).subscribe((function(t){"1"==t.status&&(null==t.data?(e.object.momo="0",e.object.cash="0",e.object.credit="0",e.object.pos="0",e.object.other="0",e.object.insurance="0",e.object.cheque="0"):e.object=t.data),e.notify.hideLoading()}),(function(t){e.notify.noConnectionNotification()}))}},{key:"getShifts",value:function(){var e=this;this.dbService.getData("admin/getSetting?setting=number_of_shifts",this.authService.current_user).subscribe((function(t){if("1"==t.status)for(var n=t.data.split(","),i=0;i<n.length;i++)e.shifts.push("".concat(n[i]))}),(function(t){e.notify.failNotification("Unable to get shifts. Check connection")}))}},{key:"save",value:function(){var e=this;this.notify.showLoading();var t=new FormData;for(var n in this.object)t.append(n,this.object[n]);this.dbService.postData(t,"sale/saveDailyRecord",this.authService.current_user).subscribe((function(t){switch(e.notify.hideLoading(),t.status){case"0":e.notify.failNotification("Error: You are not logged in");break;case"-9":e.notify.failNotification("Error: You are not permitted");break;case"-1":alert("Server error! Please try again or contact admin");break;default:e.onFinish.emit("done"),e.notify.showNotification("Records saved successfully","success",3e3)}}),(function(t){e.notify.noConnectionNotification()}))}}]),e}()).\u0275fac=function(e){return new(e||y)(l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](u.a))},y.\u0275cmp=l["\u0275\u0275defineComponent"]({type:y,selectors:[["app-add-daily-record"]],inputs:{shift:"shift",date:"date"},outputs:{onFinish:"onFinish"},decls:51,vars:10,consts:[["ngNativeValidate","",3,"ngSubmit"],[1,"row"],[1,"col-md-4"],["type","date","name","date","required","",3,"ngModel","ngModelChange"],["required","","name","shift",3,"ngModel","change","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["type","text","name","cash","required","",3,"ngModel","ngModelChange"],["type","text","name","momo","required","",3,"ngModel","ngModelChange"],["type","text","name","cheque","required","",3,"ngModel","ngModelChange"],["type","text","name","credit","required","",3,"ngModel","ngModelChange"],["type","text","name","pos","required","",3,"ngModel","ngModelChange"],["type","text","name","insurance","required","",3,"ngModel","ngModelChange"],["type","text","name","other","required","",3,"ngModel","ngModelChange"],["type","submit","value","Save",1,"btn","btn-success"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"form",0),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"label"),l["\u0275\u0275text"](4,"Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](5,"br"),l["\u0275\u0275elementStart"](6,"input",3),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.date=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",2),l["\u0275\u0275elementStart"](8,"label"),l["\u0275\u0275text"](9,"Shift"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](10,"br"),l["\u0275\u0275elementStart"](11,"select",4),l["\u0275\u0275listener"]("change",(function(){return t.getData()}))("ngModelChange",(function(e){return t.object.shift=e})),l["\u0275\u0275elementStart"](12,"option",5),l["\u0275\u0275text"](13,"Choose One"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](14,b,2,1,"option",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",2),l["\u0275\u0275elementStart"](16,"label"),l["\u0275\u0275text"](17,"Cash"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](18,"br"),l["\u0275\u0275elementStart"](19,"input",7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.cash=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"div",2),l["\u0275\u0275elementStart"](21,"label"),l["\u0275\u0275text"](22,"Mobile Money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](23,"br"),l["\u0275\u0275elementStart"](24,"input",8),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.momo=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div",2),l["\u0275\u0275elementStart"](26,"label"),l["\u0275\u0275text"](27,"Cheque"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](28,"br"),l["\u0275\u0275elementStart"](29,"input",9),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.cheque=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",2),l["\u0275\u0275elementStart"](31,"label"),l["\u0275\u0275text"](32,"Credit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](33,"br"),l["\u0275\u0275elementStart"](34,"input",10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.credit=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"div",2),l["\u0275\u0275elementStart"](36,"label"),l["\u0275\u0275text"](37,"POS"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](38,"br"),l["\u0275\u0275elementStart"](39,"input",11),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.pos=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"div",2),l["\u0275\u0275elementStart"](41,"label"),l["\u0275\u0275text"](42,"Insurance"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](43,"br"),l["\u0275\u0275elementStart"](44,"input",12),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.insurance=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"div",2),l["\u0275\u0275elementStart"](46,"label"),l["\u0275\u0275text"](47,"Others"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](48,"br"),l["\u0275\u0275elementStart"](49,"input",13),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.other=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](50,"input",14),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.object.date),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.shift),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",t.shifts),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.cash),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.momo),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.cheque),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.credit),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.pos),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.insurance),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.object.other))},directives:[f.f,f.g,f.b,f.l,f.e,f.h,f.m,f.i,f.n,i.i],styles:[""]}),y),x=n("M6vu");function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n)}}function k(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1," Possibly expired"),l["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",92),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"]().showRelated(e)})),l["\u0275\u0275element"](1,"i",93),l["\u0275\u0275text"](2," Swap"),l["\u0275\u0275elementEnd"]()}}function C(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",94),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"]().showInfo(e)})),l["\u0275\u0275element"](1,"i",95),l["\u0275\u0275text"](2," Drug Info "),l["\u0275\u0275elementEnd"]()}}function I(e,t){1&e&&l["\u0275\u0275element"](0,"i",96)}var M=function(e){return{"table-warning":e}},q=function(e){return{"text-danger":e}};function j(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",82),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementStart"](3,"em",82),l["\u0275\u0275element"](4,"br"),l["\u0275\u0275element"](5,"i",83),l["\u0275\u0275text"](6),l["\u0275\u0275template"](7,k,2,0,"span",44),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,w,3,0,"button",84),l["\u0275\u0275template"](9,C,3,0,"button",85),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"td"),l["\u0275\u0275text"](11),l["\u0275\u0275element"](12,"br"),l["\u0275\u0275elementStart"](13,"button",86),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().editItem(e)})),l["\u0275\u0275text"](14," ... "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"button",87),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().increment(e)})),l["\u0275\u0275text"](16," +1 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"button",88),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().decrement(e)})),l["\u0275\u0275text"](18," -1 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"td"),l["\u0275\u0275text"](20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"td"),l["\u0275\u0275text"](22),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"td"),l["\u0275\u0275text"](24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"td"),l["\u0275\u0275text"](26),l["\u0275\u0275template"](27,I,1,0,"i",89),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"td"),l["\u0275\u0275elementStart"](29,"button",90),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().removeItem(e)})),l["\u0275\u0275element"](30,"i",91),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](13,M,i.stock<1||i.quantity>i.stock)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.product_name," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](15,q,i.expired)),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",i.expiry," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.expired),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.related.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",a.hasDrugInfo(i)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",i.quantity," "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"]("",i.unit," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](i.price),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"]((i.price*i.quantity).toFixed(2)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.stock," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.stock<1||i.quantity>i.stock)}}function O(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",98),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).applyDiscount()})),l["\u0275\u0275text"](1,"Apply Discount"),l["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275elementStart"](2,"button",99),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).removeDiscount()})),l["\u0275\u0275element"](3,"i",91),l["\u0275\u0275text"](4," Remove"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("Discount Applied: GHC ",i.discount," ")}}function N(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275template"](1,O,2,0,"button",97),l["\u0275\u0275template"](2,T,5,1,"span",44),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",0==n.discount),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.discount>0)}}function D(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"em",100),l["\u0275\u0275text"](1," Discount "),l["\u0275\u0275element"](2,"i",101),l["\u0275\u0275elementEnd"]())}function F(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275elementStart"](2,"em"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.customer_name," - Refill - "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",n.set_refill?"yes":"no"," ")}}function L(e,t){1&e&&l["\u0275\u0275text"](0," Set Customer & Refill ")}var V=function(e,t){return{"text-danger":e,"text-success":t}};function H(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2,"Cash Paid:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",102),l["\u0275\u0275listener"]("focus",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().clearAmountPaid()}))("keydown",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().keyUp(e)}))("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().amount_paid=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4," \xa0| \xa0 "),l["\u0275\u0275elementStart"](5,"b",82),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled","Cash"!=i.payment_method)("ngModel",i.amount_paid),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](4,V,i.amount_paid<i.discounted_total,i.amount_paid>i.discounted_total)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" Change Due: GHC ",(i.amount_paid-i.discounted_total).toFixed(2),"")}}function R(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"button",19),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().showInsurerModal()})),l["\u0275\u0275text"](2,"Enter Insurance Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.customer_name," ")}}function P(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275template"](1,A,2,1,"span",15),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),i=l["\u0275\u0275reference"](53);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.isEmpty(n.customer_name))("ngIfElse",i)}}function B(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2,"Reference/Transaction Id: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",103),l["\u0275\u0275listener"]("keydown",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().keyUp(e)}))("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().momo_reference=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",i.momo_reference)}}function Q(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",32),l["\u0275\u0275elementStart"](1,"div",33),l["\u0275\u0275elementStart"](2,"h4"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",34),l["\u0275\u0275element"](5,"div",104),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",36),l["\u0275\u0275elementStart"](7,"button",37),l["\u0275\u0275text"](8,"Ok"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",n.info_item.product_name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("innerHTML",n.info_item.drug_info,l["\u0275\u0275sanitizeHtml"])}}function z(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h5",105),l["\u0275\u0275text"](1," No cautions/side effects detected. "),l["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"ul"),l["\u0275\u0275elementStart"](4,"li"),l["\u0275\u0275elementStart"](5,"b"),l["\u0275\u0275text"](6,"Side effects: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](7,"br"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"li"),l["\u0275\u0275elementStart"](10,"b"),l["\u0275\u0275text"](11,"Pregnancy: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](12,"br"),l["\u0275\u0275text"](13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"li"),l["\u0275\u0275elementStart"](15,"b"),l["\u0275\u0275text"](16,"Cautions: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](17,"br"),l["\u0275\u0275text"](18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"]("",n.ingredient," (in ",n.product_name," ) "),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",n.side_effect," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",n.pregnancy," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",n.caution," ")}}function J(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h5"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("Quantity for ",n.new_item.name,"")}}function X(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275elementStart"](2,"button",107),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).swap(e)})),l["\u0275\u0275text"](3,"Swap"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"td"),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",i.name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.price," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.unit," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.stock," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.expiry," ")}}function Y(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",32),l["\u0275\u0275elementStart"](1,"div",33),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",34),l["\u0275\u0275elementStart"](4,"table",12),l["\u0275\u0275elementStart"](5,"thead"),l["\u0275\u0275elementStart"](6,"tr"),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Item"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Price"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Unit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"th"),l["\u0275\u0275text"](14,"On Hand"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"th"),l["\u0275\u0275text"](16,"Expiry"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"tbody"),l["\u0275\u0275template"](18,X,13,5,"tr",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",36),l["\u0275\u0275elementStart"](20,"button",106),l["\u0275\u0275text"](21,"Close"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" Similar items to ",n.selected_related.product_name," with closer expiries "),l["\u0275\u0275advance"](16),l["\u0275\u0275property"]("ngForOf",n.selected_related.related)}}function K(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",110),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).toggleRefill(e)})),l["\u0275\u0275element"](1,"input",111),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("checked",-1!=a.refill_items.indexOf(i.product_name)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",i.product_name," ")}}function G(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"label"),l["\u0275\u0275text"](2,"Choose the items to set the reminder for"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",108),l["\u0275\u0275template"](4,K,3,2,"a",109),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngForOf",n.items)}}function W(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"label"),l["\u0275\u0275text"](2,"Refill Date*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",112),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().refill_end_date=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",i.refill_end_date)}}function Z(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1,"No held items"),l["\u0275\u0275elementEnd"]())}var ee=function(e){return{"table-primary":e}};function te(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",117),l["\u0275\u0275listener"]("dblclick",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).unhold(e)}))("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).selectHeldItem(e)})),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=t.index,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](5,ee,r.selectedHeldItem==i)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",a+1," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.user," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.time," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",i.items.length," ")}}function ne(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",n.product_name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",n.quantity," ")}}function ie(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"table",12),l["\u0275\u0275elementStart"](1,"thead"),l["\u0275\u0275elementStart"](2,"tr"),l["\u0275\u0275elementStart"](3,"th"),l["\u0275\u0275text"](4,"Item"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Quantity"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"tbody"),l["\u0275\u0275template"](8,ne,5,2,"tr",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngForOf",n.selectedHeldItem.items)}}function ae(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",2),l["\u0275\u0275elementStart"](1,"div",113),l["\u0275\u0275elementStart"](2,"table",12),l["\u0275\u0275elementStart"](3,"thead"),l["\u0275\u0275elementStart"](4,"tr"),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Saved by"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Num. Items"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"tbody"),l["\u0275\u0275template"](14,te,9,7,"tr",114),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",115),l["\u0275\u0275template"](16,ie,9,1,"table",116),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](14),l["\u0275\u0275property"]("ngForOf",n.held_items),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",null!=n.selectedHeldItem)}}function re(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"b",6),l["\u0275\u0275text"](1," The date since the last sale has changed. Please confirm your shift. "),l["\u0275\u0275elementEnd"]())}function oe(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n)}}function le(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",118),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().setShift()})),l["\u0275\u0275text"](1,"OK"),l["\u0275\u0275elementEnd"]()}}function se(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",118),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.setShift(),e.saveLocalItems()})),l["\u0275\u0275text"](1,"OK"),l["\u0275\u0275elementEnd"]()}}function de(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"a",119),l["\u0275\u0275text"](1,"View End of Day Report"),l["\u0275\u0275elementEnd"]())}var me,ce,ue,he=[{path:"",component:(me=function(){function e(t,n,i,a,r,o){_classCallCheck(this,e),this.dbService=t,this.socket=n,this.notify=i,this.localforage=a,this.authService=r,this.router=o,this.items=[],this.held_items=[],this.new_item=null,this.selectedHeldItem=null,this.new_quantity="",this.sale_total=0,this.amount_paid=0,this.receipt_amount_paid=0,this.receipt_items=[],this.accept_amount=!1,this.invoice_items=[],this.receipt_total=0,this.time="",this.digital_address="",this.ts="",this.payment_method="Cash",this.key_state="none",this.insurer_id=null,this.insurance_member_name=null,this.insurance_member_id=null,this.momo_reference=null,this.creditor_name=null,this.discount=0,this.discounted_total=0,this.receipt_discount=0,this.receipt_discounted_total=0,this.customer_name="",this.shift="",this.shifts=[],this.info_item=null,this.cautions=[],this.set_refill=!1,this.refill_items=[],this.can_view_end_of_day=!0,this.confirm_shift=!1,this.can_give_discount=!0,this.tax=0,this.tax_amount=0,this.print_drug_info=!1,this.related_items=[],this.selected_related=null,this.restrict_zero_stock="no",-1==this.authService.current_user.permissions.indexOf("Create Sales")&&(this.notify.failNotification("You are not permitted to view that page"),this.dbService.goBackHome()),-1==this.authService.current_user.permissions.indexOf("Give Discount")&&(this.can_give_discount=!1),-1==this.authService.current_user.permissions.indexOf("View End Of Day Report")&&(this.can_view_end_of_day=!1),this.company_address=r.current_user.company_address,this.company_phone=r.current_user.company_phone,this.company_name=r.current_user.company_name,this.cashier=r.current_user.display_name,this.digital_address=r.current_user.digital_address,this.dbService.setTitle("New Sales"),this.date=this.dbService.getToday()}return _createClass(e,[{key:"keyEvent",value:function(e){if(e.ctrlKey&&13==e.keyCode||35==e.keyCode)switch(console.log(this.payment_method),this.payment_method){case"Cash":0==this.amount_paid||null==this.amount_paid?(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"})):this.saveLocalItems();break;case"Mobile Money":console.log(this.momo_reference),null==this.momo_reference||null==this.momo_reference||""==this.momo_reference.trim()?this.alertMomo():this.saveLocalItems();break;case"Credit":null==this.creditor_name||null==this.creditor_name||""==this.creditor_name.trim()?this.alertCredit():this.saveLocalItems()}else if("Home"==e.code)this.ts=this.dbService.getToday("timestamp_string");else if(27==e.keyCode)switch(this.key_state){case"item_quantity":this.rejectItem();break;case"alert_change":$("#sale_confirm_modal").modal("hide");break;case"held_items":$("#held_items_modal").modal("hide");break;case"discount_modal":$("#discount_modal").modal("hide")}else if(13==e.keyCode)switch(this.key_state){case"alert_change":this.acceptAmount(),this.key_state="";break;case"show_change":this.finishSale(),this.key_state="";break;case"held_items":this.unholdSelected(),this.key_state=""}else if(40==e.keyCode)switch(this.key_state){case"held_items":var t,n=this.held_items.indexOf(this.selectedHeldItem);t=n==this.held_items.length-1?0:n+1,this.selectedHeldItem=this.held_items[t]}else if(38==e.keyCode)switch(this.key_state){case"held_items":var i,a=this.held_items.indexOf(this.selectedHeldItem),r=this.held_items.length-1;i=0==a?r:a-1,this.selectedHeldItem=this.held_items[i]}}},{key:"ngOnInit",value:function(){this.ts=this.dbService.getToday(),this.held_items=JSON.parse(localStorage.getItem("heldItems")),null==this.held_items&&(this.held_items=[]),this.getShifts(),$("#sales_search").focus(),this.getCustomers(),this.getTax(),this.getRestrictZeroStock()}},{key:"getCustomers",value:function(){var e=this;this.dbService.getData("customer/getList",this.authService.current_user).subscribe((function(t){"1"==t.status&&(e.customer_objects=t.data)}),(function(t){e.notify.failNotification("Unable to get customers. Check connection")}))}},{key:"getShifts",value:function(){var e=this;this.dbService.getData("admin/getSetting?setting=number_of_shifts",this.authService.current_user).subscribe((function(t){if("1"==t.status){for(var n=t.data.split(","),i=0;i<n.length;i++)e.shifts.push("".concat(n[i]));var a=sessionStorage.getItem("shift");e.dbService.isEmpty(a)?(e.shift=e.shifts[0],sessionStorage.setItem("shift",e.shift),$("#select_shift_modal").modal({keyboard:!1,backdrop:"static"})):e.shift=a}}),(function(t){e.notify.failNotification("Unable to get shifts. Check connection")}))}},{key:"setShift",value:function(){$("#select_shift_modal").modal("hide"),sessionStorage.setItem("shift",this.shift),$("#shift").tooltip({title:"You can change your shift here any time"}),$("#shift").tooltip("show"),setTimeout((function(){$("#shift").tooltip("hide")}),3e3)}},{key:"shiftChanged",value:function(){sessionStorage.setItem("shift",this.shift)}},{key:"productSelected",value:function(e){if(this.new_item=e,this.new_item.stock=e.stock,"number"!=typeof e.price)return this.notify.failNotification("Price not defined."),!1;if("yes"==this.restrict_zero_stock&&e.stock<=0)return alert("Items with zero or less stock cannot be sold. Please contact your manager"),!1;for(var t=!1,n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}if(t)return this.notify.failNotification("Item is already in the list"),!1;this.showQuantityModal(),this.getProductBatches()}},{key:"showQuantityModal",value:function(){this.key_state="item_quantity",$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#new_quantity").focus()}))}},{key:"getItemStock",value:function(){var e=this,t=this.new_item.id;this.dbService.getData("product/getStock?id="+this.new_item.id,this.authService.current_user).subscribe((function(n){if("1"==n.status){e.new_item.stock=n.data;for(var i=0;i<e.items.length;i++)if(e.items[i].product_id==t){e.items[i].stock=n.data;break}}}),(function(t){e.new_item.stock=0,e.notify.failNotification("Unable to get stock. Check connection")}))}},{key:"getRelatedItems",value:function(){var e=this,t=this.new_item.id;this.dbService.getData("product/getRelatedProducts?id="+this.new_item.id,this.authService.current_user).subscribe((function(n){if("1"==n.status){e.new_item.related=n.data;for(var i=0;i<e.items.length;i++)if(e.items[i].product_id==t){e.items[i].related=n.data;for(var a=0;a<n.data.length;a++)n.data[a].expiring_earlier&&(e.items[i].is_swappable=!0);break}}}),(function(t){e.new_item.stock=0,e.notify.failNotification("Unable to get stock. Check connection")}))}},{key:"getProductBatches",value:function(){var e=this;this.dbService.getData("product/getProductBatches?id="+this.new_item.id,this.authService.current_user).subscribe((function(t){"1"==t.status&&(e.new_item.batches=[],null!=t.data&&t.data.map((function(t){e.new_item.batches.push({batch_number:t.batch_number,expiry:t.expiry,quantity:"",remaining:t.quantity-t.quantity_sold})})))}),(function(t){e.new_item.stock=0,e.notify.failNotification("Unable to get stock. Check connection")}))}},{key:"setCautions",value:function(){}},{key:"showRelated",value:function(e){this.selected_related=e,$("#related_items_modal").modal("show")}},{key:"swap",value:function(e){for(var t=!1,n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}if(t)return this.notify.failNotification("Item is already in the list"),!1;this.items.splice(this.items.indexOf(this.selected_related),1),this.getTotal(),$("#related_items_modal").modal("hide"),this.productSelected(e)}},{key:"getActiveIngredients",value:function(){var e=this;this.dbService.getData("product/getActiveIngredients?id="+this.new_item.id,this.authService.current_user).subscribe((function(t){if("1"==t.status){e.new_item.active_ingredients=t.data;for(var n=0;n<e.items.length;n++)if(e.items[n].product_id==t.id){e.items[n].active_ingredients=t.data;break}}}),(function(t){e.new_item.stock=0,e.notify.failNotification("Unable to get active ingredients. Check connection")}))}},{key:"acceptItem",value:function(){if(isNaN(this.new_quantity))return alert("Only numbers allowed for quantity"),!1;var e=new r.a;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.price=this.new_item.price,e.unit=this.new_item.unit,e.cost_price=this.new_item.cost_price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_item.price,e.stock=this.new_item.stock,e.product=this.new_item,e.expired=this.new_item.expired,e.expiry=this.new_item.expiry,e.active_ingredients=this.new_item.active_ingredients,e.drug_info=this.new_item.drug_info,e.batches=this.new_item.batches,e.related=[],this.items.push(e),this.getTotal(),this.setCautions(),$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string"),this.getRelatedItems()}},{key:"rejectItem",value:function(){$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string")}},{key:"getTotal",value:function(){var e=0;this.items.map((function(t){e+=t.quantity*t.price})),this.sale_total=e,this.receipt_total=e,this.tax_amount=this.tax/100*this.sale_total,this.discounted_total=e+this.tax_amount-this.discount,this.receipt_discount=this.discount-0,this.receipt_discounted_total=e+this.tax_amount-this.discount}},{key:"removeItem",value:function(e){this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.setCautions(),this.ts=this.dbService.getToday("timestamp_string")}},{key:"editItem",value:function(e){this.new_item=e.product,this.new_item.batches=e.batches,this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.setCautions(),this.new_item=e.product,this.new_quantity=e.quantity,$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}},{key:"showInsurerModal",value:function(){$("#insurance_modal").modal({backdrop:"static",keyboard:!1})}},{key:"showCustomerModal",value:function(){$("#customer_modal").modal({backdrop:"static",keyboard:!1})}},{key:"showInfo",value:function(e){this.info_item=e,$("#drug_info_modal").modal("show")}},{key:"hasDrugInfo",value:function(e){return!this.dbService.isEmpty(e.drug_info)}},{key:"alertMomo",value:function(){return $("#momo_reference").focus(),$("#momo_reference").tooltip({title:"Enter the reference/transaction number"}),!1}},{key:"alertCredit",value:function(){return $("#creditor_name").focus(),$("#creditor_name").tooltip({title:"Enter the customer name or number"}),!1}},{key:"setInsurer",value:function(e){this.insurer_id=e.name}},{key:"setQuantities",value:function(){var e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}},{key:"alert",value:function(){this.key_state="alert_change",$("#sale_confirm_modal").modal({backdrop:"static",keyboard:!1})}},{key:"acceptAmount",value:function(){this.accept_amount=!0,this.saveLocalItems()}},{key:"saveLocalItems",value:function(){var e=this,t=sessionStorage.getItem("last_sale_date");if(null!=t&&t!=this.dbService.getToday())return this.confirm_shift=!0,$("#select_shift_modal").modal({backdrop:"static",keyboard:!1}),sessionStorage.setItem("last_sale_date",this.dbService.getToday()),!1;if("Insurance"==this.payment_method&&(this.dbService.isEmpty(this.insurer_id)||this.dbService.isEmpty(this.insurance_member_name)||this.dbService.isEmpty(this.insurance_member_name)))return this.showInsurerModal(),!1;if(-1!=["Cheque","Mobile Money","Other","POS"].indexOf(this.payment_method)&&this.dbService.isEmpty(this.momo_reference))return this.alertMomo(),!1;if("Credit"==this.payment_method&&(this.dbService.isEmpty(this.customer_name)||this.dbService.isEmpty(this.customer_phone)))return alert("The customer details are required for credit sales. Please click the blue 'Enter Customer Details' to enter customer phone and name."),!1;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(this.amount_paid<this.discounted_total&&"Cash"==this.payment_method)return this.notify.failNotification("Amount was less than total amount of sale"),!1;if(isNaN(this.amount_paid)&&"Cash"==this.payment_method)return alert("Only numbers allowed for amount paid"),!1;sessionStorage.setItem("last_sale_date",this.dbService.getToday()),this.notify.showLoading(),this.receipt_items=[];for(var n=0;n<this.items.length;n++)this.receipt_items.push(this.items[n]);this.accept_amount=!1,"Cash"!=this.payment_method?(this.receipt_amount_paid=this.receipt_discounted_total,this.amount_paid=this.receipt_discounted_total):this.receipt_amount_paid=this.amount_paid;var i=[],a=[],r=[],o=[],l=[];this.ts=this.dbService.getToday("timestamp_string"),this.time=this.dbService.getToday("timestamp"),console.log(this.time);for(var s=0;s<this.items.length;s++){var d=this.items[s];i.push(d.product_id),a.push(d.price),r.push(d.quantity),o.push(d.product_name),l.push(d.cost_price)}var m=new FormData;m.append("products",i.join("||")),m.append("prices",a.join("||")),m.append("cost_prices",l.join("||")),m.append("quantities",r.join("||")),m.append("product_names",o.join("||")),m.append("amount_paid",this.amount_paid.toString()),m.append("discount",this.discount.toString()),m.append("created_by",this.authService.current_user.id),m.append("date",this.dbService.getToday()),m.append("created_on",this.dbService.getToday("timestamp")),m.append("display_name",this.authService.current_user.display_name),m.append("payment_method",this.payment_method),m.append("shift",this.shift),"Insurance"==this.payment_method&&(m.append("insurance_provider",this.insurer_id),m.append("insurance_member_name",this.insurance_member_name),m.append("insurance_member_id",this.insurance_member_id)),-1!=["Cheque","Mobile Money","Other","POS"].indexOf(this.payment_method)&&m.append("momo_reference",this.momo_reference),"Credit"===this.payment_method&&m.append("creditor_name",this.creditor_name),m.append("customer_phone",this.customer_phone),m.append("customer_name",this.customer_name),m.append("customer",this.customer_id),m.append("tax",this.tax.toString()),this.dbService.postData(m,"sale/saveBulk",this.authService.current_user).subscribe((function(t){if(e.notify.hideLoading(),"0"===t.status)e.notify.failNotification("Unable to authenticate. Please login again");else if("-1"===t.status)alert("Server error. Please try again` ");else if("-9"===t.status)e.notify.showNotification("You are not permitted to perform this action","fail",3e3);else{if(e.selected_code=t.code,localStorage.setItem("receipt_total",JSON.stringify(e.sale_total)),e.notify.hideLoading(),e.notify.successNotification("Sales synced successfully"),e.amount_paid>e.sale_total)return $("#change_modal").modal({backdrop:"static",keyboard:!1}),$("#change_modal").on("shown.bs.modal",(function(){$("#finish_sale_btn").focus()})),!1;e.finishSale()}}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification(),console.log(t)}))}},{key:"increment",value:function(e){null!=e&&null!=e?(e.quantity=(parseFloat(e.quantity)+1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),this.new_quantity++,$("#new_quantity").focus(),this.focusCursor())}},{key:"decrement",value:function(e){null!=e&&null!=e?parseFloat(e.quantity)>1&&(e.quantity=(parseFloat(e.quantity)-1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),parseFloat(this.new_quantity)>1&&this.new_quantity--,$("#new_quantity").focus(),this.focusCursor())}},{key:"keyChangeQuantity",value:function(e){40==e.keyCode?this.decrement():38==e.keyCode&&this.increment(),this.focusCursor()}},{key:"closeHeld",value:function(){$("#held_items_modal").modal("hide"),this.key_state=""}},{key:"finishSale",value:function(){var e=this;this.set_refill&&this.saveRefill(),this.amount_paid=0,this.insurance_member_id="",this.insurance_member_name="",this.momo_reference="",this.discount=0,this._discount=null,this.discounted_total=0,this.customer_name="",this.customer_phone="",this.refill_end_date="",this.set_refill=!1,this.notify.showLoading();var t=this;setTimeout((function(){t.notify.hideLoading(),t.print(),e.ts=e.dbService.getToday("timestamp_string"),e.payment_method="Cash",t.items=[],t.getTotal()}),100)}},{key:"cancel",value:function(){this.items=[],this.amount_paid=0,this.getTotal(),this.setCautions()}},{key:"isEmpty",value:function(e){return this.dbService.isEmpty(e)}},{key:"goBack",value:function(){window.history.back()}},{key:"keyUp",value:function(e){switch(e.keyCode){case 13:this.saveLocalItems()}}},{key:"print",value:function(){var e,t,n=0;this.receipt_items.map((function(e){n+=e.quantity*e.product.price})),this.receipt_total=n,e=document.getElementById("invoice").innerHTML,(t=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),t.document.write('\n          <html>\n            <head>\n              <title>Invoice</title>\n              <style>\n              body{\n                font-size: 13px;\n              }\n              #invoice { page-break-after: always; }\n    #invoice:last-child { page-break-after: avoid; }\n\n\n    table{\n        width: 100%;\n        border: 1px solid #e9ecef;\n        font-size: 13px !important;\n    }\n\n    .small-margin{\n      margin-bottom: 10px;\n    }\n\n    .table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}\n           .center{\n             text-align:center\n           }\n           .text-left{text-align:left!important}.text-right{text-align:right!important; float:right}\n           .text-center{text-align:center!important}\n           @media (min-width:576px){.text-sm-left{text-align:left!important}\n           .text-sm-right{text-align:right!important}\n           .text-sm-center{text-align:center!important}}\n           @media (min-width:768px){.text-md-left{text-align:left!important}\n           .text-md-right{text-align:right!important}\n           .text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}\n\n           .row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}\n              </style>\n            </head>\n        <body onload="window.print();"><div id="invoice">'.concat(e,"</div> \n        <script>\n           window.onafterprint = function(){\n            window.close();\n          }\n           <\/script>\n           </body>\n          </html>")),t.document.close(),this.ts=this.dbService.getToday("timestamp_string")}},{key:"holdItems",value:function(){var e=new o;e.items=this.items,e.user=this.authService.current_user.display_name,e.time=this.dbService.getToday("timestamp"),this.held_items.push(e),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),this.items=[],this.getTotal(),this.setCautions(),this.ts=this.dbService.getToday("timestamp_string")}},{key:"viewHeldItems",value:function(){$("#held_items_modal").modal({backdrop:"static",keyboard:!1}),this.held_items.length>0&&(this.selectedHeldItem=this.held_items[0]),this.key_state="held_items"}},{key:"selectHeldItem",value:function(e){this.selectedHeldItem=e}},{key:"unhold",value:function(e){this.items=e.items,this.held_items.splice(this.held_items.indexOf(e),1),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),$("#held_items_modal").modal("hide"),this.key_state="",this.getTotal(),this.setCautions()}},{key:"deleteHeldItem",value:function(){this.held_items.splice(this.held_items.indexOf(this.selectedHeldItem),1),this.selectedHeldItem=null,localStorage.setItem("heldItems",JSON.stringify(this.held_items))}},{key:"unholdSelected",value:function(){this.unhold(this.selectedHeldItem),this.key_state=""}},{key:"clearHeldItems",value:function(){localStorage.removeItem("heldItems"),this.selectedHeldItem=null,this.held_items=[],$("#held_items_modal").modal("hide"),this.key_state=""}},{key:"productAdded",value:function(e){}},{key:"clearAmountPaid",value:function(){0!=this.amount_paid&&null!=this.amount_paid||(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"}))}},{key:"ngOnDestroy",value:function(){this.items.length>0&&(this.holdItems(),this.notify.successNotification("Receipt held automatically"))}},{key:"focusCursor",value:function(){var e=$("#new_quantity").val();$("#new_quantity").val("").val(e)}},{key:"applyDiscount",value:function(){$("#discount_modal").modal({backdrop:"static",keyboard:!1}),$("#discount_modal").on("shown.bs.modal",(function(){$("#_discount").focus()})),this.key_state="discount_modal"}},{key:"acceptDiscount",value:function(){$("#discount_modal").modal("hide"),this.discount=this._discount,this.getTotal(),this.key_state=""}},{key:"rejectDiscount",value:function(){$("#discount_modal").modal("hide"),this._discount=null}},{key:"removeDiscount",value:function(){this.discount=0,this.getTotal()}},{key:"search",value:function(){var e=this;""==this.customer_name?this.getCustomers():this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.customer_name).subscribe((function(t){"-1"===t.status||(e.customer_objects=t.data)}),(function(e){}))}},{key:"searchCustomers",value:function(){var e=this;""!=this.customer_name.trim()&&null!=this.customer_name&&null!=this.customer_name?this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.customer_name+"&limit=10").subscribe((function(t){"-1"===t.status||(e.customer_objects=t.data)}),(function(e){})):this.customer_objects=[]}},{key:"getCustomerPhone",value:function(){for(var e=0;e<this.customer_objects.length;e++){var t=this.customer_objects[e];if(t.name.trim().toLowerCase()==this.customer_name.trim().toLowerCase()){this.customer_phone=t.phone;break}}}},{key:"addItemToRefill",value:function(e){this.refill_items.push(e.product_name)}},{key:"removeFromRefill",value:function(e){this.refill_items.splice(this.refill_items.indexOf(e.product_name))}},{key:"toggleRefill",value:function(e){-1==this.refill_items.indexOf(e.product_name)?this.addItemToRefill(e):this.removeFromRefill(e)}},{key:"saveRefill",value:function(){var e=this;if(null==this.customer_name||null==this.customer_name)return this.notify.failNotification("The customer details are required for the refill"),!1;$("#add_refill_modal").modal("hide"),this.notify.showLoading();var t=new FormData;t.append("customer_name",this.customer_name),t.append("customer_phone",this.customer_phone),t.append("product",this.refill_items.join(";")),t.append("start_date",this.dbService.getToday()),t.append("end_date",this.refill_end_date),t.append("quantity","1"),this.dbService.postData(t,"customer/addRefill",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Server error. Please check that you filled the form correctly and try again"):"0"===t.status?e.notify.failNotification("Unable to authenticate. Login and try again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):e.notify.successNotification("Refill saved successfully")}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification()}))}},{key:"incrementBatchQuantity",value:function(e){console.log(e);var t=this.new_item.batches[this.new_item.batches.indexOf(e)];t.quantity=parseInt(t.quantity)+1}},{key:"decrementBatchQuantity",value:function(e){console.log(e),e.quantity-=1}},{key:"setQuantity",value:function(){var e=this;this.new_quantity=0,this.new_item.batches.map((function(t){isNaN(t.quantity)||e.dbService.isEmpty(t.quantity)||(e.new_quantity+=parseFloat(t.quantity))}))}},{key:"getRestrictZeroStock",value:function(){var e=this;this.dbService.getData("admin/getSetting?setting=restrict_zero_stock_sales",this.authService.current_user).subscribe((function(t){"1"==t.status&&(e.restrict_zero_stock=t.data)}),(function(e){}))}},{key:"endShiftDone",value:function(e){$("#new_sales_end_shift_modal").modal("hide"),$("#shift_ended_modal").modal("show")}},{key:"setCustomer",value:function(e){this.customer_name=e.name,this.customer_phone=e.phone,this.customer_id=e.id}},{key:"getTax",value:function(){var e=this;this.dbService.getData("admin/getSetting?setting=tax",this.authService.current_user).subscribe((function(t){e.tax=t.data}),(function(e){}))}}]),e}(),me.\u0275fac=function(e){return new(e||me)(l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](a.c))},me.\u0275cmp=l["\u0275\u0275defineComponent"]({type:me,selectors:[["app-new-sale"]],hostBindings:function(e,t){1&e&&l["\u0275\u0275listener"]("keydown",(function(e){return t.keyEvent(e)}),!1,l["\u0275\u0275resolveWindow"])},decls:268,vars:55,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"timestamp","type","onAdd"],[1,"text-danger"],["id","shift","name","shift",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#new_sales_end_shift_modal",1,"btn","btn-danger","btn-sm"],[1,"col-12"],[1,"card","card-body","table-responsive","sales_items"],[1,"table","table-striped","table-bordered","table-hover"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"padding-10"],[4,"ngIf","ngIfElse"],["no_discount",""],[1,""],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-user"],["default_customer_btn_text",""],["name","payment_method","id","payment_method",3,"ngModel","ngModelChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],["id","drug_info_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog"],["class","modal-content",4,"ngIf"],["id","cautions_modal","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],["class","text-muted",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-success"],["id","sale_confirm_modal","tabindex","-1","role","dialog",1,"modal","fade"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[4,"ngIf"],["autocomplete","off","required","","id","new_quantity","name","new_quantity",3,"ngModel","keyup","ngModelChange"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-danger",3,"click"],["id","discount_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],["autocomplete","off","required","","id","_discount","name","_discount",3,"ngModel","ngModelChange"],["id","change_modal","tabindex","-1","role","dialog",1,"modal","fade"],["id","finish_sale_btn","type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["id","related_items_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],["id","customer_modal","tabindex","-1","role","dialog",1,"modal","fade"],[3,"type","onFinish"],["name","set_refill","type","checkbox",3,"ngModel","ngModelChange"],["type","submit","data-dismiss","modal",1,"btn","btn-success"],["id","insurance_modal","tabindex","-1","role","dialog",1,"modal","fade"],[3,"onFinish"],["type","text","name","insurance_member_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","insurance_member_id",1,"form-control",3,"ngModel","ngModelChange"],["id","held_items_modal","tabindex","-1","role","dialog",1,"modal","fade"],["class","row ",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["id","select_shift_modal","tabindex","-1","role","dialog",1,"modal","fade"],["class","text-danger",4,"ngIf"],["name","shift",3,"ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["id","add_new_product_modal","tabindex","-1","role","dialog",1,"modal"],["id","new_sales_end_shift_modal","tabindex","-1","role","dialog",1,"modal","fade"],[3,"shift","date","onFinish"],["id","shift_ended_modal","tabindex","-1","role","dialog",1,"modal","fade"],["data-dismiss","modal","routerLink","/logout",1,"btn","btn-warning"],["data-dismiss","modal","class","btn btn-info","routerLink","/sales_reports",4,"ngIf"],["data-dismiss","modal","routerLink","/dashboard",1,"btn","btn-primary"],[3,"time","selected_code","cashier","receipt_items","receipt_total","receipt_discount","receipt_discounted_total","payment_method","receipt_amount_paid","tax","tax_amount"],[3,"ngClass"],["title","Item expired",1,"fa","fa-calendar"],["title","Related products with closer expiries","class","btn btn-xs btn-warning",3,"click",4,"ngIf"],["class","btn btn-xs btn-warning",3,"click",4,"ngIf"],["title","custom quantity",1,"btn","btn-info","btn-sm",3,"click"],["title","increase quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","decrease quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","The quantity entered is more than the current stock","class","text-danger fa fa-exclamation-triangle",4,"ngIf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-remove"],["title","Related products with closer expiries",1,"btn","btn-xs","btn-warning",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-xs","btn-warning",3,"click"],[1,"fa","fa-info"],["title","The quantity entered is more than the current stock",1,"text-danger","fa","fa-exclamation-triangle"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["title","You are not permitted to give discounts",1,"text-muted"],[1,"fa","fa-lock"],["id","amount_paid","size","10","autocomplete","off","type","text","name","amount_paid","value","0",3,"disabled","ngModel","focus","keydown","ngModelChange"],["id","momo_reference","type","text","name","momo_reference",3,"ngModel","keydown","ngModelChange"],[3,"innerHTML"],[1,"text-muted"],["type","button","data-dismiss","modal",1,"btn","btn-warning"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],["type","checkbox",3,"checked"],["name","refill_end_date","type","date",3,"ngModel","ngModelChange"],[1,"col-7","fixed_height"],[3,"ngClass","dblclick","click",4,"ngFor","ngForOf"],[1,"col-5","fixed_height"],["class","table table-striped table-bordered table-hover",4,"ngIf"],[3,"ngClass","dblclick","click"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","routerLink","/sales_reports",1,"btn","btn-info"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"section",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"h4"),l["\u0275\u0275text"](5,"New Sales Receipt"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",4),l["\u0275\u0275elementStart"](7,"app-select-product",5),l["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275text"](9," \xa0 "),l["\u0275\u0275elementStart"](10,"label",6),l["\u0275\u0275text"](11,"Shift:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"select",7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.shift=e})),l["\u0275\u0275template"](13,E,2,1,"option",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"button",9),l["\u0275\u0275text"](15," End Shift"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",2),l["\u0275\u0275elementStart"](17,"div",10),l["\u0275\u0275elementStart"](18,"div",11),l["\u0275\u0275elementStart"](19,"table",12),l["\u0275\u0275elementStart"](20,"thead"),l["\u0275\u0275elementStart"](21,"tr"),l["\u0275\u0275elementStart"](22,"th"),l["\u0275\u0275text"](23,"Product"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"th"),l["\u0275\u0275text"](25,"Quantity"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"th"),l["\u0275\u0275text"](27,"Unit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"th"),l["\u0275\u0275text"](29,"Price"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"th"),l["\u0275\u0275text"](31,"Total"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"th"),l["\u0275\u0275text"](33,"On-hand"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](34,"th"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"tbody"),l["\u0275\u0275template"](36,j,31,17,"tr",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](37,"div",14),l["\u0275\u0275elementStart"](38,"div"),l["\u0275\u0275text"](39),l["\u0275\u0275template"](40,N,3,2,"span",15),l["\u0275\u0275template"](41,D,3,0,"ng-template",null,16,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementStart"](43,"span",17),l["\u0275\u0275elementStart"](44,"button",18),l["\u0275\u0275listener"]("click",(function(){return t.holdItems()})),l["\u0275\u0275text"](45,"Hold"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](46,"button",19),l["\u0275\u0275listener"]("click",(function(){return t.viewHeldItems()})),l["\u0275\u0275text"](47),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](48," \xa0 "),l["\u0275\u0275elementStart"](49,"button",19),l["\u0275\u0275listener"]("click",(function(){return t.showCustomerModal()})),l["\u0275\u0275element"](50,"i",20),l["\u0275\u0275template"](51,F,4,2,"span",15),l["\u0275\u0275template"](52,L,1,0,"ng-template",null,21,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](54,"div",17),l["\u0275\u0275elementStart"](55,"b"),l["\u0275\u0275text"](56),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](57," | "),l["\u0275\u0275elementStart"](58,"b"),l["\u0275\u0275text"](59,"Method"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](60,"select",22),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.payment_method=e})),l["\u0275\u0275elementStart"](61,"option"),l["\u0275\u0275text"](62,"Cash"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](63,"option"),l["\u0275\u0275text"](64,"Mobile Money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](65,"option"),l["\u0275\u0275text"](66,"Cheque"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](67,"option"),l["\u0275\u0275text"](68,"POS"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](69,"option"),l["\u0275\u0275text"](70,"Credit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](71,"option"),l["\u0275\u0275text"](72,"Insurance"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](73,"option"),l["\u0275\u0275text"](74,"Other"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](75," \xa0| "),l["\u0275\u0275elementStart"](76,"span",23),l["\u0275\u0275template"](77,H,7,7,"span",24),l["\u0275\u0275template"](78,R,3,0,"span",24),l["\u0275\u0275template"](79,P,2,2,"span",24),l["\u0275\u0275template"](80,B,4,1,"span",25),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](81,"span",17),l["\u0275\u0275elementStart"](82,"button",26),l["\u0275\u0275listener"]("click",(function(){return t.cancel()})),l["\u0275\u0275text"](83,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](84,"button",27),l["\u0275\u0275listener"]("click",(function(){return t.saveLocalItems()})),l["\u0275\u0275text"](85,"Save"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](86,"div",28),l["\u0275\u0275elementStart"](87,"div",29),l["\u0275\u0275template"](88,Q,9,2,"div",30),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](89,"div",31),l["\u0275\u0275elementStart"](90,"div",29),l["\u0275\u0275elementStart"](91,"div",32),l["\u0275\u0275elementStart"](92,"div",33),l["\u0275\u0275elementStart"](93,"h4"),l["\u0275\u0275text"](94,"Cautions "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](95,"div",34),l["\u0275\u0275template"](96,z,2,0,"h5",35),l["\u0275\u0275template"](97,U,19,5,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](98,"div",36),l["\u0275\u0275elementStart"](99,"button",37),l["\u0275\u0275text"](100,"Ok"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](101,"div",38),l["\u0275\u0275elementStart"](102,"div",29),l["\u0275\u0275elementStart"](103,"div",32),l["\u0275\u0275elementStart"](104,"div",34),l["\u0275\u0275elementStart"](105,"h5"),l["\u0275\u0275text"](106,"The amount paid is less than the total cost. Continue?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](107,"div",36),l["\u0275\u0275elementStart"](108,"button",39),l["\u0275\u0275listener"]("click",(function(){return t.acceptAmount()})),l["\u0275\u0275text"](109,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](110,"button",40),l["\u0275\u0275text"](111,"Reject"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](112,"div",41),l["\u0275\u0275elementStart"](113,"div",29),l["\u0275\u0275elementStart"](114,"div",32),l["\u0275\u0275elementStart"](115,"form",42,43),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptItem()})),l["\u0275\u0275elementStart"](117,"div",34),l["\u0275\u0275template"](118,J,2,1,"h5",44),l["\u0275\u0275elementStart"](119,"input",45),l["\u0275\u0275listener"]("keyup",(function(e){return t.keyChangeQuantity(e)}))("ngModelChange",(function(e){return t.new_quantity=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](120,"br"),l["\u0275\u0275elementStart"](121,"button",46),l["\u0275\u0275listener"]("click",(function(){return t.increment()})),l["\u0275\u0275text"](122,"+1"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](123,"button",47),l["\u0275\u0275listener"]("click",(function(){return t.decrement()})),l["\u0275\u0275text"](124,"-1"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](125,"div",36),l["\u0275\u0275elementStart"](126,"button",48),l["\u0275\u0275text"](127,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](128,"button",49),l["\u0275\u0275listener"]("click",(function(){return t.rejectItem()})),l["\u0275\u0275text"](129,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](130,"div",50),l["\u0275\u0275elementStart"](131,"div",51),l["\u0275\u0275elementStart"](132,"div",32),l["\u0275\u0275elementStart"](133,"form",42,43),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptDiscount()})),l["\u0275\u0275elementStart"](135,"div",34),l["\u0275\u0275elementStart"](136,"h5"),l["\u0275\u0275text"](137,"Enter Discount Amount:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](138,"input",52),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t._discount=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](139,"div",36),l["\u0275\u0275elementStart"](140,"button",48),l["\u0275\u0275text"](141,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](142,"button",49),l["\u0275\u0275listener"]("click",(function(){return t.rejectDiscount()})),l["\u0275\u0275text"](143,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](144,"div",53),l["\u0275\u0275elementStart"](145,"div",29),l["\u0275\u0275elementStart"](146,"div",32),l["\u0275\u0275elementStart"](147,"div",34),l["\u0275\u0275elementStart"](148,"h5"),l["\u0275\u0275text"](149),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](150,"div",36),l["\u0275\u0275elementStart"](151,"button",54),l["\u0275\u0275listener"]("click",(function(){return t.finishSale()})),l["\u0275\u0275text"](152,"OK"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](153,"div",55),l["\u0275\u0275elementStart"](154,"div",56),l["\u0275\u0275template"](155,Y,22,2,"div",30),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](156,"div",57),l["\u0275\u0275elementStart"](157,"div",29),l["\u0275\u0275elementStart"](158,"div",32),l["\u0275\u0275elementStart"](159,"div",33),l["\u0275\u0275elementStart"](160,"h5"),l["\u0275\u0275text"](161,"Customer Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](162,"div",34),l["\u0275\u0275elementStart"](163,"form",42),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.finishSale()})),l["\u0275\u0275elementStart"](164,"div"),l["\u0275\u0275elementStart"](165,"label"),l["\u0275\u0275text"](166,"Customer"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](167,"app-select-customer",58),l["\u0275\u0275listener"]("onFinish",(function(e){return t.setCustomer(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](168,"div"),l["\u0275\u0275elementStart"](169,"label"),l["\u0275\u0275elementStart"](170,"input",59),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.set_refill=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](171," Set Refill?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](172,G,5,1,"div",44),l["\u0275\u0275template"](173,W,4,1,"div",44),l["\u0275\u0275elementStart"](174,"button",60),l["\u0275\u0275text"](175,"OK"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](176,"button",40),l["\u0275\u0275text"](177,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](178,"div",36),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](179,"div",61),l["\u0275\u0275elementStart"](180,"div",29),l["\u0275\u0275elementStart"](181,"div",32),l["\u0275\u0275elementStart"](182,"div",33),l["\u0275\u0275elementStart"](183,"h5"),l["\u0275\u0275text"](184,"Insurance Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](185,"div",34),l["\u0275\u0275elementStart"](186,"form",42),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.finishSale()})),l["\u0275\u0275elementStart"](187,"div"),l["\u0275\u0275elementStart"](188,"label"),l["\u0275\u0275text"](189,"Insurance provider"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](190,"app-select-insurer",62),l["\u0275\u0275listener"]("onFinish",(function(e){return t.setInsurer(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](191,"div"),l["\u0275\u0275elementStart"](192,"label"),l["\u0275\u0275text"](193,"Member Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](194,"input",63),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](195,"div"),l["\u0275\u0275elementStart"](196,"label"),l["\u0275\u0275text"](197,"Member Id Number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](198,"input",64),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_id=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](199,"button",60),l["\u0275\u0275text"](200,"OK"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](201,"button",40),l["\u0275\u0275text"](202,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](203,"div",36),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](204,"div",65),l["\u0275\u0275elementStart"](205,"div",56),l["\u0275\u0275elementStart"](206,"div",32),l["\u0275\u0275elementStart"](207,"div",33),l["\u0275\u0275text"](208," Held Items "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](209,"div",34),l["\u0275\u0275template"](210,Z,2,0,"span",44),l["\u0275\u0275template"](211,ae,17,2,"div",66),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](212,"div",36),l["\u0275\u0275elementStart"](213,"button",67),l["\u0275\u0275listener"]("click",(function(){return t.unholdSelected()})),l["\u0275\u0275text"](214,"Unhold Selected"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](215,"button",68),l["\u0275\u0275listener"]("click",(function(){return t.deleteHeldItem()})),l["\u0275\u0275text"](216,"Delete Selected"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](217,"button",49),l["\u0275\u0275listener"]("click",(function(){return t.clearHeldItems()})),l["\u0275\u0275text"](218,"Delete All"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](219,"button",69),l["\u0275\u0275listener"]("click",(function(){return t.closeHeld()})),l["\u0275\u0275text"](220,"Close"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](221,"div",70),l["\u0275\u0275elementStart"](222,"div",29),l["\u0275\u0275elementStart"](223,"div",32),l["\u0275\u0275elementStart"](224,"div",34),l["\u0275\u0275template"](225,re,2,0,"b",71),l["\u0275\u0275elementStart"](226,"h5"),l["\u0275\u0275text"](227,"Select your shift"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](228,"select",72),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.shift=e})),l["\u0275\u0275template"](229,oe,2,1,"option",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](230,"br"),l["\u0275\u0275elementStart"](231,"em"),l["\u0275\u0275text"](232,"The selected shift will be applied till you logout. You may change it at any time"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](233,"div",36),l["\u0275\u0275template"](234,le,2,0,"button",73),l["\u0275\u0275template"](235,se,2,0,"button",73),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](236,"div",74),l["\u0275\u0275elementStart"](237,"div",56),l["\u0275\u0275elementStart"](238,"div",32),l["\u0275\u0275elementStart"](239,"div",33),l["\u0275\u0275elementStart"](240,"h5"),l["\u0275\u0275text"](241,"Add new product"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](242,"div",34),l["\u0275\u0275elementStart"](243,"app-product-form",62),l["\u0275\u0275listener"]("onFinish",(function(e){return t.productAdded(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](244,"div",36),l["\u0275\u0275elementStart"](245,"button",40),l["\u0275\u0275text"](246,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](247,"div",75),l["\u0275\u0275elementStart"](248,"div",56),l["\u0275\u0275elementStart"](249,"div",32),l["\u0275\u0275elementStart"](250,"div",33),l["\u0275\u0275elementStart"](251,"h5"),l["\u0275\u0275text"](252,"Enter your sales details as indicated"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](253,"div",34),l["\u0275\u0275elementStart"](254,"app-add-daily-record",76),l["\u0275\u0275listener"]("onFinish",(function(e){return t.endShiftDone(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](255,"div",77),l["\u0275\u0275elementStart"](256,"div",56),l["\u0275\u0275elementStart"](257,"div",32),l["\u0275\u0275elementStart"](258,"div",33),l["\u0275\u0275elementStart"](259,"h5"),l["\u0275\u0275text"](260,"What would you like to do next?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](261,"div",34),l["\u0275\u0275elementStart"](262,"a",78),l["\u0275\u0275text"](263,"Logout"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](264,de,2,0,"a",79),l["\u0275\u0275elementStart"](265,"a",80),l["\u0275\u0275text"](266,"Go to the dashboard"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](267,"app-sales-invoice",81)),2&e){var n=l["\u0275\u0275reference"](42),i=l["\u0275\u0275reference"](53);l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("timestamp",t.ts)("type","search"),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.shift),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.shifts),l["\u0275\u0275advance"](23),l["\u0275\u0275property"]("ngForOf",t.items),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate3"](" Sub Total: GHC ",t.sale_total.toFixed(2)," | ",t.tax,"% tax = ",t.tax_amount.toFixed(2)," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.can_give_discount)("ngIfElse",n),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("disabled",t.items.length<1),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("Held Items (",t.held_items.length,")"),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",!t.isEmpty(t.customer_name))("ngIfElse",i),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"]("Amount to be paid: GHC ",t.discounted_total.toFixed(2)," "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.payment_method),l["\u0275\u0275advance"](16),l["\u0275\u0275property"]("ngSwitch",t.payment_method),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","Cash"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","Insurance"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","Credit"),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngIf",null!=t.info_item),l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",t.cautions.length<1),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.cautions),l["\u0275\u0275advance"](21),l["\u0275\u0275property"]("ngIf",null!=t.new_item),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngModel",t.new_quantity),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("ngModel",t._discount),l["\u0275\u0275advance"](11),l["\u0275\u0275textInterpolate1"]("Change due: GHC ",(t.amount_paid-t.sale_total).toFixed(2)," "),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",null!=t.selected_related),l["\u0275\u0275advance"](12),l["\u0275\u0275property"]("type","select"),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",t.set_refill),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.set_refill),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.set_refill),l["\u0275\u0275advance"](21),l["\u0275\u0275property"]("ngModel",t.insurance_member_name),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.insurance_member_id),l["\u0275\u0275advance"](12),l["\u0275\u0275property"]("ngIf",t.held_items.length<1),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.held_items.length>0),l["\u0275\u0275advance"](14),l["\u0275\u0275property"]("ngIf",t.confirm_shift),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",t.shift),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.shifts),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",!t.confirm_shift),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.confirm_shift),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("shift",t.shift)("date",t.date),l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngIf",t.can_view_end_of_day),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("time",t.time)("selected_code",t.selected_code)("cashier",t.cashier)("receipt_items",t.receipt_items)("receipt_total",t.receipt_total)("receipt_discount",t.receipt_discount)("receipt_discounted_total",t.receipt_discounted_total)("payment_method",t.payment_method)("receipt_amount_paid",t.receipt_amount_paid)("tax",t.tax)("tax_amount",t.tax_amount)}},directives:[h.a,f.m,f.e,f.h,i.i,i.j,f.i,f.n,i.k,i.l,i.m,f.f,f.g,f.b,f.l,p.a,f.a,_.a,g.a,S,a.e,x.a,i.h],styles:[""]}),me)}],fe=((ce=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:ce}),ce.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ce)},imports:[[a.f.forChild(he)],a.f]}),ce),pe=n("nEHF"),_e=n("rNAZ"),ge=n("nBlB"),ve=n("NFbv"),be=((ue=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:ue}),ue.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ue)},imports:[[i.b,fe,pe.a,_e.a,ge.a,ve.a]]}),ue)},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("nEHF"),r=n("9EpT"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,r.b]]}),e}()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("nEHF"),r=n("6QD7"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,r.b],r.b]}),e}()}}]);