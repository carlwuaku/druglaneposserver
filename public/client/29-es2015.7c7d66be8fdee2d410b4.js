(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"9EpT":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var i=n("fXoL");const r=["bcElement"],a=n("YsXA");let l=(()=>{class e{constructor(e){this.renderer=e,this.elementType="svg",this.cssClass="barcode",this.format="CODE128",this.lineColor="#000000",this.width=2,this.height=100,this.displayValue=!1,this.fontOptions="",this.font="monospace",this.textAlign="center",this.textPosition="bottom",this.textMargin=2,this.fontSize=20,this.background="#ffffff",this.margin=10,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.value="",this.valid=()=>!0}get options(){return{format:this.format,lineColor:this.lineColor,width:this.width,height:this.height,displayValue:this.displayValue,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:this.valid}}ngOnChanges(){this.createBarcode()}createBarcode(){if(!this.value)return;let e;switch(this.elementType){case"img":e=this.renderer.createElement("img");break;case"canvas":e=this.renderer.createElement("canvas");break;case"svg":default:e=this.renderer.createElement("svg","svg")}a(e,this.value,this.options);for(const t of this.bcElement.nativeElement.childNodes)this.renderer.removeChild(this.bcElement.nativeElement,t);this.renderer.appendChild(this.bcElement.nativeElement,e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.Renderer2))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-barcode6"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275staticViewQuery"](r,!0),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.bcElement=n.first)},inputs:{elementType:["bc-element-type","elementType"],cssClass:["bc-class","cssClass"],format:["bc-format","format"],lineColor:["bc-line-color","lineColor"],width:["bc-width","width"],height:["bc-height","height"],displayValue:["bc-display-value","displayValue"],fontOptions:["bc-font-options","fontOptions"],font:["bc-font","font"],textAlign:["bc-text-align","textAlign"],textPosition:["bc-text-position","textPosition"],textMargin:["bc-text-margin","textMargin"],fontSize:["bc-font-size","fontSize"],background:["bc-background","background"],margin:["bc-margin","margin"],marginTop:["bc-margin-top","marginTop"],marginBottom:["bc-margin-bottom","marginBottom"],marginLeft:["bc-margin-left","marginLeft"],marginRight:["bc-margin-right","marginRight"],value:["bc-value","value"],valid:["bc-valid","valid"]},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["bcElement",""]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",null,0),2&e&&i["\u0275\u0275classMap"](t.cssClass)},encapsulation:2}),e})(),s=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[]]}),e})()},Zitb:function(e,t,n){"use strict";n.r(t),n.d(t,"ReceiveTransfersOfflineModule",(function(){return q}));var i=n("ofXK"),r=n("tyNb"),a=n("fXoL"),l=n("sGMU"),s=n("mS1k"),o=n("n+He"),d=n("5G6A"),c=n("c92J"),m=n("1VJT"),h=n("bgkY"),u=n("ccyI"),p=n("4j6H"),f=n("3Pt+"),g=n("pEcs"),b=n("/9/o");function _(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"td"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"td"),a["\u0275\u0275text"](12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"td"),a["\u0275\u0275text"](14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"td"),a["\u0275\u0275text"](16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"td"),a["\u0275\u0275elementStart"](18,"button",54),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().editItem(n)})),a["\u0275\u0275element"](19,"i",55),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",56),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().removeItem(n)})),a["\u0275\u0275element"](21,"i",57),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.product_name),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.stock," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.quantity," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.unit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.price," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]((e.price*e.quantity).toFixed(2)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.markup," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.selling_price," ")}}function y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"h5"),a["\u0275\u0275text"](1),a["\u0275\u0275element"](2,"br"),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.new_item.name,"")}}function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",58),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275propertyInterpolate"]("value",e),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function S(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"input",59),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().new_unit=t})),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngModel",e.new_unit)}}function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1,"No held items"),a["\u0275\u0275elementEnd"]())}const x=function(e){return{"table-primary":e}};function w(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tr",64),a["\u0275\u0275listener"]("dblclick",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"](2).unhold(n)}))("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"](2).selectHeldItem(n)})),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](5,x,i.selectedHeldItem==e)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",n+1," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.user," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.time," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.items.length," ")}}function k(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.product_name," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",e.quantity," ")}}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"table",12),a["\u0275\u0275elementStart"](1,"thead"),a["\u0275\u0275elementStart"](2,"tr"),a["\u0275\u0275elementStart"](3,"th"),a["\u0275\u0275text"](4,"Item"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"th"),a["\u0275\u0275text"](6,"Quantity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"tbody"),a["\u0275\u0275template"](8,k,5,2,"tr",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngForOf",e.selectedHeldItem.items)}}function C(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",2),a["\u0275\u0275elementStart"](1,"div",60),a["\u0275\u0275elementStart"](2,"table",12),a["\u0275\u0275elementStart"](3,"thead"),a["\u0275\u0275elementStart"](4,"tr"),a["\u0275\u0275elementStart"](5,"th"),a["\u0275\u0275text"](6,"#"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"th"),a["\u0275\u0275text"](8,"Saved by"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"th"),a["\u0275\u0275text"](10,"Date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Num. Items"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"tbody"),a["\u0275\u0275template"](14,w,9,7,"tr",61),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",62),a["\u0275\u0275template"](16,I,9,1,"table",63),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](14),a["\u0275\u0275property"]("ngForOf",e.held_items),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",null!=e.selectedHeldItem)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.dbService=e,this.notify=t,this.socket=n,this.authService=i,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new a.EventEmitter,this.url="purchase/findById",this.items=[],this.new_item=null,this.new_quantity=null,this.new_price=null,this.purchase_total=0,this.units=["ampoule","bottle","box","capsule","carton","glove","inhaler","pack","pessary","piece","roll","strip","suppository","syringe","tablet","tube","vial"],this.unit_selected="",this.general_markup=1.33,this.held_items=[],this.selectedHeldItem=null,null!=this.id&&null!=this.id||(this.purchase=new l.a,this.purchase.createdAt=this.dbService.getToday()),-1==this.authService.current_user.permissions.indexOf("Receive Purchases")&&(this.notify.failNotification("You are not permitted to view the page"),this.dbService.goBackHome()),this.dbService.setTitle("Receive Transfers"),this.units=this.dbService.units}ngOnInit(){this.ts=this.dbService.getToday(),null!=localStorage.getItem("markup")&&(this.general_markup=parseFloat(localStorage.getItem("markup"))),null==this.id||null==this.id||this.getObject(this.id),this.held_items=JSON.parse(localStorage.getItem("purchase_heldItems")),null==this.held_items&&(this.held_items=[])}getObject(e){this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe(e=>{this.purchase=e.data,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}branchSelected(e){this.purchase.vendor=e,console.log(e)}trackBy(e,t){return t.product._id}productSelected(e){this.inList(e)?this.notify.failNotification("Item already in the list"):(console.log(e),this.new_item=e,this.new_quantity="",this.new_expiry=e.expiry,this.new_price=e.cost_price,this.unit_selected=e.unit,this.new_unit=e.unit,this.new_stock=e.stock,this.new_markup=this.general_markup,$("#enter_purchase_quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#enter_purchase_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()})))}inList(e){let t=!1;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}return t}editItem(e){this.new_item=e.product,this.items.splice(this.items.indexOf(e),1),this.new_item=e.product,this.new_quantity=e.quantity,this.new_price=e.price,this.new_expiry=e.expiry,this.new_markup=e.markup,this.new_selling_price=e.selling_price,$("#enter_purchase_quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#enter_purchase_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}addItem(){if(this.inList(this.new_item))this.notify.failNotification("Item already in the list");else{let e=new o.a;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.markup=this.new_markup,e.price=this.new_price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_price,e.selling_price=this.new_selling_price,e.expiry=this.new_expiry,e.product=this.new_item,e.stock=this.new_stock,e.unit="other"!=this.unit_selected?this.unit_selected:this.new_unit,this.items.push(e),this.new_item=new s.a,this.new_quantity=null,this.new_price=null,this.new_item=null,this.new_expiry="",this.new_markup=null,this.new_selling_price=null,this.new_unit=null,this.getTotal(),$("#enter_purchase_quantity_modal").modal("hide")}this.ts=this.dbService.getToday("timestamp_string")}resetMarkup(){const e=this;this.items.map(t=>{t.markup=e.general_markup})}addNewProduct(){$("#add_new_product_modal").modal({backdrop:"static",keyboard:!1}),$("#add_new_product_modal").on("shown.bs.modal",(function(){$("#product_form_name").focus()}))}setMarkup(e){e.markup=(parseFloat(e.selling_price)/parseFloat(e.price)).toFixed(2)}setSellingPrice(e){e.selling_price=(parseFloat(e.markup)*parseFloat(e.price)).toFixed(2)}setNewMarkup(){this.new_markup=(this.new_selling_price/parseFloat(this.new_price)).toFixed(2)}removeItem(e){this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.ts=this.dbService.getToday("timestamp_string")}changeQuantity(e){let t=window.prompt("Enter new quantity");null!=t&&""!=t.trim()&&null!=t&&(e.quantity=parseFloat(t)),this.getTotal()}changePrice(e){let t=window.prompt("Enter new price");null!=t&&""!=t.trim()&&null!=t&&(e.price=parseFloat(t)),this.getTotal()}changeMarkup(e){let t=window.prompt("Enter new markup");null!=t&&""!=t.trim()&&null!=t&&(e.markup=parseFloat(t))}getTotal(){let e=0;this.items.map(t=>{e+=t.quantity*t.price}),this.purchase_total=e.toFixed(2)}setQuantities(){let e=0;const t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}setPrices(){let e=0;const t=this;$(".prices").each((function(){t.items[e].price=$(this).val(),t.setSellingPrice(t.items[e]),e++})),this.getTotal()}setMarkups(){let e=0;const t=this;$(".markups").each((function(){t.items[e].markup=$(this).val(),e++})),this.getTotal()}setSellingPrices(){let e=0;const t=this;$(".selling_prices").each((function(){t.items[e].selling_price=$(this).val(),e++})),this.getTotal()}saveItems(){if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(null==this.purchase.vendor||null==this.purchase.vendor)return this.notify.failNotification("Please select the sender branch"),!1;this.notify.showLoading();const e=[],t=[],n=[],i=[],r=[],a=[],l=[],s="RP-"+this.dbService.getToday("timestamp_string");for(let d=0;d<this.items.length;d++){const s=this.items[d];e.push(s.product_id),t.push(s.price),n.push(s.quantity),r.push(s.markup),i.push(s.unit),a.push(s.selling_price),l.push(s.expiry)}const o=new FormData;o.append("products",e.join("||")),o.append("cost_prices",t.join("||")),o.append("quantities",n.join("||")),o.append("units",i.join("||")),o.append("expiries",l.join("||")),o.append("markups",r.join("||")),o.append("prices",a.join("||")),o.append("created_by",this.authService.current_user.id),o.append("update_prices","yes"),o.append("sender",this.purchase.vendor.id),o.append("delivery_point",this.purchase.site),o.append("invoice",this.purchase.invoice),o.append("code",s),o.append("date",this.purchase.createdAt),o.append("created_on",this.dbService.getToday("timestamp")),o.append("vendor_name",this.purchase.vendor.name),o.append("display_name",this.authService.current_user.display_name),this.dbService.postData(o,"transfer/saveBulkReceive",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"0"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-1"===e.status?this.notify.failNotification("Server error. Please try again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.items=[],this.purchase.invoice="",this.getTotal(),this.notify.successNotification("Transfers saved successfully"),this.socket.sendEvent({company_id:this.authService.current_user.company_id,parent_company_id:this.authService.current_user.parent_company,message:"Transfers received. stock and prices updated",event:"transfers_received"}))},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()}),this.ts=this.dbService.getToday("timestamp_string")}setNewPrice(){this.new_selling_price=(this.new_price*this.new_markup).toFixed(2)}productAdded(e){$("#add_new_product_modal").modal("hide"),this.productSelected(e)}ngOnDestroy(){this.items.length>0&&(this.holdItems(),this.notify.successNotification("Receipt held automatically"))}holdItems(){let e=new d.a;e.items=this.items,e.user=this.authService.current_user.display_name,e.time=this.dbService.getToday("timestamp"),this.held_items.push(e),localStorage.setItem("transfer_heldItems",JSON.stringify(this.held_items)),this.items=[],this.getTotal()}viewHeldItems(){$("#transfer_held_items_modal").modal({backdrop:"static",keyboard:!1}),this.held_items.length>0&&(this.selectedHeldItem=this.held_items[0])}selectHeldItem(e){this.selectedHeldItem=e}unhold(e){this.items=e.items,this.held_items.splice(this.held_items.indexOf(e),1),localStorage.setItem("transfer_heldItems",JSON.stringify(this.held_items)),$("#transfer_held_items_modal").modal("hide"),this.getTotal()}unholdSelected(){this.unhold(this.selectedHeldItem)}clearHeldItems(){localStorage.removeItem("transfer_heldItems"),this.selectedHeldItem=null,this.held_items=[],$("#transfer_held_items_modal").modal("hide")}cancel(){this.items=[],this.getTotal()}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](h.a),a["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-receive-transfers-offline"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:149,vars:23,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-6"],["routerLink","/add_product",1,"btn","btn-success","btn-sm"],[3,"timestamp","type","show","onAdd"],[1,"col-12"],[1,""],[1,"card"],[1,"card-header"],["type","text","size","6","name","general_markup",3,"ngModel","ngModelChange"],[1,"card-body","table-responsive","purchase_sales_items"],[1,"table","table-striped","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[1,"card","sales-fixed-bottom"],[1,"card-body"],["required","","type","date","name","createdAt",3,"ngModel","ngModelChange"],[3,"type","onFinish"],["required","","name","invoice",3,"ngModel","ngModelChange"],[1,"text-danger"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-info",3,"disabled","click"],[1,"btn","btn-info",3,"click"],["id","enter_purchase_quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[4,"ngIf"],[1,"modal-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"table","table-bordered","table-striped"],["type","text","required","","name","new_quantity","id","qtt","placeholder","Quantity",3,"ngModel","ngModelChange"],["type","text","required","","name","new_price","placeholder","Cost",3,"ngModel","ngModelChange"],["name","unit",1,"",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","other"],["class","form-control","type","text","name","unit",3,"ngModel","ngModelChange",4,"ngIf"],["required","","type","date","name","expiry",3,"ngModel","ngModelChange"],["required","","type","text","name","new_markup",3,"ngModel","blur","change","keyup","ngModelChange"],["required","","type","text","name","new_selling_price",3,"ngModel","focus","change","keyup","ngModelChange"],["type","submit","name","submit","value","Add Item",1,"btn","btn-success","waves-effect"],["type","button","data-dismiss","modal",1,"btn","btn-warning","waves-effect"],["id","add_new_product_modal","tabindex","-1","role","dialog",1,"modal","fade","in"],["role","document",1,"modal-dialog","modal-lg"],[3,"onFinish"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","purchase_held_items_modal","tabindex","-1","role","dialog",1,"modal","fade","in"],["class","row",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning"],["type","button","title","edit the markup, quantity, unit price, expiry or selling price of this item",1,"btn","btn-warning",3,"click"],[1,"fa","fa-edit"],["type","button","title","remove item from list",1,"btn","btn-danger",3,"click"],[1,"fa","fa-remove"],[3,"value"],["type","text","name","unit",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","fixed_height"],[3,"ngClass","dblclick","click",4,"ngFor","ngForOf"],[1,"col-5","fixed_height"],["class","table table-striped table-bordered table-hover",4,"ngIf"],[3,"ngClass","dblclick","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"h4"),a["\u0275\u0275text"](5,"Receive Transferred Items "),a["\u0275\u0275elementStart"](6,"a",4),a["\u0275\u0275text"](7,"+ New product"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"app-select-product",5),a["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",2),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"div",7),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275text"](16," General Markup: "),a["\u0275\u0275elementStart"](17,"input",10),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.general_markup=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",11),a["\u0275\u0275elementStart"](19,"table",12),a["\u0275\u0275elementStart"](20,"thead"),a["\u0275\u0275elementStart"](21,"tr"),a["\u0275\u0275elementStart"](22,"th"),a["\u0275\u0275text"](23,"Product"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"th"),a["\u0275\u0275text"](25,"Curr. Stock"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"th"),a["\u0275\u0275text"](27,"Quantity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"th"),a["\u0275\u0275text"](29,"Unit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"th"),a["\u0275\u0275text"](31,"Cost"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"th"),a["\u0275\u0275text"](33,"Total"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"th"),a["\u0275\u0275text"](35,"Markup"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"th"),a["\u0275\u0275text"](37,"Selling Price"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](38,"th"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"tbody"),a["\u0275\u0275template"](40,_,22,8,"tr",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"div",14),a["\u0275\u0275elementStart"](42,"div",15),a["\u0275\u0275elementStart"](43,"div"),a["\u0275\u0275elementStart"](44,"label"),a["\u0275\u0275text"](45,"Date of Transfer*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"input",16),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.purchase.createdAt=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](47," | Select Sender "),a["\u0275\u0275elementStart"](48,"app-select-branch",17),a["\u0275\u0275listener"]("onFinish",(function(e){return t.branchSelected(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](49,"label"),a["\u0275\u0275text"](50,"Invoice #"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"input",18),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.purchase.invoice=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"div",7),a["\u0275\u0275elementStart"](53,"b",19),a["\u0275\u0275text"](54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](55," | "),a["\u0275\u0275elementStart"](56,"button",20),a["\u0275\u0275listener"]("click",(function(){return t.cancel()})),a["\u0275\u0275text"](57,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"button",21),a["\u0275\u0275listener"]("click",(function(){return t.saveItems()})),a["\u0275\u0275text"](59,"Save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](60,"span",7),a["\u0275\u0275elementStart"](61,"button",22),a["\u0275\u0275listener"]("click",(function(){return t.holdItems()})),a["\u0275\u0275text"](62,"Hold"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"button",23),a["\u0275\u0275listener"]("click",(function(){return t.viewHeldItems()})),a["\u0275\u0275text"](64),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](65,"div",24),a["\u0275\u0275elementStart"](66,"div",25),a["\u0275\u0275elementStart"](67,"div",26),a["\u0275\u0275elementStart"](68,"div",27),a["\u0275\u0275template"](69,y,3,1,"h5",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"div",29),a["\u0275\u0275elementStart"](71,"form",30,31),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.addItem()})),a["\u0275\u0275elementStart"](73,"table",32),a["\u0275\u0275elementStart"](74,"tr"),a["\u0275\u0275elementStart"](75,"td"),a["\u0275\u0275elementStart"](76,"label"),a["\u0275\u0275text"](77,"Current Stock"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](78,"td"),a["\u0275\u0275text"](79),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](80,"tr"),a["\u0275\u0275elementStart"](81,"td"),a["\u0275\u0275elementStart"](82,"label"),a["\u0275\u0275text"](83,"Quantity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](84,"td"),a["\u0275\u0275elementStart"](85,"input",33),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_quantity=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](86,"tr"),a["\u0275\u0275elementStart"](87,"td"),a["\u0275\u0275elementStart"](88,"label"),a["\u0275\u0275text"](89,"Unit Cost"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](90,"td"),a["\u0275\u0275elementStart"](91,"input",34),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_price=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](92,"tr"),a["\u0275\u0275elementStart"](93,"td"),a["\u0275\u0275elementStart"](94,"label"),a["\u0275\u0275text"](95,"Unit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](96,"td"),a["\u0275\u0275elementStart"](97,"select",35),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.unit_selected=e})),a["\u0275\u0275template"](98,v,2,2,"option",36),a["\u0275\u0275elementStart"](99,"option",37),a["\u0275\u0275text"](100,"Other"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](101,S,1,1,"input",38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](102,"tr"),a["\u0275\u0275elementStart"](103,"td"),a["\u0275\u0275elementStart"](104,"label"),a["\u0275\u0275text"](105,"Expiry date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](106,"td"),a["\u0275\u0275elementStart"](107,"input",39),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_expiry=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](108,"tr"),a["\u0275\u0275elementStart"](109,"td"),a["\u0275\u0275elementStart"](110,"label"),a["\u0275\u0275text"](111,"Markup"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](112,"td"),a["\u0275\u0275elementStart"](113,"input",40),a["\u0275\u0275listener"]("blur",(function(){return t.setNewPrice()}))("change",(function(){return t.setNewPrice()}))("keyup",(function(){return t.setNewPrice()}))("ngModelChange",(function(e){return t.new_markup=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](114,"tr"),a["\u0275\u0275elementStart"](115,"td"),a["\u0275\u0275elementStart"](116,"label"),a["\u0275\u0275text"](117,"Selling Price"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](118,"td"),a["\u0275\u0275elementStart"](119,"input",41),a["\u0275\u0275listener"]("focus",(function(){return t.setNewPrice()}))("change",(function(){return t.setNewMarkup()}))("keyup",(function(){return t.setNewMarkup()}))("ngModelChange",(function(e){return t.new_selling_price=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](120,"input",42),a["\u0275\u0275elementStart"](121,"button",43),a["\u0275\u0275text"](122,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](123,"div",44),a["\u0275\u0275elementStart"](124,"div",45),a["\u0275\u0275elementStart"](125,"div",26),a["\u0275\u0275elementStart"](126,"div",27),a["\u0275\u0275elementStart"](127,"h5"),a["\u0275\u0275text"](128,"Add new product"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](129,"div",29),a["\u0275\u0275elementStart"](130,"app-product-form",46),a["\u0275\u0275listener"]("onFinish",(function(e){return t.productAdded(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](131,"div",47),a["\u0275\u0275elementStart"](132,"button",48),a["\u0275\u0275text"](133,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](134,"div",49),a["\u0275\u0275elementStart"](135,"div",45),a["\u0275\u0275elementStart"](136,"div",26),a["\u0275\u0275elementStart"](137,"div",27),a["\u0275\u0275text"](138," Held Items "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](139,"div",29),a["\u0275\u0275template"](140,E,2,0,"span",28),a["\u0275\u0275template"](141,C,17,2,"div",50),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](142,"div",47),a["\u0275\u0275elementStart"](143,"button",51),a["\u0275\u0275listener"]("click",(function(){return t.unholdSelected()})),a["\u0275\u0275text"](144,"Unhold Selected"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](145,"button",52),a["\u0275\u0275listener"]("click",(function(){return t.clearHeldItems()})),a["\u0275\u0275text"](146,"Delete All"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](147,"button",53),a["\u0275\u0275text"](148,"Close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("timestamp",t.ts)("type","search")("show","no"),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngModel",t.general_markup),a["\u0275\u0275advance"](23),a["\u0275\u0275property"]("ngForOf",t.items),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.purchase.createdAt),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("type","select"),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",t.purchase.invoice),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("Total: ",t.purchase_total,""),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",t.items.length<1),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("Held Items (",t.held_items.length,")"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",null!=t.new_item),a["\u0275\u0275advance"](10),a["\u0275\u0275textInterpolate1"]("",t.new_stock," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.new_quantity),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.new_price),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.unit_selected),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.units),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf","other"==t.unit_selected),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.new_expiry),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.new_markup),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.new_selling_price),a["\u0275\u0275advance"](21),a["\u0275\u0275property"]("ngIf",t.held_items.length<1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.held_items.length>0))},directives:[r.e,p.a,f.b,f.e,f.h,i.i,f.l,g.a,i.j,f.f,f.g,f.m,f.i,f.n,b.a,i.h],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.f.forChild(M)],r.f]}),e})();var N=n("nEHF"),T=n("wDHj"),j=n("nBlB");let q=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,F,N.a,T.a,j.a]]}),e})()},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),r=n("nEHF"),a=n("9EpT"),l=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a,a.b]]}),e})()},pEcs:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("fXoL");class r{constructor(){}}var a=n("c92J"),l=n("ccyI"),s=n("1VJT"),o=n("ofXK"),d=n("3Pt+"),c=n("hiAm");function m(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addItem()})),i["\u0275\u0275element"](1,"i",9),i["\u0275\u0275elementEnd"]()}}function h(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).list()})),i["\u0275\u0275element"](1,"i",11),i["\u0275\u0275elementEnd"]()}}function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function p(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275template"](1,m,2,0,"button",4),i["\u0275\u0275template"](2,h,2,0,"button",5),i["\u0275\u0275elementStart"](3,"select",6),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).selected_item=t}))("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).itemSelected()})),i["\u0275\u0275template"](4,u,2,2,"option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.show_add),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.show_add),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selected_item),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",2),i["\u0275\u0275template"](1,p,5,4,"span",3),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_loaded)}}function g(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",18),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"i",19),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",e.name," ")}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275template"](1,_,4,1,"a",17),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275template"](2,g,1,0,"app-loading",3),i["\u0275\u0275template"](3,b,3,0,"div",3),i["\u0275\u0275template"](4,y,2,1,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_finished_search)}}let S=(()=>{class e{constructor(e,t,n){this.dbService=e,this.authService=t,this.notify=n,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="select",this.show_add=!0,this.param="",this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.is_loaded=!1,this.added=[]}ngOnInit(){console.log(this.type),"list"!=this.type&&"select"!=this.type||this.list(),"emit"==this.type&&this.getAll()}itemSelected(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.selected_item){this.onFinish.emit(this.objects[e]);break}}itemAdded(e){this.objects.push(e),$("#add_vendor_modal").modal("hide"),this.onFinish.emit(e)}list(){this.is_loaded=!1,this.notify.showLoading(),this.dbService.getData("admin/getBranches?only_others=yes",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status||(this.objects=e.data,this.is_loaded=!0)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}getAll(){this.is_loaded=!1,this.notify.showLoading();let e="admin/getBranches?only_others=no";"admin"==this.authService.current_user.type&&(e+="&parent_company_id="+this.authService.current_user.parent_company_id),this.dbService.getData(e,this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status||(this.objects=e.data,this.onFinish.emit(this.objects),this.is_loaded=!0)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}add(e){this.added.push(e),this.onAdd.emit(e),e.is_selected=!0}select(e){this.selected=e,this.onFinish.emit(e)}addItem(){this.notify.showLoading();let e=window.prompt("Enter name of branch");if(this.dbService.isEmpty(e))return this.notify.failNotification("name is required"),!1;let t=window.prompt("Enter phone number of branch");if(this.dbService.isEmpty(t))return this.notify.failNotification("Phone number is required"),!1;let n=new FormData;n.append("name",e),n.append("phone",t),this.dbService.postData(n,"admin/saveBranch",this.authService.current_user).subscribe(n=>{if(this.notify.hideLoading(),"-1"===n.status)this.notify.failNotification("Server error. Please try again");else if("-1"===n.status)this.notify.failNotification("Unable to authenticate. Please login again");else if("-9"===n.status)this.notify.showNotification("You are not permitted to perform this action","fail",3e3);else{let i=new r;i.id=n.status,i.name=e,i.phone=t,this.objects.push(i),this.notify.successNotification("Branch added successfully"),this.selected_item=i.id,this.itemSelected()}},e=>{this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](l.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-branch"]],inputs:{btn_text:"btn_text",type:"type",show_add:"show_add",selected_item:"selected_item"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},decls:2,vars:2,consts:[["class","",4,"ngIf"],["class","card",4,"ngIf"],[1,""],[4,"ngIf"],["type","button","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-info",3,"click",4,"ngIf"],["name","vendors",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-refresh"],[3,"value"],[1,"card"],[1,"body"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"fa","fa-plus","pull-right"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,f,2,1,"span",0),i["\u0275\u0275template"](1,v,5,3,"div",1)),2&e&&(i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","list"==t.type))},directives:[o.j,d.m,d.e,d.h,o.i,d.i,d.n,c.a],styles:[""]}),e})()},wDHj:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),r=n("nEHF"),a=n("6QD7"),l=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a,a.b],a.b]}),e})()}}]);