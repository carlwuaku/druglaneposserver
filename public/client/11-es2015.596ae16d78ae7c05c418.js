(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Ikxx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){}}},M6vu:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("fXoL"),s=n("ccyI"),a=n("c92J"),r=n("ofXK"),o=n("6QD7");let c=(()=>{class e{constructor(e,t){this.dbService=e,this.authService=t,this.height=50,this.dbService.server_address.subscribe(e=>{this.base_url=e})}ngOnInit(){this.dbService.getDataByAuthless("getAppName").subscribe(e=>{this.title=e.name},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-app-name"]],inputs:{height:"height"},decls:1,vars:1,template:function(e,t){1&e&&i["\u0275\u0275text"](0),2&e&&i["\u0275\u0275textInterpolate1"]("",t.title,"\n")},styles:[""]}),e})();function l(e,t){if(1&e&&i["\u0275\u0275element"](0,"div",11),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",e.extra_data,i["\u0275\u0275sanitizeHtml"])}}function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.product.name),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.quantity),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.price),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",(e.quantity*e.price).toFixed(2)," ")}}function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",2),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate3"](" ",e.tax_title,": ",e.tax,"%: + ",e.tax_amount.toFixed(2)," ")}}function h(e,t){if(1&e&&i["\u0275\u0275element"](0,"div",11),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",e.footer,i["\u0275\u0275sanitizeHtml"])}}function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"b",12),i["\u0275\u0275text"](1),i["\u0275\u0275element"](2,"br"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" Change: ",(e.receipt_amount_paid-e.receipt_discounted_total).toFixed(2)," ")}}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"em"),i["\u0275\u0275elementStart"](2,"b"),i["\u0275\u0275text"](3,"Software: "),i["\u0275\u0275element"](4,"app-app-name"),i["\u0275\u0275text"](5," - +233 20 552 3796"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}let f=(()=>{class e{constructor(e,t){this.authService=e,this.dbService=t,this.receipt_discount=0,this.receipt_discounted_total=0,this.payment_method="Cash",this.invoice_items=[],this.receipt_total=0,this.time="",this.digital_address="",this.receipt_amount_paid=0,this.receipt_items=[],this.tax=0,this.extra_data="",this.footer="",this.show_tax="no",this.tax_title="",this.show_credit="no",this.company_address=e.current_user.company_address,this.company_phone=e.current_user.company_phone,this.company_name=e.current_user.company_name,this.cashier=e.current_user.display_name,this.digital_address=e.current_user.digital_address}ngOnInit(){this.dbService.getDataByAuthless("getAppName").subscribe(e=>{this.extra_data=e.name},e=>{}),this.dbService.getData("admin/getSetting?setting=receipt_show_credits",this.authService.current_user).subscribe(e=>{this.show_credit=e.data}),this.dbService.getData("admin/getSetting?setting=receipt_extra_info",this.authService.current_user).subscribe(e=>{this.extra_data=e.data}),this.dbService.getData("admin/getSetting?setting=receipt_footer",this.authService.current_user).subscribe(e=>{this.footer=e.data}),this.dbService.getData("admin/getSetting?setting=tax_title",this.authService.current_user).subscribe(e=>{this.tax_title=e.data}),this.dbService.getData("admin/getSetting?setting=show_tax_on_receipt",this.authService.current_user).subscribe(e=>{this.show_tax=e.data})}isEmpty(e){return this.dbService.isEmpty(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales-invoice"]],inputs:{receipt_discount:"receipt_discount",receipt_discounted_total:"receipt_discounted_total",payment_method:"payment_method",invoice_items:"invoice_items",company_name:"company_name",company_phone:"company_phone",company_address:"company_address",receipt_total:"receipt_total",change:"change",selected_code:"selected_code",cashier:"cashier",time:"time",digital_address:"digital_address",receipt_amount_paid:"receipt_amount_paid",receipt_items:"receipt_items",tax:"tax",tax_amount:"tax_amount",extra_data:"extra_data",footer:"footer"},decls:61,vars:22,consts:[["id","invoice"],[1,"text-left"],[1,"text-right"],[1,"text-center"],[3,"innerHTML",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","text-right ",4,"ngIf"],["class","",4,"ngIf"],[3,"bc-value","bc-height","bc-font-size","bc-display-value"],[4,"ngIf"],[3,"innerHTML"],[1,""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275elementStart"](2,"div"),i["\u0275\u0275elementStart"](3,"span",1),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",2),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"br"),i["\u0275\u0275elementStart"](8,"div",3),i["\u0275\u0275elementStart"](9,"b"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](11,"br"),i["\u0275\u0275text"](12),i["\u0275\u0275element"](13,"br"),i["\u0275\u0275text"](14),i["\u0275\u0275element"](15,"br"),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,l,1,1,"div",4),i["\u0275\u0275element"](18,"br"),i["\u0275\u0275elementStart"](19,"b"),i["\u0275\u0275text"](20,"Cashier:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21),i["\u0275\u0275element"](22,"hr"),i["\u0275\u0275elementStart"](23,"table",5),i["\u0275\u0275elementStart"](24,"thead"),i["\u0275\u0275elementStart"](25,"tr"),i["\u0275\u0275elementStart"](26,"th"),i["\u0275\u0275text"](27,"Item Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"th"),i["\u0275\u0275text"](29,"Qty"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"th"),i["\u0275\u0275text"](31,"Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"th"),i["\u0275\u0275text"](33,"Ext. Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"tbody"),i["\u0275\u0275template"](35,d,9,4,"tr",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](36,"br"),i["\u0275\u0275element"](37,"br"),i["\u0275\u0275elementStart"](38,"div"),i["\u0275\u0275elementStart"](39,"span",2),i["\u0275\u0275text"](40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](41,"br"),i["\u0275\u0275elementStart"](42,"span",2),i["\u0275\u0275text"](43),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](44,"br"),i["\u0275\u0275template"](45,m,2,3,"span",7),i["\u0275\u0275element"](46,"br"),i["\u0275\u0275elementStart"](47,"b",2),i["\u0275\u0275text"](48),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](49,"br"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"div",3),i["\u0275\u0275text"](51),i["\u0275\u0275element"](52,"br"),i["\u0275\u0275template"](53,h,1,1,"div",4),i["\u0275\u0275template"](54,u,3,1,"b",8),i["\u0275\u0275element"](55,"ngx-barcode",9),i["\u0275\u0275element"](56,"br"),i["\u0275\u0275elementStart"](57,"b",3),i["\u0275\u0275text"](58,"Thanks for shopping with us!"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](59,p,6,0,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](60,"br"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("",t.time," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("#",t.selected_code,""),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("",t.company_name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.company_address," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" DIGITAL ADDRESS ",t.digital_address," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.company_phone," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isEmpty(t.extra_data)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",t.cashier," "),i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngForOf",t.receipt_items),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" Subtotal: ",t.receipt_total.toFixed(2)," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" Discount: ",t.receipt_discount.toFixed(2)," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","yes"==t.show_tax),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" RECEIPT TOTAL: ",t.receipt_discounted_total.toFixed(2)," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"](" ",t.payment_method," GHC ",t.receipt_amount_paid," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isEmpty(t.footer)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Cash"==t.payment_method),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("bc-value",t.selected_code)("bc-height",35)("bc-font-size",13)("bc-display-value",!0),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.show_credit))},directives:[r.j,r.i,o.a,c],styles:[""]}),e})()},NFbv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),s=n("nEHF"),a=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,s.a]]}),e})()},QQkv:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("fXoL"),s=n("c92J"),a=n("ccyI"),r=n("1VJT"),o=n("ofXK"),c=n("mEfR"),l=n("3Pt+");function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"datalist",9),i["\u0275\u0275element"](1,"option",10),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate2"]("value","",e.name," (",e.phone,")")}}function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("",e.name," ",e.phone," ")}}function h(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275elementStart"](1,"select",11),i["\u0275\u0275listener"]("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().itemSelected()}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selected=t})),i["\u0275\u0275template"](2,m,2,3,"option",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"a",13),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().addNew()})),i["\u0275\u0275element"](4,"i",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}const p=function(e){return{"select-product-active":e}};function f(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",21),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,s=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](3,p,n==s.arrowkeyLocation)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"](" ",e.name," (",e.phone,") ")}}function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275elementStart"](1,"ul",19),i["\u0275\u0275template"](2,f,2,5,"li",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.objects)}}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," No customer found. Check the spelling.\n"),i["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"input",16),i["\u0275\u0275listener"]("keyup",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().param=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,u,3,0,"div",1),i["\u0275\u0275template"](3,g,3,1,"div",17),i["\u0275\u0275template"](4,_,2,0,"div",1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.param),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length>0&&e.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search)}}let b=(()=>{class e{constructor(e,t,n){this.dbService=e,this.authService=t,this.notify=n,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.autocomplete=!1,this.autocomplete_list=[],this.onAdd=new i.EventEmitter,this.type="search",this.show="no",this.added=[],this.filter_param="",this.filter_results=[],this.arrowkeyLocation=0}ngOnInit(){this.getCustomers()}getCustomers(){this.dbService.getData("customer/getList",this.authService.current_user).subscribe(e=>{"1"==e.status&&(this.objects=e.data)},e=>{this.notify.failNotification("Unable to get customers. Check connection")})}ngOnChanges(){"search"==this.type&&this.search()}select_autocomplete(e){}addItem(){$("#add_customer_modal").modal("show")}itemAdded(e){this.objects.push(e),$("#add_customer_modal").modal("hide"),this.onFinish.emit(e)}search(){this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.param).subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1,this.selected=null)},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0})}add(e){this.onAdd.emit(e),console.log(e),this.is_finished_search=!1,$("#customer_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}select(e){this.selected=e,this.onFinish.emit(e)}itemSelected(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.selected){this.onFinish.emit(this.objects[e]);break}}highlightObject(e){this.objects.map(e=>{e.selected=!1}),this.highlightedObject=e,e.selected=!0}keyUp(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:let e=this.objects[this.arrowkeyLocation];null!=e&&null!=e&&this.add(e);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.search()}}focusCursor(){let e=$("#customer_search").val();$("#customer_search").val("").val(e)}hideSearchResults(){this.param="",this.objects.length=0,this.is_finished_search=!1}addNew(){$("#addCustomerModal").modal("show")}customerAdded(e){this.objects.push(e),this.selected=e.id,this.onFinish.emit(e),$("#addCustomerModal").modal("hide")}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-customer"]],inputs:{btn_text:"btn_text",param:"param",selected:"selected",autocomplete:"autocomplete",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:3,consts:[["id","customer_list",4,"ngFor","ngForOf"],[4,"ngIf"],["id","addCustomerModal","tabindex","-1","role","dialog",1,"modal","fade","in"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[3,"onFinish"],["class","focus_search",4,"ngIf"],["id","customer_list"],[3,"value"],["name","customer",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["title","add new customer",1,"btn-sm","btn-primary","btn",3,"click"],[1,"fa","fa-plus"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter customer name or phone","required","","type","text","id","customer_search","name","search",3,"ngModel","keyup","ngModelChange"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],[1,"list-group"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,d,2,2,"datalist",0),i["\u0275\u0275template"](1,h,5,2,"span",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275elementStart"](6,"h5"),i["\u0275\u0275text"](7,"Add new Customer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",6),i["\u0275\u0275elementStart"](9,"app-customer-form",7),i["\u0275\u0275listener"]("onFinish",(function(e){return t.customerAdded(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,v,5,4,"div",8)),2&e&&(i["\u0275\u0275property"]("ngForOf",t.objects),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf","search"==t.type))},directives:[o.i,o.j,c.a,l.i,l.n,l.m,l.e,l.h,l.b,l.l,o.h],styles:[".autocomplete-items[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}"]}),e})()},mEfR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),s=n("Ikxx"),a=n("c92J"),r=n("1VJT"),o=n("ccyI"),c=n("3Pt+");let l=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.uploadUrl="admin/uploadPicture",this.url="customer/findById",null!=this.id&&null!=this.id||(this.customer=new s.a)}ngOnInit(){null==this.id||null==this.id||this.getCustomer(this.id)}uploadFinished(e){this.pic_location=e,this.customer.picture=e}getCustomer(e){this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe(e=>{this.customer=e.data,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}submit(){this.notify.showLoading();let e=new FormData;for(let t in this.customer)e.append(t,this.customer[t]);null!=this.id&&null!=this.id||e.append("createdAt",this.dbService.getToday()),e.append("display_name",this.authService.current_user.display_name),this.dbService.postData(e,"customer/save",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.customer.id=e.status,this.notify.successNotification("Customer saved successfully"),this.onFinish.emit(this.customer),this.customer=new s.a)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customer-form"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:36,vars:5,consts:[["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"row"],[1,"col-sm-6"],["required","","type","text","name","name",3,"ngModel","ngModelChange"],["required","","type","text","name","phone",3,"ngModel","ngModelChange"],["name","sex",3,"ngModel","ngModelChange"],["value","Male"],["value","Female"],["name","email","type","email",3,"ngModel","ngModelChange"],["name","date_of_birth","type","date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),i["\u0275\u0275elementStart"](2,"b"),i["\u0275\u0275text"](3,"Fields marked * are required"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"label"),i["\u0275\u0275text"](7,"Name*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"br"),i["\u0275\u0275elementStart"](9,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.name=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",3),i["\u0275\u0275elementStart"](11,"label"),i["\u0275\u0275text"](12,"Phone*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"br"),i["\u0275\u0275elementStart"](14,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.phone=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",3),i["\u0275\u0275elementStart"](16,"label"),i["\u0275\u0275text"](17,"Sex"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"br"),i["\u0275\u0275elementStart"](19,"select",6),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.sex=e})),i["\u0275\u0275elementStart"](20,"option",7),i["\u0275\u0275text"](21,"Male"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"option",8),i["\u0275\u0275text"](23,"Female"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",3),i["\u0275\u0275elementStart"](25,"label"),i["\u0275\u0275text"](26,"Email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"br"),i["\u0275\u0275elementStart"](28,"input",9),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.email=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",3),i["\u0275\u0275elementStart"](30,"label"),i["\u0275\u0275text"](31,"Date of Birth"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](32,"br"),i["\u0275\u0275elementStart"](33,"input",10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.date_of_birth=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",3),i["\u0275\u0275element"](35,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.name),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.phone),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.sex),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.email),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.date_of_birth))},directives:[c.f,c.g,c.b,c.l,c.e,c.h,c.m,c.i,c.n],styles:[""]}),e})()},yGzR:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("fXoL"),s=n("c92J"),a=n("eJvr"),r=n("ccyI"),o=n("1VJT"),c=n("ofXK"),l=n("3Pt+"),d=n("hiAm");function m(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",6),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addItem()})),i["\u0275\u0275element"](1,"i",7),i["\u0275\u0275elementEnd"]()}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function u(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,m,2,0,"button",3),i["\u0275\u0275elementStart"](2,"label"),i["\u0275\u0275text"](3,"Select Insurer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275elementStart"](5,"select",4),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).select_item=t}))("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).itemSelected()})),i["\u0275\u0275template"](6,h,2,2,"option",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.show_add),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",e.select_item),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,u,7,3,"div",1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.is_loaded)}}function f(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",12),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"i",13),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",e.name," ")}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275template"](1,_,4,1,"a",11),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,f,1,0,"app-loading",1),i["\u0275\u0275template"](3,g,3,0,"div",1),i["\u0275\u0275elementStart"](4,"button",6),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().addItem()})),i["\u0275\u0275text"](5,"+"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,v,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.is_finished_search)}}let x=(()=>{class e{constructor(e,t,n,s){this.dbService=e,this.localforage=t,this.authService=n,this.notify=s,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="select",this.show_add=!0,this.param="",this.selected=null,this.emit=!1,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.is_loaded=!1,this.added=[]}ngOnInit(){"list"!=this.type&&"select"!=this.type||this.list()}itemSelected(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.select_item){this.onFinish.emit(this.objects[e]);break}}addItem(){this.notify.showLoading();let e=window.prompt("Enter name of Insurance Provider");if(this.dbService.isEmpty(e))return this.notify.failNotification("name is required"),!1;let t=new FormData;t.append("name",e),this.dbService.postData(t,"admin/addInsurer",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Server error. Please try again"):"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.list(),this.notify.successNotification("Insurer added successfully"),this.itemSelected())},e=>{this.notify.noConnectionNotification()})}itemAdded(e){this.objects.push(e),$("#add_vendor_modal").modal("hide"),this.onFinish.emit(e)}list(){this.is_loaded=!1,this.notify.showLoading(),this.dbService.getData("admin/getInsurers",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status||(this.objects=e.data,this.is_loaded=!0,this.emit&&this.onFinish.emit(this.objects))},e=>{this.localforage.getItem(this.dbService.OFFLINE_INSURERS_KEY).subscribe(e=>{this.is_loaded=!0,this.objects=null==e?[]:e}),this.notify.hideLoading(),this.notify.noConnectionNotification()})}add(e){this.added.push(e),this.onAdd.emit(e),e.is_selected=!0}select(e){this.selected=e,this.onFinish.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-insurer"]],inputs:{btn_text:"btn_text",type:"type",show_add:"show_add",emit:"emit"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},decls:2,vars:2,consts:[["class","",4,"ngIf"],[4,"ngIf"],[1,""],["type","button","class","",3,"click",4,"ngIf"],["name","vendors",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"",3,"click"],[1,"fa","fa-plus"],[3,"value"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"fa","fa-plus","pull-right"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,p,3,1,"div",0),i["\u0275\u0275template"](1,b,7,3,"div",1)),2&e&&(i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","list"==t.type))},directives:[c.j,l.m,l.e,l.h,c.i,l.i,l.n,d.a],styles:[""]}),e})()}}]);