(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"9EpT":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return a}));var n=i("fXoL");const s=["bcElement"],o=i("YsXA");let r=(()=>{class e{constructor(e){this.renderer=e,this.elementType="svg",this.cssClass="barcode",this.format="CODE128",this.lineColor="#000000",this.width=2,this.height=100,this.displayValue=!1,this.fontOptions="",this.font="monospace",this.textAlign="center",this.textPosition="bottom",this.textMargin=2,this.fontSize=20,this.background="#ffffff",this.margin=10,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.value="",this.valid=()=>!0}get options(){return{format:this.format,lineColor:this.lineColor,width:this.width,height:this.height,displayValue:this.displayValue,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:this.valid}}ngOnChanges(){this.createBarcode()}createBarcode(){if(!this.value)return;let e;switch(this.elementType){case"img":e=this.renderer.createElement("img");break;case"canvas":e=this.renderer.createElement("canvas");break;case"svg":default:e=this.renderer.createElement("svg","svg")}o(e,this.value,this.options);for(const t of this.bcElement.nativeElement.childNodes)this.renderer.removeChild(this.bcElement.nativeElement,t);this.renderer.appendChild(this.bcElement.nativeElement,e)}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](n.Renderer2))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-barcode6"]],viewQuery:function(e,t){var i;1&e&&n["\u0275\u0275staticViewQuery"](s,!0),2&e&&n["\u0275\u0275queryRefresh"](i=n["\u0275\u0275loadQuery"]())&&(t.bcElement=i.first)},inputs:{elementType:["bc-element-type","elementType"],cssClass:["bc-class","cssClass"],format:["bc-format","format"],lineColor:["bc-line-color","lineColor"],width:["bc-width","width"],height:["bc-height","height"],displayValue:["bc-display-value","displayValue"],fontOptions:["bc-font-options","fontOptions"],font:["bc-font","font"],textAlign:["bc-text-align","textAlign"],textPosition:["bc-text-position","textPosition"],textMargin:["bc-text-margin","textMargin"],fontSize:["bc-font-size","fontSize"],background:["bc-background","background"],margin:["bc-margin","margin"],marginTop:["bc-margin-top","marginTop"],marginBottom:["bc-margin-bottom","marginBottom"],marginLeft:["bc-margin-left","marginLeft"],marginRight:["bc-margin-right","marginRight"],value:["bc-value","value"],valid:["bc-valid","valid"]},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["bcElement",""]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"div",null,0),2&e&&n["\u0275\u0275classMap"](t.cssClass)},encapsulation:2}),e})(),a=(()=>{class e{}return e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=n["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[]]}),e})()},hiAm:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"i",0),n["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},icKv:function(e,t,i){"use strict";i.r(t),i.d(t,"DbIssuesModule",(function(){return b}));var n=i("ofXK"),s=i("tyNb"),o=i("fXoL"),r=i("ccyI"),a=i("1VJT"),c=i("c92J"),l=i("nVU4"),d=i("hiAm");const h=["productsGrid"];function u(e,t){1&e&&o["\u0275\u0275element"](0,"app-loading")}const f=[{path:"",component:(()=>{class e{constructor(e,t,i,n){this.authService=e,this.notify=i,this.dbService=n,this.refresh=new o.EventEmitter,this.rowDataClicked1={},this.columnDefs=[{headerName:"#",valueGetter:"node.rowIndex + 1",checkboxSelection:!0,autoHeight:!0,cellClass:"bordered"},{headerName:"Name",field:"name",sortable:!0,filter:!0,cellClass:"bordered"},{headerName:"Duplicate count",field:"total",sortable:!0,filter:!0,cellClass:"bordered"}],this.offset=0,this.objects=[],this.is_loading=!1,this.is_loaded=!1,this.quick_option="this_month",this.selected_items=[],null!=t.snapshot.params.quick_option&&null!=t.snapshot.params.quick_option&&(this.quick_option=t.snapshot.params.quick_option),-1==this.authService.current_user.permissions.indexOf("View Inventory")&&(this.notify.failNotification("You are not permitted to view the page"),this.dbService.goBackHome()),this.dbService.setTitle("Database Maintenance"),this.defaultColDef={flex:1,minWidth:100,resizable:!0,headerCheckboxSelection:this.isFirstColumn,checkboxSelection:this.isFirstColumn}}ngOnInit(){this.getData()}ngOnChanges(){this.getData()}onGridReady(e){this.gridApi=e.api}onSelectionChanged(e){var t=this.gridApi.getSelectedRows();this.selected_items=t}getData(){this.is_loading=!0,this.notify.showLoading(),this.dbService.getData("product/getDuplicateList?company_id="+this.authService.current_user.company_id,this.authService.current_user).subscribe(e=>{this.objects=e.data,this.notify.hideLoading(),this.is_loading=!1},e=>{this.is_loading=!1,this.notify.noConnectionNotification()})}submit(){if(this.selected_items.length<1)return alert("Please select some items first"),!1;if(!window.confirm("Sure you want to merge the selected products? This operation cannot be undone"))return!1;this.notify.showLoading();let e=new FormData,t=[];this.selected_items.map(e=>{t.push(e.id)}),e.append("ids",t.join("|||")),this.dbService.postData(e,"product/mergeDuplicates",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Server error. Please check that you filled the form correctly and try again"):"0"===e.status?this.notify.failNotification("Unable to authenticate. Login and try again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):this.notify.successNotification("Items merged saved successfully"),this.getData()},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}goBack(){window.history.back()}isFirstColumn(e){return e.columnApi.getAllDisplayedColumns()[0]===e.column}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-issues"]],viewQuery:function(e,t){var i;1&e&&o["\u0275\u0275viewQuery"](h,!0),2&e&&o["\u0275\u0275queryRefresh"](i=o["\u0275\u0275loadQuery"]())&&(t.agGrid=i.first)},outputs:{refresh:"refresh"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:17,vars:6,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],[1,"card","card-body"],[1,"card-header"],[1,"btn","btn-success",3,"click"],[1,"card-body"],[4,"ngIf"],["rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","400px","font-family","Muli","font-size","15px",3,"rowData","columnDefs","suppressMenuHide","defaultColDef","gridReady","selectionChanged"],["productsGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"h5"),o["\u0275\u0275text"](5,"Duplicate Products"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"button",6),o["\u0275\u0275listener"]("click",(function(){return t.submit()})),o["\u0275\u0275text"](9,"Merge Selected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275template"](11,u,1,0,"app-loading",8),o["\u0275\u0275elementStart"](12,"h5"),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](14,"table"),o["\u0275\u0275elementStart"](15,"ag-grid-angular",9,10),o["\u0275\u0275listener"]("gridReady",(function(e){return t.onGridReady(e)}))("selectionChanged",(function(e){return t.onSelectionChanged(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](11),o["\u0275\u0275property"]("ngIf",t.is_loading),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",t.objects.length," Items "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("rowData",t.objects)("columnDefs",t.columnDefs)("suppressMenuHide",!0)("defaultColDef",t.defaultColDef))},directives:[n.j,l.AgGridAngular,d.a],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.f.forChild(f)],s.f]}),e})();var g=i("nEHF"),p=i("nBlB");let b=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.b,m,g.a,p.a]]}),e})()},nBlB:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("nEHF"),o=i("9EpT"),r=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.b,s.a,o.b]]}),e})()}}]);