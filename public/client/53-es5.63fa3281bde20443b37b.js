function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{g1ye:function(e,t,n){"use strict";n.r(t),n.d(t,"BranchDetailsModule",(function(){return y}));var a=n("ofXK"),i=n("tyNb"),r=n("fXoL"),s=n("ccyI"),l=n("1VJT"),o=n("c92J"),d=n("3Pt+"),c=n("n49D"),u=n("nVU4"),m=["salesGrid"];function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"h4"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.branch.name," Sales Report")}}var f,p,v,g=[{path:"",component:(f=function(){function e(t,n,a,i){_classCallCheck(this,e),this.authService=t,this.notify=n,this.ar=a,this.dbService=i,this.customers="...",this.products="...",this.vendors="...",this.orders="...",this.total_arrears=0,this.quick_option="this_month",this.columnDefs=[{headerName:"Date",field:"date",sortable:!0,filter:!0,autoHeight:!0},{headerName:"Cash",field:"cash",sortable:!0,filter:!0},{headerName:"Cheque",field:"cheque",sortable:!0,filter:!0},{headerName:"Credit",field:"credit",sortable:!0,filter:!0},{headerName:"Insurance",field:"insurance",sortable:!0,filter:!0},{headerName:"Mobile Money",field:"momo",sortable:!0,filter:!0},{headerName:"POS",field:"pos",sortable:!0,filter:!0},{headerName:"Other",field:"other",sortable:!0,filter:!0},{headerName:"Total",field:"total_sales",sortable:!0,filter:!0}],this.sales=[],this.user=this.authService.current_user,this.id=a.snapshot.params.id,this.defaultColDef={resizable:!0};var r=this.dbService.setDates(this.quick_option);this.start_date=r.start_date,this.end_date=r.end_date,"admin"!=this.user.type&&(alert("Not permitted. Please logout and login as an administrator"),this.goBack())}return _createClass(e,[{key:"ngOnInit",value:function(){this.getDetails(),this.getSalesSummary()}},{key:"onGridReady",value:function(e){this.gridApi=e.api,e.api.sizeColumnsToFit()}},{key:"setDates",value:function(){var e=this.dbService.setDates(this.quick_option);this.start_date=e.start_date,this.end_date=e.end_date}},{key:"refresh",value:function(){this.getSalesSummary()}},{key:"getDetails",value:function(){var e=this;this.notify.showLoading(),this.dbService.getData("admin/findBranchById?id="+this.id,this.authService.current_user).subscribe((function(t){"1"==t.status?e.branch=t.data:alert(t.message),e.notify.hideLoading()}),(function(t){e.notify.hideLoading()}))}},{key:"getData",value:function(){var e=this;this.dbService.getData("admin/getDashboardMeterByBranch?id="+this.id,this.authService.current_user).subscribe((function(t){"1"==t.status?(e.pending_conflicts=t.transfer_conflicts,e.expired_all=t.expired,e.expired_next=t.expiring_next_month,e.expired=t.expiring_this_month,e.stock_out=t.out_of_stock,e.near_max=t.max_stock,e.near_min=t.min_stock,e.pending_transfers=t.incoming_transfers):alert(t.message)}),(function(e){}))}},{key:"getSalesSummary",value:function(){var e=this;this.dbService.getData("sale/getBranchDailySalesSummary?start_date="+this.start_date+"&end_date="+this.end_date,this.authService.current_user).subscribe((function(t){"1"==t.status?e.sales=t.data:alert(t.message)}),(function(e){}))}},{key:"goBack",value:function(){window.history.back()}}]),e}(),f.\u0275fac=function(e){return new(e||f)(r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](o.a))},f.\u0275cmp=r["\u0275\u0275defineComponent"]({type:f,selectors:[["app-branch-details"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](m,!0),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.agGrid=n.first)},decls:52,vars:8,consts:[[1,"content"],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["name","quick_options",3,"ngModel","change","ngModelChange"],["value","today"],["value","yesterday"],["value","this_week"],["value","last_week"],["value","this_month"],["value","last_month"],["value","first_quarter"],["value","second_quarter"],["value","third_quarter"],["value","last_quarter"],["value","this_year"],["value","last_year"],["type","date","name","start_date",3,"ngModel","ngModelChange"],["type","date","name","end_date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Get Data",1,"btn","btn-sm","btn-success"],["role","tablist",1,"nav","nav-tabs","md-tabs"],[1,"nav-item"],["role","tab","href","#sales","data-toggle","tab",1,"nav-link","active"],[1,"slide"],[1,"tab-content","tabs","card-block"],["role","tabpanel","id","sales",1,"tab-pane","active"],[3,"objects"],[1,"ag-theme-balham",2,"width","100%","height","400px","font-family","Muli","font-size","15px",3,"rowData","columnDefs","defaultColDef","gridReady"],["salesGrid",""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275template"](2,h,2,1,"h4",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"form",5,6),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.refresh()})),r["\u0275\u0275elementStart"](7,"label"),r["\u0275\u0275text"](8,"Select period"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"select",7),r["\u0275\u0275listener"]("change",(function(){return t.setDates()}))("ngModelChange",(function(e){return t.quick_option=e})),r["\u0275\u0275elementStart"](10,"option",8),r["\u0275\u0275text"](11,"Today"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",9),r["\u0275\u0275text"](13,"Yesterday"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"option",10),r["\u0275\u0275text"](15,"This Week"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"option",11),r["\u0275\u0275text"](17,"Last Week"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",12),r["\u0275\u0275text"](19,"This Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"option",13),r["\u0275\u0275text"](21,"Last Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"option",14),r["\u0275\u0275text"](23,"1st quarter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"option",15),r["\u0275\u0275text"](25,"2nd quarter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"option",16),r["\u0275\u0275text"](27,"3rd quarter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"option",17),r["\u0275\u0275text"](29,"4th quarter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"option",18),r["\u0275\u0275text"](31,"This Year"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"option",19),r["\u0275\u0275text"](33,"Last Year"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"label"),r["\u0275\u0275text"](35,"Start Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"input",20),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.start_date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"label"),r["\u0275\u0275text"](38,"End Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"input",21),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.end_date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](40,"input",22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](41,"hr"),r["\u0275\u0275elementStart"](42,"ul",23),r["\u0275\u0275elementStart"](43,"li",24),r["\u0275\u0275elementStart"](44,"a",25),r["\u0275\u0275text"](45,"SALES REPORT"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](46,"div",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",27),r["\u0275\u0275elementStart"](48,"div",28),r["\u0275\u0275element"](49,"app-export-to-excel",29),r["\u0275\u0275elementStart"](50,"ag-grid-angular",30,31),r["\u0275\u0275listener"]("gridReady",(function(e){return t.onGridReady(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null!=t.branch),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",t.quick_option),r["\u0275\u0275advance"](27),r["\u0275\u0275property"]("ngModel",t.start_date),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.end_date),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("objects",t.sales),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("rowData",t.sales)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef))},directives:[a.j,d.f,d.g,d.m,d.e,d.h,d.i,d.n,d.b,c.a,u.AgGridAngular],styles:[""]}),f)}],b=((p=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:p}),p.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||p)},imports:[[i.f.forChild(g)],i.f]}),p),_=n("nEHF"),y=((v=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[a.b,b,_.a]]}),v)},n49D:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fXoL"),i=n("4AQi"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.excel=t,this.objects=[],this.filename="download"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"export",value:function(){this.excel.exportAsExcelFile(this.objects,this.filename)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-export-to-excel"]],inputs:{objects:"objects",filename:"filename"},decls:3,vars:0,consts:[[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-file-excel-o"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",0),a["\u0275\u0275listener"]("click",(function(){return t.export()})),a["\u0275\u0275element"](1,"i",1),a["\u0275\u0275text"](2," Export To Excel"),a["\u0275\u0275elementEnd"]())},styles:[""]}),e}()}}]);