(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{GcqH:function(e,t,n){"use strict";n.r(t),n.d(t,"ReceivePaymentModule",(function(){return y}));var a=n("ofXK"),i=n("tyNb");class o{constructor(){this.payer="Credit Sale Payment"}}var r=n("fXoL"),m=n("c92J"),l=n("1VJT"),s=n("ccyI"),d=n("3Pt+"),c=n("QQkv");const u=[{path:"",component:(()=>{class e{constructor(e,t,n,a,i){this.dbService=e,this.router=t,this.ar=n,this.notify=a,this.authService=i,this.vendor_id="",this.type="Miscellaneous",-1==this.authService.current_user.permissions.indexOf("Create Sales")&&(this.notify.failNotification("You are not permitted to view the page"),this.goBack()),this.dbService.setTitle("Recieve Credit Sales Payment"),this.object=new o,this.object.type="Credit Sale Payment",n.queryParams.subscribe(e=>{console.log(e),this.object.item_code=e.item_code,this.object.payer=e.payer,this.vendor_id=e.recipient})}ngOnInit(){}setCustomer(e){this.object.payer=e.id}submit(){this.notify.showLoading();const e=new FormData;e.append("item_code",this.object.item_code),e.append("notes",this.object.notes),e.append("transaction_id",this.object.transaction_id),e.append("date",this.object.date),e.append("created_by",this.authService.current_user.id),e.append("type",this.object.type),e.append("payment_method",this.object.payment_method),e.append("amount",this.object.amount),e.append("payer",this.object.payer),e.append("created_on",this.dbService.getToday("timestamp")),e.append("display_name",this.authService.current_user.display_name),this.dbService.postData(e,"admin/saveIncomingPayment",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"0"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-1"===e.status?this.notify.failNotification("Server error. Please try again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.notify.successNotification("Payment saved successfully"),this.object=new o,this.object.type="Credit Sale Payment")},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}searchCustomers(){""!=this.customer_name.trim()&&null!=this.customer_name&&null!=this.customer_name?this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.customer_name+"&limit=10").subscribe(e=>{"-1"===e.status||(this.customer_objects=e.data)},e=>{}):this.customer_objects=[]}getCustomerPhone(){for(var e=0;e<this.customer_objects.length;e++){var t=this.customer_objects[e];if(t.name.trim().toLowerCase()==this.customer_name.trim().toLowerCase()){this.customer_phone=t.phone;break}}}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](i.c),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-receive-payment"]],decls:68,vars:8,consts:[[1,"content"],[1,"container"],[1,"card"],[1,"card-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,""],[1,"row","bottom-margin"],[1,"col-md-4"],["required","","type","date","name","date",3,"ngModel","ngModelChange"],["required","","type","text","name","amount",3,"ngModel","ngModelChange"],[3,"type","onFinish"],["required","","type","text","name","type",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","item_code",1,"form-control",3,"ngModel","ngModelChange"],["name","payment_method",3,"ngModel","ngModelChange"],["value","object.payment_method == 'Cash' ? 'N/A': ''","required","","type","text","name","transaction_id",1,"form-control",3,"ngModel","ngModelChange"],["name","notes","rows","3","cols","40",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"],["type","reset","name","reset","value","Reset",1,"btn","btn-warning"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"h4"),r["\u0275\u0275text"](3,"Receive Payment for a Credit Sale "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275elementStart"](6,"form",4,5),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),r["\u0275\u0275elementStart"](8,"div",6),r["\u0275\u0275elementStart"](9,"em"),r["\u0275\u0275text"](10,"Fields marked * are required"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",7),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"label"),r["\u0275\u0275text"](14,"Payment Date*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](15,"br"),r["\u0275\u0275elementStart"](16,"input",9),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275elementStart"](18,"label"),r["\u0275\u0275text"](19,"Amount Paid*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"br"),r["\u0275\u0275elementStart"](21,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.amount=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",8),r["\u0275\u0275elementStart"](23,"label"),r["\u0275\u0275text"](24,"Customer Name*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"app-select-customer",11),r["\u0275\u0275listener"]("onFinish",(function(e){return t.setCustomer(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"hr"),r["\u0275\u0275elementStart"](27,"div",7),r["\u0275\u0275elementStart"](28,"div",8),r["\u0275\u0275elementStart"](29,"label"),r["\u0275\u0275text"](30,"Purpose of Payment "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](31,"br"),r["\u0275\u0275elementStart"](32,"input",12),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.type=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div",8),r["\u0275\u0275elementStart"](34,"label"),r["\u0275\u0275text"](35,"Invoice Number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](36,"br"),r["\u0275\u0275elementStart"](37,"input",13),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.item_code=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"div",8),r["\u0275\u0275elementStart"](39,"label"),r["\u0275\u0275text"](40,"Payment Method*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](41,"br"),r["\u0275\u0275elementStart"](42,"div"),r["\u0275\u0275elementStart"](43,"select",14),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.payment_method=e})),r["\u0275\u0275elementStart"](44,"option"),r["\u0275\u0275text"](45,"Cash"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"option"),r["\u0275\u0275text"](47,"Mobile Money"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"option"),r["\u0275\u0275text"](49,"Cheque"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"option"),r["\u0275\u0275text"](51,"POS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"option"),r["\u0275\u0275text"](53,"Other"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](54,"hr"),r["\u0275\u0275elementStart"](55,"div",7),r["\u0275\u0275elementStart"](56,"div",8),r["\u0275\u0275elementStart"](57,"label"),r["\u0275\u0275text"](58,"Transaction Id/Reference/Cheque No.*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](59,"br"),r["\u0275\u0275elementStart"](60,"input",15),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.transaction_id=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](61,"div",8),r["\u0275\u0275elementStart"](62,"label"),r["\u0275\u0275text"](63,"Notes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](64,"br"),r["\u0275\u0275elementStart"](65,"textarea",16),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.notes=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](66,"input",17),r["\u0275\u0275element"](67,"input",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngModel",t.object.date),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.object.amount),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("type","select"),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",t.object.type),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.object.item_code),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.object.payment_method),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngModel",t.object.transaction_id),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.object.notes))},directives:[d.f,d.g,d.b,d.l,d.e,d.h,c.a,d.m,d.i,d.n],styles:[""]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(u)],i.f]}),e})();var h=n("nEHF"),b=n("NFbv");let y=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.b,p,h.a,b.a]]}),e})()}}]);