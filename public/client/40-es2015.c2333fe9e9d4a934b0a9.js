(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"2Xhf":function(e,t,s){"use strict";s.d(t,"a",(function(){return _}));var i=s("fXoL"),n=s("c92J"),r=s("1VJT"),a=s("BbYg"),c=s("ccyI"),o=s("ofXK"),h=s("3Pt+");function l(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}const d=function(e){return{"select-product-active":e}};function u(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",8),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const s=t.$implicit;return i["\u0275\u0275nextContext"](3).add(s)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,s=t.index,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,d,s==n.arrowkeyLocation)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name,"")}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"ul",6),i["\u0275\u0275template"](2,u,2,4,"li",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.objects)}}function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," Item not found. Check the spelling. "),i["\u0275\u0275elementEnd"]())}function p(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275elementStart"](1,"input",2),i["\u0275\u0275listener"]("keyup",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().param=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,l,3,0,"div",3),i["\u0275\u0275template"](3,f,3,1,"div",4),i["\u0275\u0275template"](4,m,2,0,"div",3),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.param),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length>0&&e.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search)}}let _=(()=>{class e{constructor(e,t,s,n){this.dbService=e,this.notify=t,this.localforage=s,this.authService=n,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="search",this.show="no",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.added=[],this.filter_param="",this.filter_results=[],this.local_products=[],this.show_shelf=!0,this.show_expiry=!0,this.show_stock=!0,this.arrowkeyLocation=0,this.num_items=10,$(".search_results").on("click",(function(){$("#sales_search").focus()}))}ngOnInit(){"list"!=this.type&&"select"!=this.type||this.list();let e=localStorage.getItem("show_select_product_expiry");this.show_expiry=null==e||"yes"==e;let t=localStorage.getItem("show_select_product_stock");this.show_stock=null==t||"yes"==t;let s=localStorage.getItem("show_select_product_shelf");this.show_shelf=null==s||"yes"==s}hideSearchResults(){this.param="",this.objects.length=0,this.is_finished_search=!1}ngOnChanges(){$("#sales_search").focus()}productSelected(){for(let e=0;e<this.objects.length;e++)if(this.objects[e].id==this.select_product){this.onAdd.emit(this.objects[e]);break}}addProduct(){$("#add_product_modal").modal("show")}productAdded(e){e.price=parseFloat(e.price),this.objects.push(e),this.onAdd.emit(e),$("#add_product_modal").modal("hide")}list(){this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getData("product/getList",this.authService.current_user).subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.filter_results="yes"==this.show?this.objects:[],this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1)},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1})}filterlist(){let e=this.filter_param;this.filter_results=null==e||null==e||e.length<1?"yes"==this.show?this.objects:[]:this.objects.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}add(e){this.onAdd.emit(e),this.is_finished_search=!1,$("#sales_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}search(){if(""==this.param.trim()||null==this.param||null==this.param)return this.objects=[],void(this.is_finished_search=!1);this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("product/searchActiveIngredients",this.authService.current_user,"param="+this.param+"&limit="+this.num_items).subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1,this.selected=null)},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1})}localSearch(){this.is_searching=!0,this.localforage.getItem(this.dbService.PRODUCT_LIST_KEY).subscribe(e=>{if(this.local_products=e,this.is_finished_search=!1,this.error_search=!1,this.param.length<1)return this.objects=[],this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,!1;if(null==this.local_products)return this.objects=[],this.notify.failNotification("No Products! Please refresh the page"),this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,!1;var t=this.param.toLowerCase().trim();let s=t.split(" ");var i=this.local_products.filter((function(e){for(let t=0;t<s.length;t++)if(-1==e.name.toLowerCase().indexOf(s[t])&&e.barcode!=s[t])return!1;return!0}));i.sort((function(e,s){let i=e.name.toLowerCase(),n=s.name.toLowerCase();return i.indexOf(t)<n.indexOf(t)?-1:i>n?1:0})),this.objects=i.slice(0,i.length>this.num_items?this.num_items-1:i.length),this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1},e=>{this.notify.failNotification("Failed to get products. Please refresh the page")})}select(e){this.selected=e,this.onFinish.emit(e)}highlightObject(e){this.objects.map(e=>{e.selected=!1}),this.highlightedObject=e,e.selected=!0}keyUp(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:let e=this.objects[this.arrowkeyLocation];null!=e&&null!=e&&this.add(e);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.search()}}focusCursor(){let e=$("#sales_search").val();$("#sales_search").val("").val(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](n.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.LocalForageService),i["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-active-ingredient"]],inputs:{btn_text:"btn_text",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","focus_search",4,"ngIf"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter active ingredient","required","","type","text","id","sales_search","name","search",3,"ngModel","keyup","ngModelChange"],[4,"ngIf"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],[1,"list-group"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,p,5,4,"div",0),2&e&&i["\u0275\u0275property"]("ngIf","search"==t.type)},directives:[o.j,h.b,h.l,h.e,h.h,o.i,o.h],styles:[""]}),e})()},RW1p:function(e,t,s){"use strict";s.r(t),s.d(t,"DrugInfoModule",(function(){return p}));var i=s("ofXK"),n=s("tyNb"),r=s("fXoL"),a=s("1VJT"),c=s("c92J"),o=s("2Xhf");function h(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"em",7),r["\u0275\u0275text"](1,"No selection made"),r["\u0275\u0275elementEnd"]())}function l(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",10),r["\u0275\u0275elementStart"](4,"b"),r["\u0275\u0275text"](5,"Indications:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"br"),r["\u0275\u0275text"](7),r["\u0275\u0275element"](8,"hr"),r["\u0275\u0275elementStart"](9,"b"),r["\u0275\u0275text"](10,"Contraindications:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](11,"br"),r["\u0275\u0275text"](12),r["\u0275\u0275element"](13,"hr"),r["\u0275\u0275elementStart"](14,"b"),r["\u0275\u0275text"](15,"Warnings & Cautions:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"br"),r["\u0275\u0275text"](17),r["\u0275\u0275element"](18,"hr"),r["\u0275\u0275elementStart"](19,"b"),r["\u0275\u0275text"](20,"Pregnancy & Breastfeeding:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"br"),r["\u0275\u0275text"](22),r["\u0275\u0275element"](23,"hr"),r["\u0275\u0275elementStart"](24,"b"),r["\u0275\u0275text"](25,"Dosage & Administrations:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"br"),r["\u0275\u0275text"](27),r["\u0275\u0275element"](28,"hr"),r["\u0275\u0275elementStart"](29,"b"),r["\u0275\u0275text"](30,"Information for patients:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](31,"br"),r["\u0275\u0275text"](32),r["\u0275\u0275element"](33,"hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",e.selected.name," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.indications_and_usage," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.Contraindications," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.warnings_and_cautions," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.pregnancy," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.dosage_and_administration," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.selected.information_for_patients," ")}}const d=[{path:"",component:(()=>{class e{constructor(e,t){this.notify=e,this.dbService=t,this.selected=null,this.dbService.setTitle("Drug Information")}ngOnInit(){}goBack(){window.history.back()}activeIngredientSelected(e){this.selected=e,console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-drug-info"]],decls:11,vars:3,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],[3,"type","onAdd"],["class","text-muted",4,"ngIf"],["class","card",4,"ngIf"],[1,"text-muted"],[1,"card"],[1,"card-header"],[1,"card-body"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Drug Information"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6," Type the name of the active ingredient and click or press enter to select it. "),r["\u0275\u0275element"](7,"br"),r["\u0275\u0275elementStart"](8,"app-select-active-ingredient",4),r["\u0275\u0275listener"]("onAdd",(function(e){return t.activeIngredientSelected(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,h,2,0,"em",5),r["\u0275\u0275template"](10,l,34,7,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("type","search"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.selected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!=t.selected))},directives:[o.a,i.j],styles:[""]}),e})()}];let u=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.f.forChild(d)],n.f]}),e})();var f=s("nEHF"),m=s("nBlB");let p=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,u,f.a,m.a]]}),e})()},nBlB:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("ofXK"),n=s("nEHF"),r=s("fXoL");let a=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,n.a]]}),e})()}}]);