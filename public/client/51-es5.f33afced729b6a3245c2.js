function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{TYx5:function(e,t,n){"use strict";n.r(t),n.d(t,"RemotePurchaseModule",(function(){return R}));var l=n("ofXK"),r=n("tyNb"),i=n("fXoL"),a=n("sGMU"),d=n("mS1k"),o=n("n+He"),m=n("5G6A"),s=n("YrVD"),c=n("c92J"),u=n("I/3d"),p=n("1VJT"),h=n("bgkY"),f=n("ccyI"),_=n("4j6H"),g=n("3Pt+"),S=n("KIc4"),v=n("/9/o");function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"td"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"td"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"td"),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"td"),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"td"),i["\u0275\u0275elementStart"](18,"button",60),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().editItem(e)})),i["\u0275\u0275element"](19,"i",61),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"button",62),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().removeItem(e)})),i["\u0275\u0275element"](21,"i",63),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var l=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](l.product_name),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",l.stock," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.quantity," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](l.unit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.price," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"]((l.price*l.quantity).toFixed(2)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.markup," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.selling_price," ")}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h5"),i["\u0275\u0275text"](1),i["\u0275\u0275element"](2,"br"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.new_item.name,"")}}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",64),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function b(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",65),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).new_unit=e})),i["\u0275\u0275elementEnd"]()}if(2&e){var l=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngModel",l.new_unit)}}function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"table",48),i["\u0275\u0275elementStart"](1,"tr"),i["\u0275\u0275elementStart"](2,"td"),i["\u0275\u0275elementStart"](3,"label"),i["\u0275\u0275text"](4,"Current Stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"tr"),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275elementStart"](9,"label"),i["\u0275\u0275text"](10,"Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"td"),i["\u0275\u0275elementStart"](12,"input",49),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_quantity=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"tr"),i["\u0275\u0275elementStart"](14,"td"),i["\u0275\u0275elementStart"](15,"label"),i["\u0275\u0275text"](16,"Unit Cost"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"td"),i["\u0275\u0275elementStart"](18,"input",50),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"tr"),i["\u0275\u0275elementStart"](20,"td"),i["\u0275\u0275elementStart"](21,"label"),i["\u0275\u0275text"](22,"Unit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"td"),i["\u0275\u0275elementStart"](24,"select",51),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().unit_selected=e})),i["\u0275\u0275template"](25,E,2,2,"option",52),i["\u0275\u0275elementStart"](26,"option",53),i["\u0275\u0275text"](27,"Other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,b,1,1,"input",54),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"tr"),i["\u0275\u0275elementStart"](30,"td"),i["\u0275\u0275elementStart"](31,"label"),i["\u0275\u0275text"](32,"Expiry date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"td"),i["\u0275\u0275elementStart"](34,"input",55),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_expiry=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"tr"),i["\u0275\u0275elementStart"](36,"td"),i["\u0275\u0275elementStart"](37,"label"),i["\u0275\u0275text"](38,"Markup"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"td"),i["\u0275\u0275elementStart"](40,"input",56),i["\u0275\u0275listener"]("blur",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("keyup",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_markup=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"tr"),i["\u0275\u0275elementStart"](42,"td"),i["\u0275\u0275elementStart"](43,"label"),i["\u0275\u0275text"](44,"Selling Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"td"),i["\u0275\u0275elementStart"](46,"input",57),i["\u0275\u0275listener"]("focus",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewMarkup()}))("keyup",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewMarkup()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_selling_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var l=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"]("",l.new_stock," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_quantity),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_price),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.unit_selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",l.units),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf","other"==l.unit_selected),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_expiry),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_markup),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_selling_price)}}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",64),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",65),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).new_unit=e})),i["\u0275\u0275elementEnd"]()}if(2&e){var l=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngModel",l.new_unit)}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"td"),i["\u0275\u0275elementStart"](10,"a",72),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).removeBatchItem(e)})),i["\u0275\u0275element"](11,"i",63),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12," \xa0 "),i["\u0275\u0275elementStart"](13,"a",73),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).editBatchItem(e)})),i["\u0275\u0275element"](14,"i",61),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var l=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.batch_number," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.quantity," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.expiry," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",l.barcode," ")}}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"table",48),i["\u0275\u0275elementStart"](1,"tr"),i["\u0275\u0275elementStart"](2,"td"),i["\u0275\u0275elementStart"](3,"label"),i["\u0275\u0275text"](4,"Current Stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"tr"),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275elementStart"](9,"label"),i["\u0275\u0275text"](10,"Unit Cost"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"td"),i["\u0275\u0275elementStart"](12,"input",50),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"tr"),i["\u0275\u0275elementStart"](14,"td"),i["\u0275\u0275elementStart"](15,"label"),i["\u0275\u0275text"](16,"Unit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"td"),i["\u0275\u0275elementStart"](18,"select",51),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().unit_selected=e})),i["\u0275\u0275template"](19,k,2,2,"option",52),i["\u0275\u0275elementStart"](20,"option",53),i["\u0275\u0275text"](21,"Other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](22,C,1,1,"input",54),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"tr"),i["\u0275\u0275elementStart"](24,"td",66),i["\u0275\u0275elementStart"](25,"tr"),i["\u0275\u0275elementStart"](26,"th"),i["\u0275\u0275text"](27,"Batch Number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"th"),i["\u0275\u0275text"](29,"Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"th"),i["\u0275\u0275text"](31,"Expiry"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"th"),i["\u0275\u0275text"](33,"Barcode"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"th"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"tr"),i["\u0275\u0275elementStart"](36,"td"),i["\u0275\u0275elementStart"](37,"input",67),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_batch_item.batch_number=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"td"),i["\u0275\u0275elementStart"](39,"input",68),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_batch_item.quantity=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"td"),i["\u0275\u0275elementStart"](41,"input",69),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_batch_item.expiry=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](42,"td"),i["\u0275\u0275elementStart"](43,"input",70),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_batch_item.barcode=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](44,"td"),i["\u0275\u0275elementStart"](45,"a",71),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addToBatchItems()})),i["\u0275\u0275text"](46,"Add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](47,I,15,4,"tr",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"tr"),i["\u0275\u0275elementStart"](49,"td"),i["\u0275\u0275elementStart"](50,"label"),i["\u0275\u0275text"](51,"Total Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"td"),i["\u0275\u0275text"](53),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"tr"),i["\u0275\u0275elementStart"](55,"td"),i["\u0275\u0275elementStart"](56,"label"),i["\u0275\u0275text"](57,"Markup"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"td"),i["\u0275\u0275elementStart"](59,"input",56),i["\u0275\u0275listener"]("blur",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("keyup",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_markup=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"tr"),i["\u0275\u0275elementStart"](61,"td"),i["\u0275\u0275elementStart"](62,"label"),i["\u0275\u0275text"](63,"Selling Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"td"),i["\u0275\u0275elementStart"](65,"input",57),i["\u0275\u0275listener"]("focus",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewPrice()}))("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewMarkup()}))("keyup",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().setNewMarkup()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_selling_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var l=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"]("",l.new_stock," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_price),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.unit_selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",l.units),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf","other"==l.unit_selected),i["\u0275\u0275advance"](15),i["\u0275\u0275property"]("ngModel",l.new_batch_item.batch_number),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",l.new_batch_item.quantity),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",l.new_batch_item.expiry),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",l.new_batch_item.barcode),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",l.batch_items),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"]("",l.new_quantity," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_markup),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",l.new_selling_price)}}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"No held items"),i["\u0275\u0275elementEnd"]())}var V=function(e){return{"table-primary":e}};function F(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr",78),i["\u0275\u0275listener"]("dblclick",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).unhold(e)}))("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).selectHeldItem(e)})),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var l=t.$implicit,r=t.index,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,V,a.selectedHeldItem==l)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",r+1," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",l.user," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",l.time," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",l.items.length," ")}}function N(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",n.product_name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",n.quantity," ")}}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",12),i["\u0275\u0275elementStart"](1,"thead"),i["\u0275\u0275elementStart"](2,"tr"),i["\u0275\u0275elementStart"](3,"th"),i["\u0275\u0275text"](4,"Item"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"th"),i["\u0275\u0275text"](6,"Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"tbody"),i["\u0275\u0275template"](8,N,5,2,"tr",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",n.selectedHeldItem.items)}}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"div",74),i["\u0275\u0275elementStart"](2,"table",12),i["\u0275\u0275elementStart"](3,"thead"),i["\u0275\u0275elementStart"](4,"tr"),i["\u0275\u0275elementStart"](5,"th"),i["\u0275\u0275text"](6,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"th"),i["\u0275\u0275text"](8,"Saved by"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"th"),i["\u0275\u0275text"](10,"Date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275text"](12,"Num. Items"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"tbody"),i["\u0275\u0275template"](14,F,9,7,"tr",75),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",76),i["\u0275\u0275template"](16,P,9,1,"table",77),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngForOf",n.held_items),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null!=n.selectedHeldItem)}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h5"),i["\u0275\u0275text"](1),i["\u0275\u0275element"](2,"br"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.new_item.name,"")}}function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",64),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function H(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",65),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().new_unit=e})),i["\u0275\u0275elementEnd"]()}if(2&e){var l=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngModel",l.new_unit)}}var A,B,Q,D=[{path:"",component:(A=function(){function e(t,n,l,r,d,o){_classCallCheck(this,e),this.dbService=t,this.router=n,this.firestore=l,this.notify=r,this.socket=d,this.authService=o,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.url="purchase/findById",this.items=[],this.new_item=null,this.new_quantity=null,this.new_price=null,this.purchase_total=0,this.total_selling=0,this.difference=0,this.units=["ampoule","bottle","box","capsule","carton","glove","inhaler","pack","pessary","piece","roll","strip","suppository","syringe","tablet","tube","vial"],this.unit_selected="",this.general_markup=1.33,this.held_items=[],this.selectedHeldItem=null,this.entry_mode="single",this.batch_items=[],null!=this.id&&null!=this.id||(this.purchase=new a.a,this.purchase.createdAt=this.dbService.getToday()),-1==this.authService.current_user.permissions.indexOf("Receive Purchases")&&(this.notify.failNotification("You are not permitted to view the page"),this.dbService.goBackHome()),this.dbService.setTitle("Receive Purchase"),this.units=this.dbService.units,this.new_batch_item=new s.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.ts=this.dbService.getToday(),null!=localStorage.getItem("markup")&&(this.general_markup=parseFloat(localStorage.getItem("markup"))),null==this.id||null==this.id||this.getObject(this.id),this.held_items=JSON.parse(localStorage.getItem("purchase_heldItems")),null==this.held_items&&(this.held_items=[])}},{key:"getObject",value:function(e){var t=this;this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe((function(e){t.purchase=e.data,t.is_loading=!1,t.is_loaded=!0,t.error=!1}),(function(e){t.is_loading=!1,t.error=!0,t.is_loaded=!1}))}},{key:"vendorSelected",value:function(e){this.purchase.vendor=e,this.selected_vendor_id=e.id,console.log(e)}},{key:"trackBy",value:function(e,t){return t.product._id}},{key:"productSelected",value:function(e){this.inList(e)?this.notify.failNotification("Item already in the list"):(console.log(e),this.new_item=e,this.new_quantity="",this.new_expiry=e.expiry,this.new_price=e.cost_price,this.new_selling_price=e.price,this.unit_selected=e.unit,this.new_unit=e.unit,this.new_stock=e.stock,this.new_markup=this.general_markup,$("#enter_purchase_quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#enter_purchase_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()})))}},{key:"inList",value:function(e){for(var t=!1,n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}return t}},{key:"editItem",value:function(e){this.new_item=e.product,this.items.splice(this.items.indexOf(e),1),this.new_item=e.product,this.new_quantity=e.quantity,this.new_price=e.price,this.new_expiry=e.expiry,this.new_markup=e.markup,this.new_selling_price=e.selling_price,this.batch_items=e.batch_items,$("#enter_purchase_quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#enter_purchase_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}},{key:"addItem",value:function(){if("multiple"==this.entry_mode&&this.batch_items.length<1)return alert("Please add at least one batch and expiry. Enter the batch number, expiry, and quantity and then click the Add button .\n      . Otherwise choose the 'Single Entry Mode' if you just want to enter a single quantity."),!1;if(this.inList(this.new_item))this.notify.failNotification("Item already in the list");else{var e=new o.a;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.markup=this.new_markup,e.price=this.new_price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_price,e.selling_price=this.new_selling_price,e.expiry=this.new_expiry,e.product=this.new_item,e.stock=this.new_stock,e.batch_items=this.batch_items,e.unit="other"!=this.unit_selected?this.unit_selected:this.new_unit,this.items.push(e),this.new_item=new d.a,this.new_quantity=null,this.new_price=null,this.new_item=null,this.new_expiry="",this.new_markup=null,this.new_selling_price=null,this.new_unit=null,this.batch_items=[],this.getTotal(),$("#enter_purchase_quantity_modal").modal("hide")}this.ts=this.dbService.getToday("timestamp_string")}},{key:"resetMarkup",value:function(){var e=this;this.items.map((function(t){t.markup=e.general_markup}))}},{key:"addNewProduct",value:function(){$("#add_new_product_modal").modal({backdrop:"static",keyboard:!1}),$("#add_new_product_modal").on("shown.bs.modal",(function(){$("#product_form_name").focus()}))}},{key:"setMarkup",value:function(e){e.markup=(parseFloat(e.selling_price)/parseFloat(e.price)).toFixed(2)}},{key:"setSellingPrice",value:function(e){e.selling_price=(parseFloat(e.markup)*parseFloat(e.price)).toFixed(2)}},{key:"setNewMarkup",value:function(){this.new_markup=(this.new_selling_price/parseFloat(this.new_price)).toFixed(2)}},{key:"removeItem",value:function(e){this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.ts=this.dbService.getToday("timestamp_string")}},{key:"changeQuantity",value:function(e){var t=window.prompt("Enter new quantity");null!=t&&""!=t.trim()&&null!=t&&(e.quantity=parseFloat(t)),this.getTotal()}},{key:"changePrice",value:function(e){var t=window.prompt("Enter new price");null!=t&&""!=t.trim()&&null!=t&&(e.price=parseFloat(t)),this.getTotal()}},{key:"changeMarkup",value:function(e){var t=window.prompt("Enter new markup");null!=t&&""!=t.trim()&&null!=t&&(e.markup=parseFloat(t))}},{key:"getTotal",value:function(){var e=0,t=0;this.items.map((function(n){e+=n.quantity*n.price,t+=n.quantity*n.selling_price})),this.purchase_total=e.toFixed(2),this.total_selling=t.toFixed(2),this.difference=(t-e).toFixed(2)}},{key:"setQuantities",value:function(){var e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}},{key:"setPrices",value:function(){var e=0,t=this;$(".prices").each((function(){t.items[e].price=$(this).val(),t.setSellingPrice(t.items[e]),e++})),this.getTotal()}},{key:"setMarkups",value:function(){var e=0,t=this;$(".markups").each((function(){t.items[e].markup=$(this).val(),e++})),this.getTotal()}},{key:"setSellingPrices",value:function(){var e=0,t=this;$(".selling_prices").each((function(){t.items[e].selling_price=$(this).val(),e++})),this.getTotal()}},{key:"saveItems",value:function(){var e=this;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(null==this.purchase.vendor||null==this.purchase.vendor)return this.notify.failNotification("Please select a vendor"),!1;this.notify.showLoading();var t=[],n=[],l=[],r=[],i=[],a=[],d=[],o=[];this.dbService.getToday("timestamp_string");for(var m=function(m){var s=e.items[m];t.push(s.product_id),n.push(s.price),l.push(s.quantity),i.push(s.markup),r.push(s.unit),a.push(s.selling_price),d.push(s.expiry),s.batch_items.map((function(e){e.product=s.product_id,o.push(e)}))},s=0;s<this.items.length;s++)m(s);var c={status:"Pending"};new FormData,c.products=t.join("||"),c.prices=n.join("||"),c.quantities=l.join("||"),c.units=r.join("||"),c.expiries=d.join("||"),c.markups=i.join("||"),c.selling_prices=a.join("||"),c.created_by=this.authService.current_user.id,c.update_prices="yes",c.batch_details=JSON.stringify(o),c.vendor=this.purchase.vendor.id,c.invoice=this.purchase.invoice,c.date=this.purchase.createdAt,c.created_on=this.dbService.getToday("timestamp"),c.vendor_name=this.purchase.vendor.name,c.display_name=this.authService.current_user.display_name,c.display_name=this.authService.current_user.display_name,c.company_id=this.authService.current_user.company_id,this.firestore.collection("remote_purchases").add(c).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.notify.hideLoading()}},{key:"setNewPrice",value:function(){this.new_selling_price=(this.new_price*this.new_markup).toFixed(2)}},{key:"productAdded",value:function(e){$("#add_new_product_modal").modal("hide"),this.productSelected(e)}},{key:"ngOnDestroy",value:function(){this.items.length>0&&(this.holdItems(),this.notify.successNotification("Receipt held automatically"))}},{key:"holdItems",value:function(){var e=new m.a;e.items=this.items,e.user=this.authService.current_user.display_name,e.time=this.dbService.getToday("timestamp"),this.held_items.push(e),localStorage.setItem("purchase_heldItems",JSON.stringify(this.held_items)),this.items=[],this.getTotal()}},{key:"viewHeldItems",value:function(){$("#purchase_held_items_modal").modal({backdrop:"static",keyboard:!1}),this.held_items.length>0&&(this.selectedHeldItem=this.held_items[0])}},{key:"selectHeldItem",value:function(e){this.selectedHeldItem=e}},{key:"unhold",value:function(e){this.items=e.items,this.held_items.splice(this.held_items.indexOf(e),1),localStorage.setItem("purchase_heldItems",JSON.stringify(this.held_items)),$("#purchase_held_items_modal").modal("hide"),this.getTotal()}},{key:"unholdSelected",value:function(){this.unhold(this.selectedHeldItem)}},{key:"clearHeldItems",value:function(){localStorage.removeItem("heldItems"),this.selectedHeldItem=null,this.held_items=[],$("#held_items_modal").modal("hide")}},{key:"addToBatchItems",value:function(){var e=this;if(isNaN(this.new_batch_item.quantity))return alert("Only numbers allowed for quantity"),!1;this.batch_items.push(this.new_batch_item),this.new_quantity=0,this.new_batch_item=new s.a,this.batch_items.map((function(t){e.new_quantity+=parseInt(t.quantity)}))}},{key:"removeBatchItem",value:function(e){var t=this;this.batch_items.splice(this.batch_items.indexOf(e),1),this.new_quantity=0,this.new_batch_item=new s.a,this.batch_items.map((function(e){t.new_quantity+=parseInt(e.quantity)}))}},{key:"editBatchItem",value:function(e){var t=this;this.batch_items.splice(this.batch_items.indexOf(e),1),this.new_quantity=0,this.new_batch_item=e,this.batch_items.map((function(e){t.new_quantity+=parseInt(e.quantity)}))}},{key:"cancel",value:function(){this.items=[],this.getTotal()}},{key:"goBack",value:function(){window.history.back()}},{key:"goToPayment",value:function(){$("#make_payment_modal").modal("hide"),this.router.navigate(["/add_purchase_payment"],{queryParams:{recipient:this.selected_vendor_id}})}}]),e}(),A.\u0275fac=function(e){return new(e||A)(i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](r.c),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](f.a))},A.\u0275cmp=i["\u0275\u0275defineComponent"]({type:A,selectors:[["app-remote-purchase"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:178,vars:28,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],[3,"live_server","timestamp","type","show","onAdd"],[1,"col-12"],[1,""],[1,"card"],[1,"card-header"],["type","text","size","6","name","general_markup",3,"ngModel","ngModelChange"],[1,"card-body","table-responsive","purchase_sales_items"],[1,"table","table-striped","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[1,"card","sales-fixed-bottom"],[1,"card-body"],["required","","type","date","name","createdAt",3,"ngModel","ngModelChange"],[3,"type","onFinish"],["required","","name","invoice",3,"ngModel","ngModelChange"],[1,"text-danger"],["title","You can record payment when you save the invoice",1,"badge","badge-info"],[1,"fa","fa-info-cirle"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-info",3,"disabled","click"],[1,"btn","btn-info",3,"click"],["id","enter_purchase_quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],[4,"ngIf"],[1,"modal-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["class","table table-bordered table-striped",4,"ngIf"],["type","submit","name","submit","value","Add Item",1,"btn","btn-success","waves-effect"],["type","button","data-dismiss","modal",1,"btn","btn-warning","waves-effect"],["id","add_new_product_modal","tabindex","-1","role","dialog",1,"modal","fade","in"],["role","document",1,"modal-dialog","modal-lg"],[3,"onFinish"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","purchase_held_items_modal","tabindex","-1","role","dialog",1,"modal","fade","in"],["class","row",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning"],["role","document",1,"modal-dialog"],[1,"table","table-bordered","table-striped"],["autocomplete","off","type","text","required","","name","new_quantity","id","qtt","placeholder","Quantity",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","required","","name","new_price","placeholder","Cost",3,"ngModel","ngModelChange"],["name","unit",1,"",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","other"],["class","form-control","type","text","name","unit",3,"ngModel","ngModelChange",4,"ngIf"],["required","","type","date","name","expiry",3,"ngModel","ngModelChange"],["autocomplete","off","required","","type","text","name","new_markup",3,"ngModel","blur","change","keyup","ngModelChange"],["autocomplete","off","required","","type","text","name","new_selling_price",3,"ngModel","focus","change","keyup","ngModelChange"],["id","make_payment_modal","tabindex","-1","role","dialog",1,"modal","fade"],["type","button",1,"btn","btn-success",3,"click"],["type","button","title","edit the markup, quantity, unit price, expiry or selling price of this item",1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],["type","button","title","remove item from list",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-remove"],[3,"value"],["type","text","name","unit",1,"form-control",3,"ngModel","ngModelChange"],["colspan","2"],["type","text","name","batch_number",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","quantity",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","expiry",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","barcode",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-danger",3,"click"],[1,"text-primary",3,"click"],[1,"col-7","fixed_height"],[3,"ngClass","dblclick","click",4,"ngFor","ngForOf"],[1,"col-5","fixed_height"],["class","table table-striped table-bordered table-hover",4,"ngIf"],[3,"ngClass","dblclick","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"b"),i["\u0275\u0275text"](5,"Receive Purchased Items Remotely "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"app-select-product",5),i["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",2),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"div",7),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275text"](14," General Markup: "),i["\u0275\u0275elementStart"](15,"input",10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.general_markup=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",11),i["\u0275\u0275elementStart"](17,"table",12),i["\u0275\u0275elementStart"](18,"thead"),i["\u0275\u0275elementStart"](19,"tr"),i["\u0275\u0275elementStart"](20,"th"),i["\u0275\u0275text"](21,"Product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"th"),i["\u0275\u0275text"](23,"Curr. Stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"th"),i["\u0275\u0275text"](25,"Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"th"),i["\u0275\u0275text"](27,"Unit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"th"),i["\u0275\u0275text"](29,"Cost"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"th"),i["\u0275\u0275text"](31,"Total"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"th"),i["\u0275\u0275text"](33,"Markup"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"th"),i["\u0275\u0275text"](35,"Selling Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](36,"th"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"tbody"),i["\u0275\u0275template"](38,y,22,8,"tr",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"div",14),i["\u0275\u0275elementStart"](40,"div",15),i["\u0275\u0275elementStart"](41,"div"),i["\u0275\u0275elementStart"](42,"label"),i["\u0275\u0275text"](43,"Date of Purchase*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](44,"input",16),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.purchase.createdAt=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](45," | "),i["\u0275\u0275elementStart"](46,"app-select-vendor",17),i["\u0275\u0275listener"]("onFinish",(function(e){return t.vendorSelected(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"label"),i["\u0275\u0275text"](48,"Invoice #"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"input",18),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.purchase.invoice=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"div",7),i["\u0275\u0275elementStart"](51,"b",19),i["\u0275\u0275text"](52),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53," | "),i["\u0275\u0275elementStart"](54,"label",20),i["\u0275\u0275text"](55,"Payment: "),i["\u0275\u0275element"](56,"i",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](57),i["\u0275\u0275elementStart"](58,"button",22),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275text"](59,"Cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"button",23),i["\u0275\u0275listener"]("click",(function(){return t.saveItems()})),i["\u0275\u0275text"](61,"Save"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"span",7),i["\u0275\u0275elementStart"](63,"button",24),i["\u0275\u0275listener"]("click",(function(){return t.holdItems()})),i["\u0275\u0275text"](64,"Hold"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](65,"button",25),i["\u0275\u0275listener"]("click",(function(){return t.viewHeldItems()})),i["\u0275\u0275text"](66),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"div",26),i["\u0275\u0275elementStart"](68,"div",27),i["\u0275\u0275elementStart"](69,"div",28),i["\u0275\u0275elementStart"](70,"div",29),i["\u0275\u0275template"](71,x,3,1,"h5",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"div",31),i["\u0275\u0275elementStart"](73,"form",32,33),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.addItem()})),i["\u0275\u0275template"](75,w,47,9,"table",34),i["\u0275\u0275template"](76,M,66,13,"table",34),i["\u0275\u0275element"](77,"input",35),i["\u0275\u0275elementStart"](78,"button",36),i["\u0275\u0275text"](79,"Cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](80,"div",37),i["\u0275\u0275elementStart"](81,"div",38),i["\u0275\u0275elementStart"](82,"div",28),i["\u0275\u0275elementStart"](83,"div",29),i["\u0275\u0275elementStart"](84,"h5"),i["\u0275\u0275text"](85,"Add new product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](86,"div",31),i["\u0275\u0275elementStart"](87,"app-product-form",39),i["\u0275\u0275listener"]("onFinish",(function(e){return t.productAdded(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](88,"div",40),i["\u0275\u0275elementStart"](89,"button",41),i["\u0275\u0275text"](90,"Cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](91,"div",42),i["\u0275\u0275elementStart"](92,"div",38),i["\u0275\u0275elementStart"](93,"div",28),i["\u0275\u0275elementStart"](94,"div",29),i["\u0275\u0275text"](95," Held Items "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](96,"div",31),i["\u0275\u0275template"](97,q,2,0,"span",30),i["\u0275\u0275template"](98,O,17,2,"div",43),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](99,"div",40),i["\u0275\u0275elementStart"](100,"button",44),i["\u0275\u0275listener"]("click",(function(){return t.unholdSelected()})),i["\u0275\u0275text"](101,"Unhold Selected"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"button",45),i["\u0275\u0275listener"]("click",(function(){return t.clearHeldItems()})),i["\u0275\u0275text"](103,"Delete All"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](104,"button",46),i["\u0275\u0275text"](105,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](106,"div",26),i["\u0275\u0275elementStart"](107,"div",47),i["\u0275\u0275elementStart"](108,"div",28),i["\u0275\u0275elementStart"](109,"div",29),i["\u0275\u0275template"](110,T,3,1,"h5",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](111,"div",31),i["\u0275\u0275elementStart"](112,"form",32,33),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.addItem()})),i["\u0275\u0275elementStart"](114,"table",48),i["\u0275\u0275elementStart"](115,"tr"),i["\u0275\u0275elementStart"](116,"td"),i["\u0275\u0275elementStart"](117,"label"),i["\u0275\u0275text"](118,"Current Stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](119,"td"),i["\u0275\u0275text"](120),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](121,"tr"),i["\u0275\u0275elementStart"](122,"td"),i["\u0275\u0275elementStart"](123,"label"),i["\u0275\u0275text"](124,"Quantity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](125,"td"),i["\u0275\u0275elementStart"](126,"input",49),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_quantity=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](127,"tr"),i["\u0275\u0275elementStart"](128,"td"),i["\u0275\u0275elementStart"](129,"label"),i["\u0275\u0275text"](130,"Unit Cost"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](131,"td"),i["\u0275\u0275elementStart"](132,"input",50),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](133,"tr"),i["\u0275\u0275elementStart"](134,"td"),i["\u0275\u0275elementStart"](135,"label"),i["\u0275\u0275text"](136,"Unit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](137,"td"),i["\u0275\u0275elementStart"](138,"select",51),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.unit_selected=e})),i["\u0275\u0275template"](139,j,2,2,"option",52),i["\u0275\u0275elementStart"](140,"option",53),i["\u0275\u0275text"](141,"Other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](142,H,1,1,"input",54),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](143,"tr"),i["\u0275\u0275elementStart"](144,"td"),i["\u0275\u0275elementStart"](145,"label"),i["\u0275\u0275text"](146,"Expiry date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](147,"td"),i["\u0275\u0275elementStart"](148,"input",55),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.new_expiry=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](149,"tr"),i["\u0275\u0275elementStart"](150,"td"),i["\u0275\u0275elementStart"](151,"label"),i["\u0275\u0275text"](152,"Markup"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](153,"td"),i["\u0275\u0275elementStart"](154,"input",56),i["\u0275\u0275listener"]("blur",(function(){return t.setNewPrice()}))("change",(function(){return t.setNewPrice()}))("keyup",(function(){return t.setNewPrice()}))("ngModelChange",(function(e){return t.new_markup=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](155,"tr"),i["\u0275\u0275elementStart"](156,"td"),i["\u0275\u0275elementStart"](157,"label"),i["\u0275\u0275text"](158,"Selling Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](159,"td"),i["\u0275\u0275elementStart"](160,"input",57),i["\u0275\u0275listener"]("focus",(function(){return t.setNewPrice()}))("change",(function(){return t.setNewMarkup()}))("keyup",(function(){return t.setNewMarkup()}))("ngModelChange",(function(e){return t.new_selling_price=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](161,"input",35),i["\u0275\u0275elementStart"](162,"button",36),i["\u0275\u0275text"](163,"Cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](164,"div",58),i["\u0275\u0275elementStart"](165,"div",47),i["\u0275\u0275elementStart"](166,"div",28),i["\u0275\u0275elementStart"](167,"div",29),i["\u0275\u0275elementStart"](168,"h5"),i["\u0275\u0275text"](169,"Would you like to record payment for this purchase now? "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](170,"div",31),i["\u0275\u0275elementStart"](171,"b"),i["\u0275\u0275text"](172,"You can always add payment later. Click on the 'Accounts' menu on the left side bar. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](173,"div",40),i["\u0275\u0275elementStart"](174,"button",59),i["\u0275\u0275listener"]("click",(function(){return t.goToPayment()})),i["\u0275\u0275text"](175,"Yes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](176,"button",41),i["\u0275\u0275text"](177,"No, I'll do it later"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("live_server",!0)("timestamp",t.ts)("type","search")("show","no"),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngModel",t.general_markup),i["\u0275\u0275advance"](23),i["\u0275\u0275property"]("ngForOf",t.items),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.purchase.createdAt),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("type","select"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.purchase.invoice),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Total: ",t.purchase_total,""),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" Profit: ",t.difference," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("disabled",t.items.length<1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Held Items (",t.held_items.length,")"),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",null!=t.new_item),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf","single"==t.entry_mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","multiple"==t.entry_mode),i["\u0275\u0275advance"](21),i["\u0275\u0275property"]("ngIf",t.held_items.length<1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.held_items.length>0),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngIf",null!=t.new_item),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate1"]("",t.new_stock," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.new_quantity),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.new_price),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.unit_selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.units),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf","other"==t.unit_selected),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.new_expiry),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.new_markup),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.new_selling_price))},directives:[_.a,g.b,g.e,g.h,l.i,g.l,S.a,l.j,g.f,g.g,v.a,g.m,g.i,g.n,l.h],styles:[""]}),A)}],U=((B=function e(){_classCallCheck(this,e)}).\u0275mod=i["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||B)},imports:[[r.f.forChild(D)],r.f]}),B),J=n("nBlB"),L=n("nEHF"),Y=n("wDHj"),R=((Q=function e(){_classCallCheck(this,e)}).\u0275mod=i["\u0275\u0275defineNgModule"]({type:Q}),Q.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Q)},imports:[[l.b,U,J.a,L.a,Y.a]]}),Q)},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("ofXK"),r=n("nEHF"),i=n("fXoL"),a=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.b,r.a]]}),e}()},wDHj:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var l=n("ofXK"),r=n("nEHF"),i=n("6QD7"),a=n("fXoL"),d=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.b,r.a,i.b],i.b]}),e}()}}]);