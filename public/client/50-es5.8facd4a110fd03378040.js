function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{ESCD:function(e,t,n){"use strict";n.r(t),n.d(t,"RolesModule",(function(){return x}));var i=n("ofXK"),r=n("tyNb"),o=n("fXoL"),a=n("c92J"),l=n("1VJT"),s=n("ccyI"),d=n("OA5k"),c=n("hiAm");function f(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"app-add-role",10),o["\u0275\u0275listener"]("onFinish",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().roleAdded(e)})),o["\u0275\u0275elementEnd"]()}}function u(e,t){1&e&&o["\u0275\u0275element"](0,"app-loading")}function m(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"button",16),o["\u0275\u0275text"](2," Menu "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"ul",17),o["\u0275\u0275elementStart"](4,"li",18),o["\u0275\u0275elementStart"](5,"a",19),o["\u0275\u0275text"](6,"Edit Permissions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"li",18),o["\u0275\u0275elementStart"](8,"a",20),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](2).deleteRole(e)})),o["\u0275\u0275text"](9,"Delete"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate1"]("routerLink","/edit_role/",i.role_id,"")}}function p(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275template"](4,m,10,1,"div",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",i+1," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.can_edit),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",n.role_name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.description)}}function h(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"table",11),o["\u0275\u0275elementStart"](4,"thead"),o["\u0275\u0275elementStart"](5,"tr"),o["\u0275\u0275element"](6,"th"),o["\u0275\u0275element"](7,"th"),o["\u0275\u0275elementStart"](8,"th"),o["\u0275\u0275text"](9,"Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"th"),o["\u0275\u0275text"](11,"Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,p,9,4,"tr",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](13,"div",13),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("Showing ",n.roles.length,"/",n.total," items"),o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("ngForOf",n.roles)}}var v,g,y,S=[{path:"",component:(v=function(){function e(t,n,i,r){_classCallCheck(this,e),this.dbService=t,this.router=n,this.notify=i,this.authService=r,this.roles=[],this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.url="admin/getRolesLimit",this.limit=100,this.add_role=!1,this.can_edit=!0,this.can_create=!0,this.can_delete=!0,-1==this.authService.current_user.permissions.indexOf("Manage Staff")&&(this.goBack(),this.notify.failNotification("Not allowed to view the page")),this.dbService.setTitle("User Roles")}return _createClass(e,[{key:"ngOnInit",value:function(){this.start()}},{key:"start",value:function(){var e=this;this.is_loaded=!1,this.is_loading=!0,this.dbService.getData(this.url,this.authService.current_user).subscribe((function(t){"-1"===t.status&&(e.notify.failNotification("Internal server error. Please check to make sure the registration number does not already exist"),e.error=!0),"-9"===t.status?(e.notify.showNotification("You are not permitted to perform this action","fail",3e3),e.error=!0):(e.limit=t.limit,e.roles=t.data,e.offset=e.roles.length,e.total=t.total,e.is_loaded=!0,e.error=!1),e.is_loading=!1}),(function(t){e.notify.noConnectionNotification(),e.is_loaded=!1,e.is_loading=!1,e.error=!0}))}},{key:"addMoreItems",value:function(e){var t=this;e.map((function(e){t.roles.push(e)}))}},{key:"roleAdded",value:function(e){this.router.navigate(["/edit_role/"+e.role_id])}},{key:"deleteRole",value:function(e){var t=this;if(window.confirm("Sure you want to delete this role? You cannot undo this")){var n=new FormData;this.notify.showLoading(),n.append("id",e.role_id),this.dbService.postData(n,"admin/deleteRole",this.authService.current_user).subscribe((function(n){t.notify.hideLoading(),"-1"===n.status&&t.notify.failNotification("Internal server error. Please try again"),"-9"===n.status?t.notify.showNotification("You are not permitted to perform this action","fail",3e3):(t.roles.splice(t.roles.indexOf(e),1),t.notify.successNotification("Role deleted successfully"))}),(function(e){t.notify.noConnectionNotification()}))}}},{key:"goBack",value:function(){window.history.back()}}]),e}(),v.\u0275fac=function(e){return new(e||v)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a))},v.\u0275cmp=o["\u0275\u0275defineComponent"]({type:v,selectors:[["app-roles"]],decls:17,vars:3,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"btn","btn-primary","waves-effect",3,"click"],[3,"onFinish",4,"ngIf"],[1,"card-body"],[4,"ngIf"],[3,"onFinish"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"row","clear-fix","text-center"],["class","btn-group",4,"ngIf"],[1,"btn-group"],["type","button","data-toggle","dropdown","aria-haspopup","true",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item","waves-light","waves-effect"],[3,"routerLink"],[3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"h5"),o["\u0275\u0275text"](7,"User Roles"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"b"),o["\u0275\u0275text"](9,"If a role is not in the list, "),o["\u0275\u0275elementStart"](10,"a",6),o["\u0275\u0275listener"]("click",(function(){return t.add_role=!t.add_role})),o["\u0275\u0275text"](11,"click here"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12," to add it"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,f,1,0,"app-add-role",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",8),o["\u0275\u0275template"](15,u,1,0,"app-loading",9),o["\u0275\u0275template"](16,h,14,3,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](13),o["\u0275\u0275property"]("ngIf",t.add_role),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.is_loading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.is_loaded))},directives:[i.j,d.a,c.a,i.i,r.e],styles:[""]}),v)}],b=((g=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:g}),g.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||g)},imports:[[r.f.forChild(S)],r.f]}),g),w=n("nEHF"),_=n("uQlb"),x=((y=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[i.b,b,w.a,_.a]]}),y)},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),r=n("nEHF"),o=n("6QD7"),a=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a,o.b],o.b]}),e}()}}]);