(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5Ztd":function(e,t,n){"use strict";n.r(t),n.d(t,"ViewClientDiagnosticsModule",(function(){return k}));var i=n("ofXK"),s=n("tyNb"),r=n("fXoL"),o=n("1VJT"),c=n("c92J"),a=n("ccyI"),l=n("3Pt+");function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"datalist",2),r["\u0275\u0275element"](1,"option",3),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate2"]("value","",e.name," (",e.phone,")")}}function d(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"b"),r["\u0275\u0275text"](2,"Not found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}const u=function(e){return{"select-product-active":e}};function m(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",11),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).add(n)})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](3,u,n==i.arrowkeyLocation)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",e.name," (",e.phone,") ")}}function p(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275elementStart"](1,"ul",9),r["\u0275\u0275template"](2,m,2,5,"li",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.objects)}}function f(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1," No customer found. Check the spelling.\n"),r["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"input",5),r["\u0275\u0275listener"]("keyup",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().param=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](2,d,3,0,"div",6),r["\u0275\u0275template"](3,p,3,1,"div",7),r["\u0275\u0275template"](4,f,2,0,"div",6),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",e.param),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.objects.length>0&&e.is_finished_search),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search)}}let _=(()=>{class e{constructor(e,t){this.dbService=e,this.authService=t,this.onFinish=new r.EventEmitter,this.btn_text="Select",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.autocomplete=!1,this.autocomplete_list=[],this.onAdd=new r.EventEmitter,this.type="search",this.show="no",this.added=[],this.filter_param="",this.filter_results=[],this.arrowkeyLocation=0}ngOnInit(){}ngOnChanges(){console.log(this.param),this.search()}select_autocomplete(e){}addItem(){$("#add_customer_modal").modal("show")}itemAdded(e){this.objects.push(e),$("#add_customer_modal").modal("hide"),this.onFinish.emit(e)}search(){this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.param).subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1,this.selected=null)},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0})}add(e){this.onAdd.emit(e),console.log(e),this.is_finished_search=!1,$("#customer_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}select(e){this.selected=e,this.onFinish.emit(e)}highlightObject(e){this.objects.map(e=>{e.selected=!1}),this.highlightedObject=e,e.selected=!0}keyUp(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:let e=this.objects[this.arrowkeyLocation];null!=e&&null!=e&&this.add(e);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.search()}}focusCursor(){let e=$("#customer_search").val();$("#customer_search").val("").val(e)}hideSearchResults(){this.param="",this.objects.length=0,this.is_finished_search=!1}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-customer"]],inputs:{btn_text:"btn_text",param:"param",autocomplete:"autocomplete",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["id","customer_list",4,"ngFor","ngForOf"],["class","focus_search",4,"ngIf"],["id","customer_list"],[3,"value"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter customer name or phone","required","","type","text","id","customer_search","name","search",3,"ngModel","keyup","ngModelChange"],[4,"ngIf"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],[1,"list-group"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,h,2,2,"datalist",0),r["\u0275\u0275template"](1,g,5,4,"div",1)),2&e&&(r["\u0275\u0275property"]("ngForOf",t.objects),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","search"==t.type))},directives:[i.i,i.j,l.i,l.n,l.b,l.l,l.e,l.h,i.h],styles:[".autocomplete-items[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}"]}),e})();var v=n("NGcU");function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1," Type the name or phone of the client and select it. "),r["\u0275\u0275element"](2,"br"),r["\u0275\u0275elementStart"](3,"app-select-customer",6),r["\u0275\u0275listener"]("onAdd",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().itemSelected(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("type","search"))}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"h5"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",e.client.name," (",e.client.phone,") ")}}function x(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275template"](2,y,2,2,"h5",4),r["\u0275\u0275elementStart"](3,"button",9),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().cancel()})),r["\u0275\u0275text"](4,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",10),r["\u0275\u0275element"](6,"app-diagnostics-list",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null!=e.client&&null!=e.client),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("objects",e.objects)("client_name",e.client_name)("client_phone",e.client_phone)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i,s){this.notify=e,this.dbService=t,this.router=i,this.authService=s,this.stock_changes=[],this.can_master_edit=!0,this.can_edit=!0,this.client=null,this.objects=[],this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.client_name="",this.client_phone="",this.id=n.snapshot.params.id,this.dbService.setTitle(" Client Diagnostic History")}ngOnInit(){null!=this.id&&(this.getClient(),this.getItems())}getClient(){this.is_loading=!0,this.notify.showLoading(),this.dbService.getData("customer/findById?id="+this.id,this.authService.current_user).subscribe(e=>{this.client=e.data,this.client_name=this.client.name,this.client_phone=this.client.phone,this.is_loading=!1,this.notify.hideLoading()},e=>{this.is_loading=!1,this.notify.noConnectionNotification()})}getItems(){this.is_loading=!0,this.notify.showLoading(),this.dbService.getData("customer/getCustomerDiagnosticsList?customer="+this.id,this.authService.current_user).subscribe(e=>{this.objects=e.data,this.is_loading=!1,this.notify.hideLoading()},e=>{this.is_loading=!1,this.notify.noConnectionNotification()})}goBack(){window.history.back()}itemSelected(e){this.router.navigate(["/viewclientdiagnostics/"+e.id])}cancel(){this.router.navigate(["/viewclientdiagnostics"])}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](s.d),r["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-view-client-diagnostics"]],decls:8,vars:2,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],[4,"ngIf"],["class","card",4,"ngIf"],[3,"type","onAdd"],[1,"card"],[1,"card-header"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"card-body"],[3,"objects","client_name","client_phone"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Client Diagnostic History"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,b,4,1,"div",4),r["\u0275\u0275template"](7,x,7,4,"div",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",null==t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!=t.id&&null!=t.id))},directives:[i.j,_,v.a],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.f.forChild(w)],s.f]}),e})();var C=n("nEHF"),S=n("rNAZ"),I=n("NFbv");let k=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,j,C.a,S.a,I.a]]}),e})()},n49D:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),s=n("4AQi");let r=(()=>{class e{constructor(e){this.excel=e,this.objects=[],this.filename="download"}ngOnInit(){}export(){this.excel.exportAsExcelFile(this.objects,this.filename)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-export-to-excel"]],inputs:{objects:"objects",filename:"filename"},decls:3,vars:0,consts:[[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-file-excel-o"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("click",(function(){return t.export()})),i["\u0275\u0275element"](1,"i",1),i["\u0275\u0275text"](2," Export To Excel"),i["\u0275\u0275elementEnd"]())},styles:[""]}),e})()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),s=n("nEHF"),r=n("6QD7"),o=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,s.a,r.b],r.b]}),e})()}}]);