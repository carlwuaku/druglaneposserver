function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{KpNn:function(e,t,n){"use strict";n.r(t),n.d(t,"EditRoleModule",(function(){return w}));var i=n("ofXK"),r=n("tyNb"),o=n("fXoL"),a=n("c92J"),d=n("1VJT"),l=n("ccyI"),s=n("hiAm");function c(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"h5"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("Edit role permissions: ",n.role.role_name,"")}}function u(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"h4"),o["\u0275\u0275text"](2,"Unable to connect to server. Try again"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function f(e,t){1&e&&o["\u0275\u0275element"](0,"app-loading")}function m(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",13),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).removePermission(e)})),o["\u0275\u0275element"](1,"i",14),o["\u0275\u0275elementStart"](2,"b"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"br"),o["\u0275\u0275elementStart"](5,"em",10),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.name),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.description)}}function p(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275template"](1,m,7,2,"a",12),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.included)}}function h(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"h4"),o["\u0275\u0275text"](2,"Unable to connect to server. Try again"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&o["\u0275\u0275element"](0,"app-loading")}function _(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",13),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).addPermission(e)})),o["\u0275\u0275element"](1,"i",15),o["\u0275\u0275elementStart"](2,"b"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"br"),o["\u0275\u0275elementStart"](5,"em"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.name),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.description)}}function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275template"](1,_,7,2,"a",12),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.excluded)}}var y,x,S,b=[{path:"",component:(y=function(){function e(t,n,i,r,o,a){_classCallCheck(this,e),this.location=t,this.router=n,this.dbService=r,this.notify=o,this.authService=a,this.included=[],this.error_included=!1,this.is_loading_included=!0,this.is_loaded_included=!1,this.error_excluded=!1,this.is_loading_excluded=!0,this.is_loaded_excluded=!1,this.error_role=!1,this.is_loading_role=!0,this.is_loaded_role=!1,this.id=i.snapshot.params.id,-1==this.authService.current_user.permissions.indexOf("Manage Staff")&&(this.dbService.goBackHome(),this.notify.failNotification("You are not permitted to view this page")),this.dbService.setTitle("Edit Role")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dbService.getDataById(this.id,"admin/getRole",this.authService.current_user).subscribe((function(t){e.role=t.data,e.is_loading_role=!1,e.is_loaded_role=!0,e.error_role=!1}),(function(t){e.is_loading_role=!1,e.error_role=!0,e.is_loaded_role=!1})),this.dbService.getDataById(this.id,"admin/getRolePermissions",this.authService.current_user).subscribe((function(t){e.included=t.data,e.is_loading_included=!1,e.is_loaded_included=!0,e.error_included=!1}),(function(t){e.is_loading_included=!1,e.error_included=!0,e.is_loaded_included=!1})),this.dbService.getDataById(this.id,"admin/getRoleExcludedPermissions",this.authService.current_user).subscribe((function(t){e.excluded=t.data,e.is_loading_excluded=!1,e.is_loaded_excluded=!0,e.error_excluded=!1}),(function(t){e.is_loading_excluded=!1,e.error_excluded=!0,e.is_loaded_excluded=!1}))}},{key:"addPermission",value:function(e){var t=this;this.notify.showLoading();var n=new FormData;n.append("role_id",this.id),n.append("permission_id",e.permission_id),this.dbService.postData(n,"admin/addRolePermission",this.authService.current_user).subscribe((function(n){t.notify.hideLoading(),"-1"===n.status?t.notify.failNotification("Unable to authenticate. Please login again"):"-9"===n.status?t.notify.showNotification("You are not permitted to perform this action","fail",3e3):(t.notify.successNotification("Permission added to role successfully"),t.excluded.splice(t.excluded.indexOf(e),1),t.included.push(e))}),(function(e){t.notify.noConnectionNotification()}))}},{key:"removePermission",value:function(e){var t=this;this.notify.showLoading();var n=new FormData;n.append("role_id",this.id),n.append("permission_id",e.permission_id),this.dbService.postData(n,"admin/deleteRolePermission",this.authService.current_user).subscribe((function(n){t.notify.hideLoading(),"-1"===n.status?t.notify.failNotification("Unable to authenticate. Please login again"):"-9"===n.status?t.notify.showNotification("You are not permitted to perform this action","fail",3e3):(t.notify.successNotification("Permission removed from role successfully"),t.included.splice(t.included.indexOf(e),1),t.excluded.push(e))}),(function(e){t.notify.noConnectionNotification()}))}},{key:"goBack",value:function(){window.history.back()}}]),e}(),y.\u0275fac=function(e){return new(e||y)(o["\u0275\u0275directiveInject"](i.f),o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](r.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](l.a))},y.\u0275cmp=o["\u0275\u0275defineComponent"]({type:y,selectors:[["app-edit-role"]],decls:26,vars:7,consts:[[1,"content"],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","",4,"ngIf"],["class","list-group",4,"ngIf"],[1,""],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"feather","icon-x","text-danger"],[1,"feather","icon-plus","text-success"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,c,2,1,"h5",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"h4"),o["\u0275\u0275text"](8,"Current Permissions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"em"),o["\u0275\u0275text"](10,"Click on a permission to remove it from the current role's permissions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",7),o["\u0275\u0275template"](12,u,3,0,"div",8),o["\u0275\u0275template"](13,f,1,0,"app-loading",2),o["\u0275\u0275template"](14,p,2,1,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",4),o["\u0275\u0275elementStart"](16,"div",5),o["\u0275\u0275elementStart"](17,"div",6),o["\u0275\u0275elementStart"](18,"h4"),o["\u0275\u0275text"](19,"Excluded Permissions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"em"),o["\u0275\u0275text"](21,"Click on a permission to add it to the current role's permissions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",7),o["\u0275\u0275template"](23,h,3,0,"div",8),o["\u0275\u0275template"](24,v,1,0,"app-loading",2),o["\u0275\u0275template"](25,g,2,1,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.is_loaded_role),o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("ngIf",t.error_included),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.is_loading_included),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.is_loaded_included),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("ngIf",t.error_excluded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.is_loading_excluded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.is_loaded_excluded))},directives:[i.j,s.a,i.i],styles:[""]}),y)}],E=((x=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},imports:[[r.f.forChild(b)],r.f]}),x),C=n("uQlb"),I=n("nEHF"),w=((S=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[i.b,E,C.a,I.a]]}),S)},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("ofXK"),r=n("nEHF"),o=n("6QD7"),a=n("fXoL"),d=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a,o.b],o.b]}),e}()}}]);