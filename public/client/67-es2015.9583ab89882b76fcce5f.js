(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},nDyQ:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewActivitiesModule",(function(){return _}));var i=n("ofXK"),r=n("tyNb"),a=n("fXoL"),s=n("ccyI"),l=n("1VJT"),o=n("c92J"),d=n("3Pt+"),c=n("8ApV"),m=n("hiAm");function u(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"form",7,8),a["\u0275\u0275listener"]("ngSubmit",(function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().getAll()})),a["\u0275\u0275elementStart"](2,"span",9),a["\u0275\u0275text"](3,"Optional: filter between dates"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"label"),a["\u0275\u0275text"](5,"Start Date: "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"input",10),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().start_date=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"label"),a["\u0275\u0275text"](8,"End Date: "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"input",11),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().end_date=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"input",12),a["\u0275\u0275elementStart"](11,"a",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().clearFilter()})),a["\u0275\u0275text"](12,"Clear filter / View All"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.start_date),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",e.end_date)}}function h(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275elementStart"](2,"a",19),a["\u0275\u0275elementStart"](3,"b"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275elementStart"](6,"b"),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"br"),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate1"]("routerLink","/user_activities/",e.user.id,""),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.user.display_name,""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("",e.activity," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" [",e.created_on,"]")}}function p(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"table",15),a["\u0275\u0275elementStart"](2,"thead"),a["\u0275\u0275elementStart"](3,"tr"),a["\u0275\u0275elementStart"](4,"th"),a["\u0275\u0275text"](5,"User"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"th"),a["\u0275\u0275text"](7,"Activity [Time]"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"tbody"),a["\u0275\u0275template"](9,h,10,4,"tr",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",17),a["\u0275\u0275elementStart"](11,"app-load-more",18),a["\u0275\u0275listener"]("onFinish",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().addMoreItems(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngForOf",e.objects),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("url_has_params",e.url_has_params)("limit",e.limit)("url",e.url)("offset",e.offset)("total",e.total)}}function f(e,t){1&e&&a["\u0275\u0275element"](0,"app-loading")}function v(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",20),a["\u0275\u0275text"](1," Unable to connect to server. Please check your connection "),a["\u0275\u0275elementEnd"]())}let g=(()=>{class e{constructor(e,t,n){this.authService=e,this.notify=t,this.dbService=n,this.reg=null,this.error=!1,this.url="getAllActivities",this.url_has_params="no"}ngOnInit(){null==this.reg?this.getAll():this.getSpecific()}getSpecific(){this.notify.showLoading(),this.dbService.getDataByRegNum(this.reg,"admin/getActivities",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"==e.status||"0"==e.status||"-9"==e.status?(this.notify.failNotification(e.message),this.objects=[]):(this.objects=e.data,this.is_loaded=!0,this.error=!1)},e=>{this.notify.hideLoading(),this.is_loaded=!0,this.error=!0})}getAll(){this.notify.showLoading(),this.url="admin/getAllActivities",null!=this.start_date&&null!=this.start_date&&null!=this.end_date&&null!=this.end_date&&(this.url="admin/getAllActivities?start_date="+this.start_date+"&end_date="+this.end_date,this.url_has_params="yes"),this.dbService.getData(this.url,this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"==e.status||"0"==e.status||"-9"==e.status?(this.notify.failNotification(e.message),this.objects=[]):(this.objects=e.data,this.limit=e.limit,this.offset=this.objects.length,this.total=e.total,this.is_loaded=!0,this.error=!1)},e=>{this.notify.hideLoading(),this.error=!0,this.is_loaded=!1})}clearFilter(){this.start_date=void 0,this.end_date=void 0,this.getAll()}addMoreItems(e){e.map(e=>{this.objects.push(e)})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-activity-view"]],inputs:{reg:"reg"},decls:9,vars:4,consts:[[1,"card"],[1,"card-header","table-responsive"],["ngNativeValidate","",3,"ngSubmit",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["class","",4,"ngIf"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"text-muted"],["required","","type","date","name","start_date",3,"ngModel","ngModelChange"],["required","","type","date","name","end_date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-primary"],["role","button",1,"btn","btn-warning",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],[1,"row","clear-fix","text-center"],[3,"url_has_params","limit","url","offset","total","onFinish"],[3,"routerLink"],[1,""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"h4"),a["\u0275\u0275text"](3,"Activity History"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,u,13,2,"form",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",3),a["\u0275\u0275template"](6,p,12,6,"div",4),a["\u0275\u0275template"](7,f,1,0,"app-loading",5),a["\u0275\u0275template"](8,v,2,0,"div",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",null==t.reg),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.is_loaded),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.is_loaded),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.error))},directives:[i.j,d.f,d.g,d.b,d.l,d.e,d.h,i.i,c.a,r.d,m.a],styles:[""]}),e})();const y=[{path:"",component:(()=>{class e{constructor(e,t,n){this.authService=e,this.notify=t,this.dbService=n,this.can_view=!0,-1==this.authService.current_user.permissions.indexOf("View User Activities")&&(this.notify.failNotification("You are not permitted to view this page"),this.goBack(),this.can_view=!1)}ngOnInit(){}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-view-activities"]],decls:5,vars:0,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275element"](4,"app-activity-view"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())},directives:[g],styles:[""]}),e})()}];let b=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.e.forChild(y)],r.e]}),e})();var S=n("nEHF");let _=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,b,S.a]]}),e})()}}]);