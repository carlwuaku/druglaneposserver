(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"a/do":function(e,t,n){"use strict";n.r(t),n.d(t,"NewSaleModule",(function(){return le}));var i=n("ofXK"),a=n("tyNb"),l=n("XC36");class r{constructor(){}}class s{constructor(){}}var o=n("fXoL"),d=n("c92J"),m=n("bgkY"),c=n("1VJT"),h=n("eJvr"),u=n("ccyI"),p=n("4j6H"),f=n("3Pt+"),_=n("yGzR"),g=n("/9/o"),b=n("6QD7");function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1," Possibly expired"),o["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",88),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().showRelated(t)})),o["\u0275\u0275element"](1,"i",89),o["\u0275\u0275text"](2," Swap"),o["\u0275\u0275elementEnd"]()}}function x(e,t){1&e&&o["\u0275\u0275element"](0,"i",90)}const v=function(e){return{"table-warning":e}},E=function(e){return{"text-danger":e}};function I(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr",79),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementStart"](3,"em",79),o["\u0275\u0275element"](4,"br"),o["\u0275\u0275element"](5,"i",80),o["\u0275\u0275text"](6),o["\u0275\u0275template"](7,S,2,0,"span",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,y,3,0,"button",81),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td"),o["\u0275\u0275text"](10),o["\u0275\u0275element"](11,"br"),o["\u0275\u0275elementStart"](12,"button",82),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().editItem(n)})),o["\u0275\u0275text"](13," ... "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",83),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().increment(n)})),o["\u0275\u0275text"](15," +1 "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"button",84),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().decrement(n)})),o["\u0275\u0275text"](17," -1 "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"td"),o["\u0275\u0275text"](19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"td"),o["\u0275\u0275text"](21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"td"),o["\u0275\u0275text"](23),o["\u0275\u0275template"](24,x,1,0,"i",85),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"td"),o["\u0275\u0275elementStart"](26,"button",86),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().removeItem(n)})),o["\u0275\u0275element"](27,"i",87),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](11,v,e.stock<1||e.quantity>e.stock)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.product_name," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](13,E,e.expired)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.expiry," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.expired),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.related.length>0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.quantity," "),o["\u0275\u0275advance"](9),o["\u0275\u0275textInterpolate"](e.price),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"]((e.price*e.quantity).toFixed(2)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.stock," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.stock<1||e.quantity>e.stock)}}function w(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",91),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().applyDiscount()})),o["\u0275\u0275text"](1,"Apply Discount"),o["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"button",92),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().removeDiscount()})),o["\u0275\u0275element"](3,"i",87),o["\u0275\u0275text"](4," Remove"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("Discount Applied: GHC ",e.discount," ")}}function C(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e)}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"em"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.customer_name," - Refill - "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.set_refill?"yes":"no"," ")}}function q(e,t){1&e&&o["\u0275\u0275text"](0," Set Customer & Refill ")}const N=function(e,t){return{"text-danger":e,"text-success":t}};function F(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2,"Cash Paid:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"input",93),o["\u0275\u0275listener"]("focus",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().clearAmountPaid()}))("keydown",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().amount_paid=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4," \xa0| \xa0 "),o["\u0275\u0275elementStart"](5,"b",79),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled","Cash"!=e.payment_method)("ngModel",e.amount_paid),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction2"](4,N,e.amount_paid<e.discounted_total,e.amount_paid>e.discounted_total)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Change Due: GHC ",(e.amount_paid-e.discounted_total).toFixed(2),"")}}function T(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275elementStart"](1,"button",15),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().showInsurerModal()})),o["\u0275\u0275text"](2,"Enter Insurance Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2,"Momo Reference: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"input",94),o["\u0275\u0275listener"]("keydown",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().momo_reference=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.momo_reference)}}function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"ul"),o["\u0275\u0275elementStart"](4,"li"),o["\u0275\u0275elementStart"](5,"b"),o["\u0275\u0275text"](6,"Side effects: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"br"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"li"),o["\u0275\u0275elementStart"](10,"b"),o["\u0275\u0275text"](11,"Indication: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](12,"br"),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"li"),o["\u0275\u0275elementStart"](15,"b"),o["\u0275\u0275text"](16,"Pregnancy: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"br"),o["\u0275\u0275text"](18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"li"),o["\u0275\u0275elementStart"](20,"b"),o["\u0275\u0275text"](21,"Cautions: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](22,"br"),o["\u0275\u0275text"](23),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.name," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",e.side_effect," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.indication," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.pregnancy," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.caution," ")}}function D(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275elementStart"](2,"h4"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275template"](5,L,24,5,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",33),o["\u0275\u0275elementStart"](7,"button",34),o["\u0275\u0275text"](8,"Ok"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",e.info_item.product_name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.info_item.active_ingredients)}}function H(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"h5",95),o["\u0275\u0275text"](1," No cautions/side effects detected. "),o["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"ul"),o["\u0275\u0275elementStart"](4,"li"),o["\u0275\u0275elementStart"](5,"b"),o["\u0275\u0275text"](6,"Side effects: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"br"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"li"),o["\u0275\u0275elementStart"](10,"b"),o["\u0275\u0275text"](11,"Pregnancy: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](12,"br"),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"li"),o["\u0275\u0275elementStart"](15,"b"),o["\u0275\u0275text"](16,"Cautions: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"br"),o["\u0275\u0275text"](18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("",e.ingredient," (in ",e.product_name," ) "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",e.side_effect," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.pregnancy," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.caution," ")}}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"h5"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("Quantity for ",e.new_item.name,"")}}function A(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275elementStart"](2,"button",97),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).swap(n)})),o["\u0275\u0275text"](3,"Swap"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"td"),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",e.name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.price," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.unit," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.stock," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.expiry," ")}}function R(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",31),o["\u0275\u0275elementStart"](4,"table",8),o["\u0275\u0275elementStart"](5,"thead"),o["\u0275\u0275elementStart"](6,"tr"),o["\u0275\u0275elementStart"](7,"th"),o["\u0275\u0275text"](8,"Item"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th"),o["\u0275\u0275text"](10,"Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Unit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"th"),o["\u0275\u0275text"](14,"On Hand"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"th"),o["\u0275\u0275text"](16,"Expiry"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"tbody"),o["\u0275\u0275template"](18,A,13,5,"tr",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",33),o["\u0275\u0275elementStart"](20,"button",96),o["\u0275\u0275text"](21,"Close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" Similar items to ",e.selected_related.product_name," with closer expiries "),o["\u0275\u0275advance"](16),o["\u0275\u0275property"]("ngForOf",e.selected_related.related)}}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",98),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275propertyInterpolate1"]("value","",e.name," "),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("",e.name," (",e.phone,")")}}function U(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",101),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).toggleRefill(n)})),o["\u0275\u0275element"](1,"input",102),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",-1!=n.refill_items.indexOf(e.product_name)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.product_name," ")}}function K(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275text"](2,"Choose the items to set the reminder for"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",99),o["\u0275\u0275template"](4,U,3,2,"a",100),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",e.items)}}function Q(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275text"](2,"Refill Date*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"input",103),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().refill_end_date=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.refill_end_date)}}function J(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"No held items"),o["\u0275\u0275elementEnd"]())}const Y=function(e){return{"table-primary":e}};function B(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr",108),o["\u0275\u0275listener"]("dblclick",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).unhold(n)}))("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).selectHeldItem(n)})),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](5,Y,i.selectedHeldItem==e)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",n+1," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.user," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.time," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.items.length," ")}}function z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.product_name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.quantity," ")}}function G(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"table",8),o["\u0275\u0275elementStart"](1,"thead"),o["\u0275\u0275elementStart"](2,"tr"),o["\u0275\u0275elementStart"](3,"th"),o["\u0275\u0275text"](4,"Item"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"th"),o["\u0275\u0275text"](6,"Quantity"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"tbody"),o["\u0275\u0275template"](8,z,5,2,"tr",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngForOf",e.selectedHeldItem.items)}}function X(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",2),o["\u0275\u0275elementStart"](1,"div",104),o["\u0275\u0275elementStart"](2,"table",8),o["\u0275\u0275elementStart"](3,"thead"),o["\u0275\u0275elementStart"](4,"tr"),o["\u0275\u0275elementStart"](5,"th"),o["\u0275\u0275text"](6,"#"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"th"),o["\u0275\u0275text"](8,"Saved by"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th"),o["\u0275\u0275text"](10,"Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Num. Items"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"tbody"),o["\u0275\u0275template"](14,B,9,7,"tr",105),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",106),o["\u0275\u0275template"](16,G,9,1,"table",107),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](14),o["\u0275\u0275property"]("ngForOf",e.held_items),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",null!=e.selectedHeldItem)}}function W(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e)}}function Z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.product.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.quantity),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.price),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",(e.quantity*e.price).toFixed(2)," ")}}const ee=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a){this.dbService=e,this.socket=t,this.notify=n,this.localforage=i,this.authService=a,this.items=[],this.held_items=[],this.new_item=null,this.selectedHeldItem=null,this.new_quantity="",this.sale_total=0,this.amount_paid=0,this.receipt_amount_paid=0,this.receipt_items=[],this.accept_amount=!1,this.invoice_items=[],this.receipt_total=0,this.time="",this.digital_address="",this.ts="",this.payment_method="Cash",this.key_state="none",this.insurer_id=null,this.insurance_member_name=null,this.insurance_member_id=null,this.momo_reference=null,this.creditor_name=null,this.discount=0,this.discounted_total=0,this.receipt_discount=0,this.receipt_discounted_total=0,this.customer_name="",this.shift="",this.shifts=[],this.info_item=null,this.cautions=[],this.set_refill=!1,this.refill_items=[],this.related_items=[],this.selected_related=null,-1==this.authService.current_user.permissions.indexOf("Create Sales")&&(this.notify.failNotification("You are not permitted to view that page"),this.goBack()),this.company_address=a.current_user.company_address,this.company_phone=a.current_user.company_phone,this.company_name=a.current_user.company_name,this.cashier=a.current_user.display_name,this.digital_address=a.current_user.digital_address,this.dbService.setTitle("New Sales")}keyEvent(e){if(e.ctrlKey&&13==e.keyCode||35==e.keyCode)switch(console.log(this.payment_method),this.payment_method){case"Cash":0==this.amount_paid||null==this.amount_paid?(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"})):this.saveLocalItems();break;case"Mobile Money":console.log(this.momo_reference),null==this.momo_reference||null==this.momo_reference||""==this.momo_reference.trim()?this.alertMomo():this.saveLocalItems();break;case"Credit":null==this.creditor_name||null==this.creditor_name||""==this.creditor_name.trim()?this.alertCredit():this.saveLocalItems()}else if("Home"==e.code)this.ts=this.dbService.getToday("timestamp_string");else if(27==e.keyCode)switch(this.key_state){case"item_quantity":this.rejectItem();break;case"alert_change":$("#sale_confirm_modal").modal("hide");break;case"held_items":$("#held_items_modal").modal("hide");break;case"discount_modal":$("#discount_modal").modal("hide")}else if(13==e.keyCode)switch(this.key_state){case"alert_change":this.acceptAmount(),this.key_state="";break;case"show_change":this.finishSale(),this.key_state="";break;case"held_items":this.unholdSelected(),this.key_state=""}else if(40==e.keyCode)switch(this.key_state){case"held_items":let e,t=this.held_items.indexOf(this.selectedHeldItem);e=t==this.held_items.length-1?0:t+1,this.selectedHeldItem=this.held_items[e]}else if(38==e.keyCode)switch(this.key_state){case"held_items":let e,t=this.held_items.indexOf(this.selectedHeldItem),n=this.held_items.length-1;e=0==t?n:t-1,this.selectedHeldItem=this.held_items[e]}}ngOnInit(){this.ts=this.dbService.getToday(),this.held_items=JSON.parse(localStorage.getItem("heldItems")),null==this.held_items&&(this.held_items=[]),this.getShifts(),$("#sales_search").focus(),this.getCustomers()}getCustomers(){this.dbService.getData("customer/getList",this.authService.current_user).subscribe(e=>{"1"==e.status&&(this.customer_objects=e.data)},e=>{this.new_item.stock=0,this.notify.failNotification("Unable to get customers. Check connection")})}getShifts(){this.dbService.getData("admin/getSetting?setting=number_of_shifts",this.authService.current_user).subscribe(e=>{if("1"==e.status){let i=e.data.split(",");for(var t=0;t<i.length;t++)this.shifts.push(`${i[t]}`);var n=sessionStorage.getItem("shift");null==n?($("#select_shift_modal").modal({keyboard:!1,backdrop:"static"}),this.shift=this.shifts[0]):this.shift=n}},e=>{this.notify.failNotification("Unable to get shifts. Check connection")})}setShift(){$("#select_shift_modal").modal("hide"),sessionStorage.setItem("shift",this.shift),$("#shift").tooltip({title:"You can change your shift here any time"}),$("#shift").tooltip("show"),setTimeout(()=>{$("#shift").tooltip("hide")},3e3)}shiftChanged(){sessionStorage.setItem("shift",this.shift)}productSelected(e){if(this.new_item=e,this.new_item.stock=e.stock,"number"!=typeof e.price)return this.notify.failNotification("Price not defined."),!1;let t=!1;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}if(t)return this.notify.failNotification("Item is already in the list"),!1;this.showQuantityModal()}showQuantityModal(){this.key_state="item_quantity",$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#new_quantity").focus()}))}getItemStock(){const e=this.new_item.id;this.dbService.getData("product/getStock?id="+this.new_item.id,this.authService.current_user).subscribe(t=>{if("1"==t.status){this.new_item.stock=t.data;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e){this.items[n].stock=t.data;break}}},e=>{this.new_item.stock=0,this.notify.failNotification("Unable to get stock. Check connection")})}getRelatedItems(){const e=this.new_item.id;this.dbService.getData("product/getRelatedProducts?id="+this.new_item.id,this.authService.current_user).subscribe(t=>{if("1"==t.status){this.new_item.related=t.data;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e){this.items[n].related=t.data;for(let e=0;e<t.data.length;e++)t.data[e].expiring_earlier&&(this.items[n].is_swappable=!0);break}}},e=>{this.new_item.stock=0,this.notify.failNotification("Unable to get stock. Check connection")})}setCautions(){}showRelated(e){this.selected_related=e,$("#related_items_modal").modal("show")}swap(e){let t=!1;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}if(t)return this.notify.failNotification("Item is already in the list"),!1;this.items.splice(this.items.indexOf(this.selected_related),1),this.getTotal(),$("#related_items_modal").modal("hide"),this.productSelected(e)}getActiveIngredients(){this.dbService.getData("product/getActiveIngredients?id="+this.new_item.id,this.authService.current_user).subscribe(e=>{if("1"==e.status){this.new_item.active_ingredients=e.data;for(let t=0;t<this.items.length;t++)if(this.items[t].product_id==e.id){this.items[t].active_ingredients=e.data;break}}},e=>{this.new_item.stock=0,this.notify.failNotification("Unable to get active ingredients. Check connection")})}acceptItem(){if(isNaN(this.new_quantity))return alert("Only numbers allowed for quantity"),!1;let e=new l.a;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.price=this.new_item.price,e.cost_price=this.new_item.cost_price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_item.price,e.stock=this.new_item.stock,e.product=this.new_item,e.expired=this.new_item.expired,e.expiry=this.new_item.expiry,e.active_ingredients=this.new_item.active_ingredients,e.related=[],this.items.push(e),this.getTotal(),this.setCautions(),$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string"),this.getRelatedItems()}rejectItem(){$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string")}getTotal(){let e=0;this.items.map(t=>{e+=t.quantity*t.price}),this.sale_total=e,this.receipt_total=e,this.discounted_total=e-this.discount,this.receipt_discount=this.discount-0,this.receipt_discounted_total=e-this.discount}removeItem(e){this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.setCautions(),this.ts=this.dbService.getToday("timestamp_string")}editItem(e){this.new_item=e.product,this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.setCautions(),this.new_item=e.product,this.new_quantity=e.quantity,$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}showInsurerModal(){$("#insurance_modal").modal({backdrop:"static",keyboard:!1})}showCustomerModal(){$("#customer_modal").modal({backdrop:"static",keyboard:!1})}showInfo(e){this.info_item=e,$("#drug_info_modal").modal("show")}alertMomo(){return $("#momo_reference").focus(),$("#momo_reference").tooltip({title:"Enter the reference/transaction number"}),!1}alertCredit(){return $("#creditor_name").focus(),$("#creditor_name").tooltip({title:"Enter the customer name or number"}),!1}setInsurer(e){this.insurer_id=e.name}setQuantities(){let e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}alert(){this.key_state="alert_change",$("#sale_confirm_modal").modal({backdrop:"static",keyboard:!1})}acceptAmount(){this.accept_amount=!0,this.saveLocalItems()}saveLocalItems(){if("Insurance"==this.payment_method&&(this.dbService.isEmpty(this.insurer_id)||this.dbService.isEmpty(this.insurance_member_name)||this.dbService.isEmpty(this.insurance_member_name)))return this.showInsurerModal(),!1;if("Mobile Money"==this.payment_method&&this.dbService.isEmpty(this.momo_reference))return this.alertMomo(),!1;if("Credit"==this.payment_method&&(this.dbService.isEmpty(this.customer_name)||this.dbService.isEmpty(this.customer_phone)))return alert("The customer details are required for credit sales. Please click the blue 'Enter Customer Details' to enter customer phone and name."),!1;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(this.amount_paid<this.discounted_total&&!this.accept_amount&&"Cash"==this.payment_method&&this.notify.failNotification("Amount was less than total amount of sale"),isNaN(this.amount_paid)&&"Cash"==this.payment_method)return alert("Only numbers allowed for amount paid"),!1;this.notify.showLoading(),this.receipt_items=[];for(let e=0;e<this.items.length;e++)this.receipt_items.push(this.items[e]);if(this.accept_amount=!1,"Cash"!=this.payment_method?(this.receipt_amount_paid=this.sale_total,this.amount_paid=this.sale_total):this.receipt_amount_paid=this.amount_paid,"offline"==this.dbService.ENVIRONMENT){let e=[],t=[],n=[],i=[],a=[];this.ts=this.dbService.getToday("timestamp_string"),this.time=this.dbService.getToday("timestamp"),console.log(this.time);for(let r=0;r<this.items.length;r++){let l=this.items[r];e.push(l.product_id),t.push(l.price),n.push(l.quantity),i.push(l.product_name),a.push(l.cost_price)}const l=new FormData;l.append("products",e.join("||")),l.append("prices",t.join("||")),l.append("cost_prices",a.join("||")),l.append("quantities",n.join("||")),l.append("product_names",i.join("||")),l.append("amount_paid",this.amount_paid.toString()),l.append("discount",this.discount.toString()),l.append("created_by",this.authService.current_user.id),l.append("date",this.dbService.getToday()),l.append("created_on",this.dbService.getToday("timestamp")),l.append("display_name",this.authService.current_user.display_name),l.append("payment_method",this.payment_method),l.append("shift",this.shift),"Insurance"==this.payment_method&&(l.append("insurance_provider",this.insurer_id),l.append("insurance_member_name",this.insurance_member_name),l.append("insurance_member_id",this.insurance_member_id)),"Mobile Money"===this.payment_method&&l.append("momo_reference",this.momo_reference),"Credit"===this.payment_method&&l.append("creditor_name",this.creditor_name),l.append("customer_phone",this.customer_phone),l.append("customer_name",this.customer_name),this.dbService.postData(l,"sale/saveBulk",this.authService.current_user).subscribe(e=>{if(this.notify.hideLoading(),"0"===e.status)this.notify.failNotification("Unable to authenticate. Please login again");else if("-1"===e.status)alert("Server error. Please try again` ");else if("-9"===e.status)this.notify.showNotification("You are not permitted to perform this action","fail",3e3);else{if(this.selected_code=e.code,localStorage.setItem("receipt_total",JSON.stringify(this.sale_total)),this.notify.hideLoading(),this.notify.successNotification("Sales synced successfully"),this.amount_paid>this.sale_total)return $("#change_modal").modal({backdrop:"static",keyboard:!1}),$("#change_modal").on("shown.bs.modal",(function(){$("#finish_sale_btn").focus()})),!1;this.finishSale()}},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification(),console.log(e)})}else{let e,t=new s;t.display_name=this.authService.current_user.display_name,t.date=this.dbService.getToday(),t.created_on=this.dbService.getToday("timestamp"),t.created_by=this.authService.current_user.id,t.payment_method=this.payment_method,t.amount_paid=this.amount_paid,t.items=this.items,t.company_id=this.authService.current_user.company_id,t.code=this.authService.current_user.id+""+this.dbService.getToday("timestamp_string"),t.insurance_provider=this.insurer_id,t.insurance_member_name=this.insurance_member_name,t.insurance_member_id=this.insurance_member_id,t.momo_reference=this.momo_reference,t.creditor_name=this.customer_name,t.customer_name=this.customer_name,t.customer_phone=this.customer_phone,t.discount=this.discount,this.time=this.dbService.getToday("timestamp"),this.selected_code=t.code,this.localforage.getItem(this.dbService.OFFLINE_SALES_KEY).subscribe(n=>{if(e=null!=n?n:[],e.push(t),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,e),this.dbService.unsynced_sales.next(e),localStorage.setItem("receipt_total",JSON.stringify(this.sale_total)),this.notify.hideLoading(),this.saveItems(t.code),this.amount_paid>this.sale_total)return $("#change_modal").modal({backdrop:"static",keyboard:!1}),$("#change_modal").on("shown.bs.modal",(function(){$("#finish_sale_btn").focus()})),!1;this.finishSale()},n=>{this.notify.hideLoading(),e=[],console.log("local forage new sales save error",n),e.push(t),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,e),this.selected_code=t.code,localStorage.setItem("receipt_total",JSON.stringify(this.sale_total))})}}saveItems(e){let t=[],n=[],i=[],a=[],l=[];this.ts=this.dbService.getToday("timestamp_string");for(let s=0;s<this.items.length;s++){let e=this.items[s];t.push(e.product_id),n.push(e.price),i.push(e.quantity),a.push(e.product_name),l.push(e.cost_price)}const r=new FormData;r.append("products",t.join("||")),r.append("prices",n.join("||")),r.append("cost_prices",l.join("||")),r.append("quantities",i.join("||")),r.append("code",e),r.append("product_names",a.join("||")),r.append("amount_paid",this.amount_paid.toString()),r.append("discount",this.discount.toString()),r.append("created_by",this.authService.current_user.id),r.append("date",this.dbService.getToday()),r.append("created_on",this.dbService.getToday("timestamp")),r.append("display_name",this.authService.current_user.display_name),r.append("payment_method",this.payment_method),r.append("customer_name",this.customer_name),r.append("shift",this.shift),"Insurance"==this.payment_method&&(r.append("insurance_provider",this.insurer_id),r.append("insurance_member_name",this.insurance_member_name),r.append("insurance_member_id",this.insurance_member_id)),"Mobile Money"===this.payment_method&&r.append("momo_reference",this.momo_reference),"Credit"===this.payment_method&&r.append("creditor_name",this.creditor_name),r.append("customer_phone",this.customer_phone),this.dbService.postData(r,"sale/saveBulk",this.authService.current_user).subscribe(t=>{this.notify.hideLoading(),"0"===t.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-1"===t.status?alert("Server error. Please click the `Upload Sales menu in the top bar to try again` "):"-9"===t.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.customer_name="",this.notify.successNotification("Sales synced successfully"),this.localforage.getItem(this.dbService.OFFLINE_SALES_KEY).subscribe(t=>{let n=t;console.log(n.length);for(let i=0;i<n.length;i++)if(n[i].code==e){n.splice(i,1);break}this.socket.sendEvent({company_id:this.authService.current_user.company_id,parent_company_id:this.authService.current_user.parent_company.id,message:"New sale",event:"new_sale"}),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,n),this.dbService.unsynced_sales.next(n)}))},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification(),console.log(e)})}sync(){}increment(e){null!=e&&null!=e?(e.quantity=(parseFloat(e.quantity)+1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),this.new_quantity++,$("#new_quantity").focus(),this.focusCursor())}decrement(e){null!=e&&null!=e?parseFloat(e.quantity)>1&&(e.quantity=(parseFloat(e.quantity)-1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),parseFloat(this.new_quantity)>1&&this.new_quantity--,$("#new_quantity").focus(),this.focusCursor())}keyChangeQuantity(e){40==e.keyCode?this.decrement():38==e.keyCode&&this.increment(),this.focusCursor()}closeHeld(){$("#held_items_modal").modal("hide"),this.key_state=""}finishSale(){this.set_refill&&this.saveRefill(),this.amount_paid=0,this.insurance_member_id="",this.insurance_member_name="",this.momo_reference="",this.discount=0,this._discount=null,this.discounted_total=0,this.customer_name="",this.customer_phone="",this.refill_end_date="",this.set_refill=!1,this.notify.showLoading();var e=this;setTimeout(()=>{e.notify.hideLoading(),e.print(),this.ts=this.dbService.getToday("timestamp_string"),this.payment_method="Cash",e.items=[],e.getTotal()},100)}cancel(){this.items=[],this.amount_paid=0,this.getTotal(),this.setCautions()}isEmpty(e){return this.dbService.isEmpty(e)}goBack(){window.history.back()}keyUp(e){switch(e.keyCode){case 13:this.saveLocalItems()}}print(){let e,t,n=0;e="",this.receipt_items.map(e=>{n+=e.quantity*e.product.price}),this.receipt_total=n,e=document.getElementById("invoice").innerHTML,t=window.open("","_blank","top=0,left=0,height=100%,width=auto"),t.document.open(),t.document.write(`\n          <html>\n            <head>\n              <title>Invoice</title>\n              <style>\n              body{\n                font-size: 13px;\n              }\n              #invoice { page-break-after: always; }\n    #invoice:last-child { page-break-after: avoid; }\n\n\n    table{\n        width: 100%;\n        border: 1px solid #e9ecef;\n        font-size: 13px !important;\n    }\n\n    .small-margin{\n      margin-bottom: 10px;\n    }\n\n    .table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}\n           .center{\n             text-align:center\n           }\n           .text-left{text-align:left!important}.text-right{text-align:right!important; float:right}\n           .text-center{text-align:center!important}\n           @media (min-width:576px){.text-sm-left{text-align:left!important}\n           .text-sm-right{text-align:right!important}\n           .text-sm-center{text-align:center!important}}\n           @media (min-width:768px){.text-md-left{text-align:left!important}\n           .text-md-right{text-align:right!important}\n           .text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}\n\n           .row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}\n              </style>\n            </head>\n        <body onload="window.print();"><div id="invoice">${e}</div> \n        <script>\n           window.onafterprint = function(){\n            window.close();\n          }\n           <\/script>\n           </body>\n          </html>`),t.document.close(),this.ts=this.dbService.getToday("timestamp_string")}holdItems(){let e=new r;e.items=this.items,e.user=this.authService.current_user.display_name,e.time=this.dbService.getToday("timestamp"),this.held_items.push(e),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),this.items=[],this.getTotal(),this.setCautions(),this.ts=this.dbService.getToday("timestamp_string")}viewHeldItems(){$("#held_items_modal").modal({backdrop:"static",keyboard:!1}),this.held_items.length>0&&(this.selectedHeldItem=this.held_items[0]),this.key_state="held_items"}selectHeldItem(e){this.selectedHeldItem=e}unhold(e){this.items=e.items,this.held_items.splice(this.held_items.indexOf(e),1),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),$("#held_items_modal").modal("hide"),this.key_state="",this.getTotal(),this.setCautions()}deleteHeldItem(){this.held_items.splice(this.held_items.indexOf(this.selectedHeldItem),1),this.selectedHeldItem=null,localStorage.setItem("heldItems",JSON.stringify(this.held_items))}unholdSelected(){this.unhold(this.selectedHeldItem),this.key_state=""}clearHeldItems(){localStorage.removeItem("heldItems"),this.selectedHeldItem=null,this.held_items=[],$("#held_items_modal").modal("hide"),this.key_state=""}productAdded(e){}clearAmountPaid(){0!=this.amount_paid&&null!=this.amount_paid||(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"}))}ngOnDestroy(){this.items.length>0&&(this.holdItems(),this.notify.successNotification("Receipt held automatically"))}focusCursor(){let e=$("#new_quantity").val();$("#new_quantity").val("").val(e)}applyDiscount(){$("#discount_modal").modal({backdrop:"static",keyboard:!1}),$("#discount_modal").on("shown.bs.modal",(function(){$("#_discount").focus()})),this.key_state="discount_modal"}acceptDiscount(){$("#discount_modal").modal("hide"),this.discount=this._discount,this.getTotal(),this.key_state=""}rejectDiscount(){$("#discount_modal").modal("hide"),this._discount=null}removeDiscount(){this.discount=0,this.getTotal()}search(){""==this.customer_name?this.getCustomers():this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.customer_name).subscribe(e=>{"-1"===e.status||(this.customer_objects=e.data)},e=>{})}searchCustomers(){""!=this.customer_name.trim()&&null!=this.customer_name&&null!=this.customer_name?this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.customer_name+"&limit=10").subscribe(e=>{"-1"===e.status||(this.customer_objects=e.data)},e=>{}):this.customer_objects=[]}getCustomerPhone(){for(var e=0;e<this.customer_objects.length;e++){var t=this.customer_objects[e];if(t.name.trim().toLowerCase()==this.customer_name.trim().toLowerCase()){this.customer_phone=t.phone;break}}}addItemToRefill(e){this.refill_items.push(e.product_name)}removeFromRefill(e){this.refill_items.splice(this.refill_items.indexOf(e.product_name))}toggleRefill(e){-1==this.refill_items.indexOf(e.product_name)?this.addItemToRefill(e):this.removeFromRefill(e)}saveRefill(){if(null==this.customer_name||null==this.customer_name)return this.notify.failNotification("The customer details are required for the refill"),!1;$("#add_refill_modal").modal("hide"),this.notify.showLoading();let e=new FormData;e.append("customer_name",this.customer_name),e.append("customer_phone",this.customer_phone),e.append("product",this.refill_items.join(";")),e.append("start_date",this.dbService.getToday()),e.append("end_date",this.refill_end_date),e.append("quantity","1"),this.dbService.postData(e,"customer/addRefill",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Server error. Please check that you filled the form correctly and try again"):"0"===e.status?this.notify.failNotification("Unable to authenticate. Login and try again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):this.notify.successNotification("Refill saved successfully")},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-sale"]],hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("keydown",(function(e){return t.keyEvent(e)}),!1,o["\u0275\u0275resolveWindow"])},decls:308,vars:55,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],[3,"timestamp","type","onAdd"],[1,"col-12"],[1,"card","card-body","table-responsive","sales_items"],[1,"table","table-striped","table-bordered","table-hover"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"card-body"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],[4,"ngIf"],[1,""],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"text-danger"],["id","shift","name","shift",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"fa","fa-user"],[4,"ngIf","ngIfElse"],["default_customer_btn_text",""],["name","payment_method","id","payment_method",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],["id","drug_info_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog"],["class","modal-content",4,"ngIf"],["id","cautions_modal","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],["class","text-muted",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-success"],["id","sale_confirm_modal","tabindex","-1","role","dialog",1,"modal","fade"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["autocomplete","off","required","","id","new_quantity","name","new_quantity",3,"ngModel","keyup","ngModelChange"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-danger",3,"click"],["id","discount_modal","tabindex","-1","role","dialog",1,"modal","fade"],["autocomplete","off","required","","id","_discount","name","_discount",3,"ngModel","ngModelChange"],["id","change_modal","tabindex","-1","role","dialog",1,"modal","fade"],["id","finish_sale_btn","type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["id","related_items_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],["id","customer_modal","tabindex","-1","role","dialog",1,"modal","fade"],["name","customer_name","required","","id","customer_field","type","text","list","customer_list",1,"form-control",3,"ngModel","blur","change","keyup","ngModelChange"],["id","customer_list"],[3,"value",4,"ngFor","ngForOf"],["required","","name","customer_phone",1,"form-control",3,"ngModel","focus","ngModelChange"],["name","set_refill","type","checkbox",3,"ngModel","ngModelChange"],["type","submit","data-dismiss","modal",1,"btn","btn-success"],["id","insurance_modal","tabindex","-1","role","dialog",1,"modal","fade"],[3,"onFinish"],["type","text","name","insurance_member_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","insurance_member_id",1,"form-control",3,"ngModel","ngModelChange"],["id","held_items_modal","tabindex","-1","role","dialog",1,"modal","fade"],["class","row ",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["id","select_shift_modal","tabindex","-1","role","dialog",1,"modal","fade"],["name","shift",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],["id","add_new_product_modal","tabindex","-1","role","dialog",1,"modal"],["id","invoice"],[1,"text-left"],[1,"text-right"],[1,"text-center"],[1,"table"],[3,"bc-value","bc-height","bc-font-size","bc-display-value"],[3,"ngClass"],["title","Item expired",1,"fa","fa-calendar"],["title","Related products with closer expiries","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["title","custom quantity",1,"btn","btn-info","btn-sm",3,"click"],["title","increase quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","decrease quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","The quantity entered is more than the current stock","class","text-danger fa fa-exclamation-triangle",4,"ngIf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-remove"],["title","Related products with closer expiries",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-refresh"],["title","The quantity entered is more than the current stock",1,"text-danger","fa","fa-exclamation-triangle"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["id","amount_paid","size","10","autocomplete","off","type","text","name","amount_paid","value","0",3,"disabled","ngModel","focus","keydown","ngModelChange"],["id","momo_reference","type","text","name","momo_reference",3,"ngModel","keydown","ngModelChange"],[1,"text-muted"],["type","button","data-dismiss","modal",1,"btn","btn-warning"],[1,"btn","btn-sm","btn-success",3,"click"],[3,"value"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],["type","checkbox",3,"checked"],["name","refill_end_date","type","date",3,"ngModel","ngModelChange"],[1,"col-7","fixed_height"],[3,"ngClass","dblclick","click",4,"ngFor","ngForOf"],[1,"col-5","fixed_height"],["class","table table-striped table-bordered table-hover",4,"ngIf"],[3,"ngClass","dblclick","click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"section",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"h4"),o["\u0275\u0275text"](5,"New Sales Receipt"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"app-select-product",5),o["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275elementStart"](11,"table",8),o["\u0275\u0275elementStart"](12,"thead"),o["\u0275\u0275elementStart"](13,"tr"),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15,"Product"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"th"),o["\u0275\u0275text"](17,"Quantity"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"th"),o["\u0275\u0275text"](19,"Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"th"),o["\u0275\u0275text"](21,"Total"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"th"),o["\u0275\u0275text"](23,"On-hand"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](24,"th"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"tbody"),o["\u0275\u0275template"](26,I,28,15,"tr",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"div",10),o["\u0275\u0275elementStart"](28,"div"),o["\u0275\u0275elementStart"](29,"b"),o["\u0275\u0275text"](30),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](31," | "),o["\u0275\u0275template"](32,w,2,0,"button",11),o["\u0275\u0275template"](33,k,5,1,"span",12),o["\u0275\u0275elementStart"](34,"span",13),o["\u0275\u0275elementStart"](35,"button",14),o["\u0275\u0275listener"]("click",(function(){return t.holdItems()})),o["\u0275\u0275text"](36,"Hold"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"button",15),o["\u0275\u0275listener"]("click",(function(){return t.viewHeldItems()})),o["\u0275\u0275text"](38),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](39," \xa0 "),o["\u0275\u0275elementStart"](40,"label",16),o["\u0275\u0275text"](41,"Shift:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"select",17),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.shift=e})),o["\u0275\u0275template"](43,C,2,1,"option",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"button",15),o["\u0275\u0275listener"]("click",(function(){return t.showCustomerModal()})),o["\u0275\u0275element"](45,"i",19),o["\u0275\u0275template"](46,M,4,2,"span",20),o["\u0275\u0275template"](47,q,1,0,"ng-template",null,21,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",13),o["\u0275\u0275elementStart"](50,"b"),o["\u0275\u0275text"](51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](52," | "),o["\u0275\u0275elementStart"](53,"b"),o["\u0275\u0275text"](54,"Method"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](55,"select",22),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.payment_method=e})),o["\u0275\u0275elementStart"](56,"option"),o["\u0275\u0275text"](57,"Cash"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](58,"option"),o["\u0275\u0275text"](59,"Mobile Money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](60,"option"),o["\u0275\u0275text"](61,"Cheque"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"option"),o["\u0275\u0275text"](63,"POS"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](64,"option"),o["\u0275\u0275text"](65,"Credit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](66,"option"),o["\u0275\u0275text"](67,"Insurance"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](68,"option"),o["\u0275\u0275text"](69,"Other"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](70," \xa0| "),o["\u0275\u0275template"](71,F,7,7,"span",12),o["\u0275\u0275template"](72,T,3,0,"span",12),o["\u0275\u0275template"](73,O,4,1,"span",12),o["\u0275\u0275elementStart"](74,"span",13),o["\u0275\u0275elementStart"](75,"button",23),o["\u0275\u0275listener"]("click",(function(){return t.cancel()})),o["\u0275\u0275text"](76,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](77,"button",24),o["\u0275\u0275listener"]("click",(function(){return t.saveLocalItems()})),o["\u0275\u0275text"](78,"Save"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](79,"div",25),o["\u0275\u0275elementStart"](80,"div",26),o["\u0275\u0275template"](81,D,9,2,"div",27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](82,"div",28),o["\u0275\u0275elementStart"](83,"div",26),o["\u0275\u0275elementStart"](84,"div",29),o["\u0275\u0275elementStart"](85,"div",30),o["\u0275\u0275elementStart"](86,"h4"),o["\u0275\u0275text"](87,"Cautions "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](88,"div",31),o["\u0275\u0275template"](89,H,2,0,"h5",32),o["\u0275\u0275template"](90,j,19,5,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](91,"div",33),o["\u0275\u0275elementStart"](92,"button",34),o["\u0275\u0275text"](93,"Ok"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](94,"div",35),o["\u0275\u0275elementStart"](95,"div",26),o["\u0275\u0275elementStart"](96,"div",29),o["\u0275\u0275elementStart"](97,"div",31),o["\u0275\u0275elementStart"](98,"h5"),o["\u0275\u0275text"](99,"The amount paid is less than the total cost. Continue?"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](100,"div",33),o["\u0275\u0275elementStart"](101,"button",36),o["\u0275\u0275listener"]("click",(function(){return t.acceptAmount()})),o["\u0275\u0275text"](102,"Accept"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](103,"button",37),o["\u0275\u0275text"](104,"Reject"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](105,"div",38),o["\u0275\u0275elementStart"](106,"div",39),o["\u0275\u0275elementStart"](107,"div",29),o["\u0275\u0275elementStart"](108,"form",40,41),o["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptItem()})),o["\u0275\u0275elementStart"](110,"div",31),o["\u0275\u0275template"](111,V,2,1,"h5",12),o["\u0275\u0275elementStart"](112,"input",42),o["\u0275\u0275listener"]("keyup",(function(e){return t.keyChangeQuantity(e)}))("ngModelChange",(function(e){return t.new_quantity=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](113,"br"),o["\u0275\u0275elementStart"](114,"button",43),o["\u0275\u0275listener"]("click",(function(){return t.increment()})),o["\u0275\u0275text"](115,"+1"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](116,"button",44),o["\u0275\u0275listener"]("click",(function(){return t.decrement()})),o["\u0275\u0275text"](117,"-1"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](118,"div",33),o["\u0275\u0275elementStart"](119,"button",45),o["\u0275\u0275text"](120,"Accept"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](121,"button",46),o["\u0275\u0275listener"]("click",(function(){return t.rejectItem()})),o["\u0275\u0275text"](122,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](123,"div",47),o["\u0275\u0275elementStart"](124,"div",39),o["\u0275\u0275elementStart"](125,"div",29),o["\u0275\u0275elementStart"](126,"form",40,41),o["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptDiscount()})),o["\u0275\u0275elementStart"](128,"div",31),o["\u0275\u0275elementStart"](129,"h5"),o["\u0275\u0275text"](130,"Enter Discount Amount:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](131,"input",48),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t._discount=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](132,"div",33),o["\u0275\u0275elementStart"](133,"button",45),o["\u0275\u0275text"](134,"Accept"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](135,"button",46),o["\u0275\u0275listener"]("click",(function(){return t.rejectDiscount()})),o["\u0275\u0275text"](136,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](137,"div",49),o["\u0275\u0275elementStart"](138,"div",26),o["\u0275\u0275elementStart"](139,"div",29),o["\u0275\u0275elementStart"](140,"div",31),o["\u0275\u0275elementStart"](141,"h5"),o["\u0275\u0275text"](142),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](143,"div",33),o["\u0275\u0275elementStart"](144,"button",50),o["\u0275\u0275listener"]("click",(function(){return t.finishSale()})),o["\u0275\u0275text"](145,"OK"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](146,"div",51),o["\u0275\u0275elementStart"](147,"div",52),o["\u0275\u0275template"](148,R,22,2,"div",27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](149,"div",53),o["\u0275\u0275elementStart"](150,"div",26),o["\u0275\u0275elementStart"](151,"div",29),o["\u0275\u0275elementStart"](152,"div",30),o["\u0275\u0275elementStart"](153,"h5"),o["\u0275\u0275text"](154,"Customer Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](155,"div",31),o["\u0275\u0275elementStart"](156,"form",40),o["\u0275\u0275listener"]("ngSubmit",(function(){return t.finishSale()})),o["\u0275\u0275elementStart"](157,"div"),o["\u0275\u0275elementStart"](158,"label"),o["\u0275\u0275text"](159,"Customer Name*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](160,"input",54),o["\u0275\u0275listener"]("blur",(function(){return t.getCustomerPhone()}))("change",(function(){return t.getCustomerPhone()}))("keyup",(function(){return t.searchCustomers()}))("ngModelChange",(function(e){return t.customer_name=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](161,"datalist",55),o["\u0275\u0275template"](162,P,2,3,"option",56),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](163,"div"),o["\u0275\u0275elementStart"](164,"label"),o["\u0275\u0275text"](165,"Customer Phone*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](166,"input",57),o["\u0275\u0275listener"]("focus",(function(){return t.getCustomerPhone()}))("ngModelChange",(function(e){return t.customer_phone=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](167,"div"),o["\u0275\u0275elementStart"](168,"label"),o["\u0275\u0275elementStart"](169,"input",58),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.set_refill=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](170," Set Refill?"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](171,K,5,1,"div",12),o["\u0275\u0275template"](172,Q,4,1,"div",12),o["\u0275\u0275elementStart"](173,"button",59),o["\u0275\u0275text"](174,"OK"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](175,"button",37),o["\u0275\u0275text"](176,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](177,"div",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](178,"div",60),o["\u0275\u0275elementStart"](179,"div",26),o["\u0275\u0275elementStart"](180,"div",29),o["\u0275\u0275elementStart"](181,"div",30),o["\u0275\u0275elementStart"](182,"h5"),o["\u0275\u0275text"](183,"Insurance Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](184,"div",31),o["\u0275\u0275elementStart"](185,"form",40),o["\u0275\u0275listener"]("ngSubmit",(function(){return t.finishSale()})),o["\u0275\u0275elementStart"](186,"div"),o["\u0275\u0275elementStart"](187,"label"),o["\u0275\u0275text"](188,"Insurance provider"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](189,"app-select-insurer",61),o["\u0275\u0275listener"]("onFinish",(function(e){return t.setInsurer(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](190,"div"),o["\u0275\u0275elementStart"](191,"label"),o["\u0275\u0275text"](192,"Member Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](193,"input",62),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_name=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](194,"div"),o["\u0275\u0275elementStart"](195,"label"),o["\u0275\u0275text"](196,"Member Id Number"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](197,"input",63),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_id=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](198,"button",59),o["\u0275\u0275text"](199,"OK"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](200,"button",37),o["\u0275\u0275text"](201,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](202,"div",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](203,"div",64),o["\u0275\u0275elementStart"](204,"div",52),o["\u0275\u0275elementStart"](205,"div",29),o["\u0275\u0275elementStart"](206,"div",30),o["\u0275\u0275text"](207," Held Items "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](208,"div",31),o["\u0275\u0275template"](209,J,2,0,"span",12),o["\u0275\u0275template"](210,X,17,2,"div",65),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](211,"div",33),o["\u0275\u0275elementStart"](212,"button",66),o["\u0275\u0275listener"]("click",(function(){return t.unholdSelected()})),o["\u0275\u0275text"](213,"Unhold Selected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](214,"button",67),o["\u0275\u0275listener"]("click",(function(){return t.deleteHeldItem()})),o["\u0275\u0275text"](215,"Delete Selected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](216,"button",46),o["\u0275\u0275listener"]("click",(function(){return t.clearHeldItems()})),o["\u0275\u0275text"](217,"Delete All"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](218,"button",68),o["\u0275\u0275listener"]("click",(function(){return t.closeHeld()})),o["\u0275\u0275text"](219,"Close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](220,"div",69),o["\u0275\u0275elementStart"](221,"div",26),o["\u0275\u0275elementStart"](222,"div",29),o["\u0275\u0275elementStart"](223,"div",31),o["\u0275\u0275elementStart"](224,"h5"),o["\u0275\u0275text"](225,"Select your shift"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](226,"select",70),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.shift=e})),o["\u0275\u0275template"](227,W,2,1,"option",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](228,"br"),o["\u0275\u0275elementStart"](229,"em"),o["\u0275\u0275text"](230,"The selected shift will be applied till you logout. You may change it at any time"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](231,"div",33),o["\u0275\u0275elementStart"](232,"button",71),o["\u0275\u0275listener"]("click",(function(){return t.setShift()})),o["\u0275\u0275text"](233,"OK"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](234,"div",72),o["\u0275\u0275elementStart"](235,"div",52),o["\u0275\u0275elementStart"](236,"div",29),o["\u0275\u0275elementStart"](237,"div",30),o["\u0275\u0275elementStart"](238,"h5"),o["\u0275\u0275text"](239,"Add new product"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](240,"div",31),o["\u0275\u0275elementStart"](241,"app-product-form",61),o["\u0275\u0275listener"]("onFinish",(function(e){return t.productAdded(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](242,"div",33),o["\u0275\u0275elementStart"](243,"button",37),o["\u0275\u0275text"](244,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](245,"div",73),o["\u0275\u0275elementStart"](246,"div"),o["\u0275\u0275elementStart"](247,"div"),o["\u0275\u0275elementStart"](248,"span",74),o["\u0275\u0275text"](249),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](250,"span",75),o["\u0275\u0275text"](251),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](252,"br"),o["\u0275\u0275elementStart"](253,"div",76),o["\u0275\u0275elementStart"](254,"b"),o["\u0275\u0275text"](255),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](256,"br"),o["\u0275\u0275text"](257),o["\u0275\u0275element"](258,"br"),o["\u0275\u0275text"](259),o["\u0275\u0275element"](260,"br"),o["\u0275\u0275text"](261),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](262,"br"),o["\u0275\u0275elementStart"](263,"b"),o["\u0275\u0275text"](264,"Cashier:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](265),o["\u0275\u0275element"](266,"hr"),o["\u0275\u0275elementStart"](267,"table",77),o["\u0275\u0275elementStart"](268,"thead"),o["\u0275\u0275elementStart"](269,"tr"),o["\u0275\u0275elementStart"](270,"th"),o["\u0275\u0275text"](271,"Item Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](272,"th"),o["\u0275\u0275text"](273,"Qty"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](274,"th"),o["\u0275\u0275text"](275,"Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](276,"th"),o["\u0275\u0275text"](277,"Ext. Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](278,"tbody"),o["\u0275\u0275template"](279,Z,9,4,"tr",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](280,"br"),o["\u0275\u0275element"](281,"br"),o["\u0275\u0275elementStart"](282,"div"),o["\u0275\u0275elementStart"](283,"span",75),o["\u0275\u0275text"](284),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](285,"br"),o["\u0275\u0275elementStart"](286,"span",75),o["\u0275\u0275text"](287),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](288,"br"),o["\u0275\u0275elementStart"](289,"span",75),o["\u0275\u0275text"](290,"Local Sales Tax: 0% Tax: + 0.00 "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](291,"br"),o["\u0275\u0275elementStart"](292,"b",75),o["\u0275\u0275text"](293),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](294,"br"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](295,"div",76),o["\u0275\u0275text"](296),o["\u0275\u0275element"](297,"br"),o["\u0275\u0275elementStart"](298,"b",13),o["\u0275\u0275text"](299),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](300,"br"),o["\u0275\u0275element"](301,"ngx-barcode",78),o["\u0275\u0275element"](302,"br"),o["\u0275\u0275elementStart"](303,"b",76),o["\u0275\u0275text"](304,"Thanks for shopping with us!"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](305,"div",76),o["\u0275\u0275text"](306," Druglane Pharmacy POS Software - 0207085244 "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](307,"br"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](48);o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("timestamp",t.ts)("type","search"),o["\u0275\u0275advance"](19),o["\u0275\u0275property"]("ngForOf",t.items),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("Total: GHC ",t.sale_total.toFixed(2)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",0==t.discount),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.discount>0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.items.length<1),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("Held Items (",t.held_items.length,")"),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.shift),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.shifts),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!t.isEmpty(t.customer_name))("ngIfElse",e),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("Amount to be paid: GHC ",t.discounted_total.toFixed(2)," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.payment_method),o["\u0275\u0275advance"](16),o["\u0275\u0275property"]("ngIf","Cash"==t.payment_method),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","Insurance"==t.payment_method),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","Mobile Money"==t.payment_method),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngIf",null!=t.info_item),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngIf",t.cautions.length<1),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.cautions),o["\u0275\u0275advance"](21),o["\u0275\u0275property"]("ngIf",null!=t.new_item),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",t.new_quantity),o["\u0275\u0275advance"](19),o["\u0275\u0275property"]("ngModel",t._discount),o["\u0275\u0275advance"](11),o["\u0275\u0275textInterpolate1"]("Change due: GHC ",(t.amount_paid-t.sale_total).toFixed(2)," "),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngIf",null!=t.selected_related),o["\u0275\u0275advance"](12),o["\u0275\u0275property"]("ngModel",t.customer_name),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.customer_objects),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.customer_phone),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",t.set_refill),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.set_refill),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.set_refill),o["\u0275\u0275advance"](21),o["\u0275\u0275property"]("ngModel",t.insurance_member_name),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.insurance_member_id),o["\u0275\u0275advance"](12),o["\u0275\u0275property"]("ngIf",t.held_items.length<1),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.held_items.length>0),o["\u0275\u0275advance"](16),o["\u0275\u0275property"]("ngModel",t.shift),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.shifts),o["\u0275\u0275advance"](22),o["\u0275\u0275textInterpolate1"]("",t.time," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("#",t.selected_code,""),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("",t.company_name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.company_address," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" DIGITAL ADDRESS ",t.digital_address," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.company_phone," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",t.cashier," "),o["\u0275\u0275advance"](14),o["\u0275\u0275property"]("ngForOf",t.receipt_items),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" Subtotal: ",t.receipt_total.toFixed(2)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" Discount: ",t.receipt_discount.toFixed(2)," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" RECEIPT TOTAL: ",t.receipt_discounted_total.toFixed(2)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate2"](" ",t.payment_method," GHC ",t.receipt_amount_paid," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" Change: ",(t.receipt_amount_paid-t.receipt_discounted_total).toFixed(2)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("bc-value",t.selected_code)("bc-height",35)("bc-font-size",13)("bc-display-value",!0)}},directives:[p.a,i.i,i.j,f.m,f.e,f.h,f.i,f.n,f.f,f.g,f.b,f.l,f.a,_.a,g.a,b.a,i.h],styles:[""]}),e})()}];let te=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(ee)],a.f]}),e})();var ne=n("nEHF"),ie=n("rNAZ"),ae=n("nBlB");let le=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,te,ne.a,ie.a,ae.a]]}),e})()},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("nEHF"),l=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a]]}),e})()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("nEHF"),l=n("6QD7"),r=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a,l.b],l.b]}),e})()}}]);