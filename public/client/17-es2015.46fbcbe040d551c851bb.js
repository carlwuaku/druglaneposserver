(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4j6H":function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("fXoL"),r=n("c92J"),a=n("1VJT"),o=n("BbYg"),s=n("ccyI"),l=n("ofXK"),d=n("hiAm"),c=n("3Pt+"),m=n("tyNb");function h(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",9),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function f(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"label"),i["\u0275\u0275text"](2,"Select Product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"select",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).select_product=t}))("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).productSelected()})),i["\u0275\u0275template"](4,p,2,2,"option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",e.select_product),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"button",5),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().addProduct()})),i["\u0275\u0275text"](3,"Add Product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,h,1,0,"app-loading",6),i["\u0275\u0275template"](5,u,3,0,"div",6),i["\u0275\u0275template"](6,f,5,2,"div",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",e.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_finished_search)}}function g(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",17),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate3"]("",e.name," [price: ",e.price,"/",e.unit,"]")}}function x(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275elementStart"](2,"input",15),i["\u0275\u0275listener"]("keyup",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).filterlist()}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).filter_param=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,y,3,3,"a",16),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",e.filter_param),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.filter_results)}}function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275elementStart"](1,"div",11),i["\u0275\u0275elementStart"](2,"button",5),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().addProduct()})),i["\u0275\u0275text"](3,"Add Product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,g,1,0,"app-loading",6),i["\u0275\u0275template"](5,b,3,0,"div",6),i["\u0275\u0275template"](6,x,4,2,"div",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",e.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.is_finished_search)}}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}const E=function(e){return{"select-product-active":e}};function w(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",23),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).add(n)})),i["\u0275\u0275text"](1),i["\u0275\u0275element"](2,"br"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,E,n==r.arrowkeyLocation)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate3"](" [price: ",e.price,"/",e.unit,"] [stock: ",e.stock,"] ")}}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",21),i["\u0275\u0275elementStart"](1,"ul",13),i["\u0275\u0275template"](2,w,4,7,"li",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.objects)}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," Item not found. Check the spelling. Or "),i["\u0275\u0275elementStart"](2,"a",24),i["\u0275\u0275element"](3,"i",25),i["\u0275\u0275text"](4," click here to add a new product"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275elementStart"](1,"input",19),i["\u0275\u0275listener"]("keyup",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().param=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,v,3,0,"div",6),i["\u0275\u0275template"](3,C,3,1,"div",20),i["\u0275\u0275template"](4,I,5,0,"div",6),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.param),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.error_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length>0&&e.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.objects.length<1&&e.is_finished_search)}}let M=(()=>{class e{constructor(e,t,n,r){this.dbService=e,this.notify=t,this.localforage=n,this.authService=r,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="search",this.show="no",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.added=[],this.filter_param="",this.filter_results=[],this.local_products=[],this.arrowkeyLocation=0,$(".search_results").on("click",(function(){$("#sales_search").focus()}))}ngOnInit(){"list"!=this.type&&"select"!=this.type||this.list()}hideSearchResults(){this.param="",this.objects.length=0,this.is_finished_search=!1}ngOnChanges(){console.log(this.timestamp),$("#sales_search").focus()}productSelected(){for(let e=0;e<this.objects.length;e++)if(this.objects[e].id==this.select_product){this.onAdd.emit(this.objects[e]);break}}addProduct(){$("#add_product_modal").modal("show")}productAdded(e){console.log(e),e.price=parseFloat(e.price),this.objects.push(e),this.onAdd.emit(e),$("#add_product_modal").modal("hide")}list(){this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getData("product/getList",this.authService.current_user).subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.filter_results="yes"==this.show?this.objects:[],this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1)},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1})}filterlist(){let e=this.filter_param;this.filter_results=null==e||null==e||e.length<1?"yes"==this.show?this.objects:[]:this.objects.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}add(e){this.onAdd.emit(e),console.log(e),this.is_finished_search=!1,$("#sales_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}search(){""!=this.param.trim()&&null!=this.param&&null!=this.param?(this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("admin/search",this.authService.current_user,"param="+this.param+"&type=Products&limit=10").subscribe(e=>{"-1"===e.status?(this.is_searching=!1,this.is_finished_search=!1,this.error_search=!0):(this.objects=e.data,this.objects.map(e=>{e.price=parseFloat(e.price)}),this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1,this.selected=null,1==this.objects.length&&this.select(this.objects[0]))},e=>{this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1})):this.objects=[]}localSearch(){this.is_searching=!0,this.localforage.getItem(this.dbService.PRODUCT_LIST_KEY).subscribe(e=>{if(this.local_products=e,this.is_finished_search=!1,this.error_search=!1,this.param.length<1)return this.objects=[],this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,!1;if(null==this.local_products)return this.objects=[],this.notify.failNotification("No Products! Please refresh the page"),this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,!1;var t=this.param.toLowerCase().trim();console.log(this.param);let n=t.split(" ");var i=this.local_products.filter((function(e){for(let t=0;t<n.length;t++)if(-1==e.name.toLowerCase().indexOf(n[t])&&e.barcode!=n[t])return!1;return!0}));i.sort((function(e,n){let i=e.name.toLowerCase(),r=n.name.toLowerCase();return i.indexOf(t)<r.indexOf(t)?-1:i>r?1:0})),this.objects=i.slice(0,i.length>10?9:i.length),this.is_searching=!1,this.is_finished_search=!0,this.error_search=!1},e=>{this.notify.failNotification("Failed to get products. Please refresh the page")})}select(e){this.selected=e,this.onFinish.emit(e)}highlightObject(e){this.objects.map(e=>{e.selected=!1}),this.highlightedObject=e,e.selected=!0}keyUp(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:let e=this.objects[this.arrowkeyLocation];null!=e&&null!=e&&this.add(e);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.localSearch()}}focusCursor(){let e=$("#sales_search").val();$("#sales_search").val("").val(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](o.LocalForageService),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-product"]],inputs:{btn_text:"btn_text",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[["class","",4,"ngIf"],["class","card z-depth-bottom-1",4,"ngIf"],["class","focus_search",4,"ngIf"],[1,""],[1,"body"],[1,"btn","btn-inverse","btn-sm",3,"click"],[4,"ngIf"],["name","products",1,"product",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"card","z-depth-bottom-1"],[1,"card-body"],["class","list-group",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["placeholder","Search...","type","text","name","filter_param",1,"form-control",3,"ngModel","keyup","ngModelChange"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter product names or barcode","required","","type","text","id","sales_search","name","search",3,"ngModel","keyup","ngModelChange"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"],["routerLink","/add_product"],[1,"feather","icon-plus"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,_,7,3,"div",0),i["\u0275\u0275template"](1,S,7,3,"div",1),i["\u0275\u0275template"](2,k,5,4,"div",2)),2&e&&(i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","list"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","search"==t.type))},directives:[l.j,d.a,c.m,c.e,c.h,l.i,c.i,c.n,c.b,c.l,l.h,m.e],styles:[".link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),e})()},TFay:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),r=n("mS1k"),a=n("c92J"),o=n("bgkY"),s=n("1VJT"),l=n("ccyI"),d=n("ofXK"),c=n("3Pt+"),m=n("jr2M");function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",23),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function u(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",24),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).object.unit=t})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngModel",e.object.unit)}}function p(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",25),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).object.category=t})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngModel",e.object.category)}}function f(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"label"),i["\u0275\u0275text"](2,"Starting stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"br"),i["\u0275\u0275elementStart"](4,"input",26),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).object.stock=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",e.object.stock)}}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"form",1,2),i["\u0275\u0275listener"]("ngSubmit",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().submit()})),i["\u0275\u0275elementStart"](2,"div",3),i["\u0275\u0275elementStart"](3,"em"),i["\u0275\u0275text"](4,"Fields marked * are required"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"label"),i["\u0275\u0275text"](8,"Product Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"br"),i["\u0275\u0275elementStart"](10,"input",6),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.name=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275elementStart"](12,"label"),i["\u0275\u0275text"](13,"Cost Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"br"),i["\u0275\u0275elementStart"](15,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.cost_price=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",5),i["\u0275\u0275elementStart"](17,"label"),i["\u0275\u0275text"](18," Selling Price*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"br"),i["\u0275\u0275elementStart"](20,"input",8),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.price=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",4),i["\u0275\u0275elementStart"](22,"div",5),i["\u0275\u0275elementStart"](23,"label"),i["\u0275\u0275text"](24,"Unit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](25,"br"),i["\u0275\u0275elementStart"](26,"select",9),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().unit_selected=t})),i["\u0275\u0275template"](27,h,2,2,"option",10),i["\u0275\u0275elementStart"](28,"option",11),i["\u0275\u0275text"](29,"Other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](30,u,1,1,"input",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",5),i["\u0275\u0275elementStart"](32,"label"),i["\u0275\u0275text"](33,"Category"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"br"),i["\u0275\u0275elementStart"](35,"div"),i["\u0275\u0275elementStart"](36,"app-select-product-category",13),i["\u0275\u0275listener"]("onFinish",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().categorySelected(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](37,p,1,1,"input",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",5),i["\u0275\u0275elementStart"](39,"label"),i["\u0275\u0275text"](40,"Minimum stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](41,"br"),i["\u0275\u0275elementStart"](42,"input",15),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.min_stock=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"div",4),i["\u0275\u0275template"](44,f,5,1,"div",16),i["\u0275\u0275elementStart"](45,"div",5),i["\u0275\u0275elementStart"](46,"label"),i["\u0275\u0275text"](47,"Maximum stock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](48,"br"),i["\u0275\u0275elementStart"](49,"input",17),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.max_stock=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"div",5),i["\u0275\u0275elementStart"](51,"label"),i["\u0275\u0275text"](52,"Closest expiry"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](53,"br"),i["\u0275\u0275elementStart"](54,"input",18),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.expiry=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"div",4),i["\u0275\u0275elementStart"](56,"div",5),i["\u0275\u0275elementStart"](57,"label"),i["\u0275\u0275text"](58,"Barcode"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](59,"br"),i["\u0275\u0275elementStart"](60,"input",19),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.barcode=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"div",5),i["\u0275\u0275elementStart"](62,"label"),i["\u0275\u0275text"](63,"Notes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](64,"br"),i["\u0275\u0275elementStart"](65,"textarea",20),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().object.notes=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](66,"input",21),i["\u0275\u0275element"](67,"input",22),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngModel",e.object.name),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.cost_price),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.price),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",e.unit_selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.units),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf","other"==e.unit_selected),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("selected",e.object.category),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","other"==e.category_selected),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.min_stock),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==e.id),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.max_stock),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.expiry),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",e.object.barcode),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.object.notes)}}let g=(()=>{class e{constructor(e,t,n,a){this.dbService=e,this.socket=t,this.notify=n,this.authService=a,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.units=["ampoule","bottle","box","capsule","carton","glove","inhaler","pack","pessary","piece","roll","strip","suppository","syringe","tablet","tube","vial"],this.unit_selected="",this.category_selected="",this.uploadUrl="admin/uploadPicture",this.can_master_edit=!0,this.can_edit=!0,this.object=new r.a,this.units=this.dbService.units}ngOnInit(){null==this.id||null==this.id||this.getobject(this.id)}ngOnChanges(){null==this.id||null==this.id||this.getobject(this.id)}getobject(e){this.dbService.getDataWithQuery("product/findById",this.authService.current_user,"id="+this.id).subscribe(e=>{if(this.object=e.data,this.unit_selected=this.object.unit,this.pic_location=this.object.picture,null!=this.object.picture){var t=this.object.picture.split("/");this.object.picture=t.pop()}this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}categorySelected(e){this.category_selected=e,"other"!=this.category_selected&&(this.object.category=e)}uploadFinished(e){this.pic_location=e,this.object.picture=e}submit(){this.notify.showLoading(),"other"!=this.unit_selected&&(this.object.unit=this.unit_selected);let e=new FormData;for(let t in this.object)e.append(t,this.object[t]);null!=this.id&&null!=this.id||e.append("createdAt",this.dbService.getToday()),e.append("display_name",this.authService.current_user.display_name),null!=this.object.notes&&null!=this.object.notes||e.append("notes",""),this.dbService.postData(e,"product/saveBranchDetails",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"0"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):"-1"===e.status?this.notify.showNotification("Server error. Please contact admin","fail",3e3):(null!=this.id&&null!=this.id||(this.object.id=e.status),this.notify.successNotification("Product saved successfully"),this.socket.sendEvent({company_id:this.authService.current_user.company_id,parent_company_id:this.authService.current_user.parent_company,message:`Product update received:  ${this.object.name}`,product:this.object,event:"product_update"}),this.onFinish.emit(this.object),this.object=new r.a)},e=>{this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-form"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,""],[1,"row","bottom-margin"],[1,"col-md-4"],["required","","type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["required","","type","text","name","cost_price",1,"form-control",3,"ngModel","ngModelChange"],["required","","type","text","name","price",3,"ngModel","ngModelChange"],["name","unit",1,"",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","other"],["class","form-control","type","text","name","unit",3,"ngModel","ngModelChange",4,"ngIf"],[3,"selected","onFinish"],["class","form-control","required","","type","text","name","category",3,"ngModel","ngModelChange",4,"ngIf"],["required","","type","text","name","min_stock",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-4",4,"ngIf"],["required","","type","text","name","max_stock",1,"form-control",3,"ngModel","ngModelChange"],["required","","type","date","name","expiry",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","barcode",1,"form-control",3,"ngModel","ngModelChange"],["name","notes","rows","3","cols","40",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"],["type","reset","name","reset","value","Reset",1,"btn","btn-warning"],[3,"value"],["type","text","name","unit",1,"form-control",3,"ngModel","ngModelChange"],["required","","type","text","name","category",1,"form-control",3,"ngModel","ngModelChange"],["required","","type","text","name","stock",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,_,68,14,"form",0),2&e&&i["\u0275\u0275property"]("ngIf",t.can_edit)},directives:[d.j,c.f,c.g,c.b,c.l,c.e,c.h,c.m,d.i,c.i,c.n,m.a],styles:[""]}),e})()},"a/do":function(e,t,n){"use strict";n.r(t),n.d(t,"NewSaleModule",(function(){return U}));var i=n("ofXK"),r=n("tyNb"),a=n("XC36");class o{constructor(){}}class s{constructor(){}}var l=n("fXoL"),d=n("c92J"),c=n("bgkY"),m=n("1VJT"),h=n("eJvr"),u=n("ccyI"),p=n("4j6H"),f=n("3Pt+"),_=n("yGzR"),g=n("TFay"),b=n("6QD7");function y(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"em",67),l["\u0275\u0275element"](1,"br"),l["\u0275\u0275element"](2,"i",68),l["\u0275\u0275text"](3," Possibly expired"),l["\u0275\u0275elementEnd"]())}function x(e,t){1&e&&l["\u0275\u0275element"](0,"i",69)}const S=function(e){return{"table-warning":e}};function v(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",59),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275template"](3,y,4,0,"em",60),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"td"),l["\u0275\u0275text"](5),l["\u0275\u0275element"](6,"br"),l["\u0275\u0275elementStart"](7,"button",61),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().editItem(n)})),l["\u0275\u0275text"](8," ... "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"button",62),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().increment(n)})),l["\u0275\u0275text"](10," +1 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"button",63),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().decrement(n)})),l["\u0275\u0275text"](12," -1 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"td"),l["\u0275\u0275text"](14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"td"),l["\u0275\u0275text"](16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"td"),l["\u0275\u0275text"](18),l["\u0275\u0275template"](19,x,1,0,"i",64),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"td"),l["\u0275\u0275elementStart"](21,"button",65),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().removeItem(n)})),l["\u0275\u0275element"](22,"i",66),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](8,S,e.stock<1||e.quantity>e.stock)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.product_name," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.expired),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",e.quantity," "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate"](e.price),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"]((e.price*e.quantity).toFixed(2)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.stock," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.stock<1||e.quantity>e.stock)}}function E(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",70),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().applyDiscount()})),l["\u0275\u0275text"](1,"Apply Discount"),l["\u0275\u0275elementEnd"]()}}function w(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275elementStart"](2,"button",71),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().removeDiscount()})),l["\u0275\u0275element"](3,"i",66),l["\u0275\u0275text"](4," Remove"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("Discount Applied: GHC ",e.discount," ")}}const C=function(e,t){return{"text-danger":e,"text-success":t}};function I(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2,"Cash Paid:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",72),l["\u0275\u0275listener"]("focus",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().clearAmountPaid()}))("keydown",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().amount_paid=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4," \xa0| \xa0 "),l["\u0275\u0275elementStart"](5,"b",59),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled","Cash"!=e.payment_method)("ngModel",e.amount_paid),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](4,C,e.amount_paid<e.discounted_total,e.amount_paid>e.discounted_total)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" Change Due: GHC ",(e.amount_paid-e.discounted_total).toFixed(2),"")}}function k(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"button",15),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().showInsurerModal()})),l["\u0275\u0275text"](2,"Enter Insurance Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function M(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2,"Customer Name: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",73),l["\u0275\u0275listener"]("keydown",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().creditor_name=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",e.creditor_name)}}function j(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2,"Momo Reference: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"input",74),l["\u0275\u0275listener"]("keydown",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().keyUp(t)}))("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().momo_reference=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",e.momo_reference)}}function F(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h5"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("Quantity for ",e.new_item.name,"")}}function q(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1,"No held items"),l["\u0275\u0275elementEnd"]())}const V=function(e){return{"table-primary":e}};function O(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",79),l["\u0275\u0275listener"]("dblclick",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"](2).unhold(n)}))("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"](2).selectHeldItem(n)})),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](5,V,i.selectedHeldItem==e)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",n+1," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.user," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.time," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.items.length," ")}}function N(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.product_name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.quantity," ")}}function L(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"table",8),l["\u0275\u0275elementStart"](1,"thead"),l["\u0275\u0275elementStart"](2,"tr"),l["\u0275\u0275elementStart"](3,"th"),l["\u0275\u0275text"](4,"Item"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Quantity"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"tbody"),l["\u0275\u0275template"](8,N,5,2,"tr",57),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngForOf",e.selectedHeldItem.items)}}function T(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",2),l["\u0275\u0275elementStart"](1,"div",75),l["\u0275\u0275elementStart"](2,"table",8),l["\u0275\u0275elementStart"](3,"thead"),l["\u0275\u0275elementStart"](4,"tr"),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Saved by"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Num. Items"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"tbody"),l["\u0275\u0275template"](14,O,9,7,"tr",76),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",77),l["\u0275\u0275template"](16,L,9,1,"table",78),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](14),l["\u0275\u0275property"]("ngForOf",e.held_items),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",null!=e.selectedHeldItem)}}function A(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.product.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.quantity),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.price),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",(e.quantity*e.price).toFixed(2)," ")}}const H=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r){this.dbService=e,this.socket=t,this.notify=n,this.localforage=i,this.authService=r,this.items=[],this.held_items=[],this.new_item=null,this.selectedHeldItem=null,this.new_quantity="",this.sale_total=0,this.amount_paid=0,this.receipt_amount_paid=0,this.receipt_items=[],this.accept_amount=!1,this.invoice_items=[],this.receipt_total=0,this.time="",this.digital_address="",this.ts="",this.payment_method="Cash",this.key_state="none",this.insurer_id=null,this.insurance_member_name=null,this.insurance_member_id=null,this.momo_reference=null,this.creditor_name=null,this.discount=0,this.discounted_total=0,this.receipt_discount=0,this.receipt_discounted_total=0,-1==this.authService.current_user.permissions.indexOf("Create Sales")&&(this.notify.failNotification("You are not permitted to view that page"),this.goBack()),this.company_address=r.current_user.company_address,this.company_phone=r.current_user.company_phone,this.company_name=r.current_user.company_name,this.cashier=r.current_user.display_name,this.digital_address=r.current_user.digital_address,this.dbService.setTitle("New Sales")}keyEvent(e){if(e.ctrlKey&&13==e.keyCode||35==e.keyCode)switch(console.log(this.payment_method),this.payment_method){case"Cash":0==this.amount_paid||null==this.amount_paid?(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"})):this.saveLocalItems();break;case"Mobile Money":console.log(this.momo_reference),null==this.momo_reference||null==this.momo_reference||""==this.momo_reference.trim()?this.alertMomo():this.saveLocalItems();break;case"Credit":null==this.creditor_name||null==this.creditor_name||""==this.creditor_name.trim()?this.alertCredit():this.saveLocalItems()}else if("Home"==e.code)console.log("home"),this.ts=this.dbService.getToday("timestamp_string");else if(27==e.keyCode)switch(this.key_state){case"item_quantity":this.rejectItem();break;case"alert_change":$("#sale_confirm_modal").modal("hide");break;case"held_items":$("#held_items_modal").modal("hide");break;case"discount_modal":$("#discount_modal").modal("hide")}else if(13==e.keyCode)switch(this.key_state){case"alert_change":this.acceptAmount(),this.key_state="";break;case"show_change":this.finishSale(),this.key_state="";break;case"held_items":this.unholdSelected(),this.key_state=""}else if(40==e.keyCode)switch(this.key_state){case"held_items":let e,t=this.held_items.indexOf(this.selectedHeldItem);e=t==this.held_items.length-1?0:t+1,this.selectedHeldItem=this.held_items[e]}else if(38==e.keyCode)switch(this.key_state){case"held_items":let e,t=this.held_items.indexOf(this.selectedHeldItem),n=this.held_items.length-1;e=0==t?n:t-1,this.selectedHeldItem=this.held_items[e]}}ngOnInit(){this.ts=this.dbService.getToday(),this.held_items=JSON.parse(localStorage.getItem("heldItems")),null==this.held_items&&(this.held_items=[]),$("#sales_search").focus()}productSelected(e){if(this.new_item=e,this.new_item.stock=e.stock,"number"!=typeof e.price)return this.notify.failNotification("Price not defined."),!1;let t=!1;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e.id){t=!0;break}if(t)return this.notify.failNotification("Item is already in the list"),!1;this.getItemStock(),this.showQuantityModal()}showQuantityModal(){this.key_state="item_quantity",$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#new_quantity").focus()}))}getItemStock(){const e=this.new_item.id;this.dbService.getData("product/getStock?id="+this.new_item.id,this.authService.current_user).subscribe(t=>{if("1"==t.status){this.new_item.stock=t.data;for(let n=0;n<this.items.length;n++)if(this.items[n].product_id==e){this.items[n].stock=t.data;break}}},e=>{this.new_item.stock=0,this.notify.failNotification("Unable to get stock. Check connection")})}acceptItem(){let e=new a.a;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.price=this.new_item.price,e.cost_price=this.new_item.cost_price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_item.price,e.stock=this.new_item.stock,e.product=this.new_item,e.expired=this.new_item.expired,this.items.push(e),this.getTotal(),$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string")}rejectItem(){$("#quantity_modal").modal("hide"),this.new_quantity="",this.ts=this.dbService.getToday("timestamp_string")}getTotal(){let e=0;this.items.map(t=>{e+=t.quantity*t.price}),this.sale_total=e,this.receipt_total=e,this.discounted_total=e-this.discount,this.receipt_discount=this.discount-0,this.receipt_discounted_total=e-this.discount}removeItem(e){this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.ts=this.dbService.getToday("timestamp_string")}editItem(e){this.new_item=e.product,this.items.splice(this.items.indexOf(e),1),this.getTotal(),this.new_item=e.product,this.new_quantity=e.quantity,$("#quantity_modal").modal({backdrop:"static",keyboard:!1}),$("#quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}showInsurerModal(){$("#insurance_modal").modal({backdrop:"static",keyboard:!1})}alertMomo(){return $("#momo_reference").focus(),$("#momo_reference").tooltip({title:"Enter the reference/transaction number"}),!1}alertCredit(){return $("#creditor_name").focus(),$("#creditor_name").tooltip({title:"Enter the customer name or number"}),!1}setInsurer(e){this.insurer_id=e.name}setQuantities(){let e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}alert(){this.key_state="alert_change",$("#sale_confirm_modal").modal({backdrop:"static",keyboard:!1})}acceptAmount(){this.accept_amount=!0,this.saveLocalItems()}saveLocalItems(){if(console.log(this.amount_paid<this.discounted_total),console.log("accept amount",this.accept_amount),console.log(this.payment_method),"Insurance"==this.payment_method&&(this.dbService.isEmpty(this.insurer_id)||this.dbService.isEmpty(this.insurance_member_name)||this.dbService.isEmpty(this.insurance_member_name)))return this.showInsurerModal(),!1;if("Mobile Money"==this.payment_method&&this.dbService.isEmpty(this.momo_reference))return this.alertMomo(),!1;if("Credit"==this.payment_method&&null==this.creditor_name)return this.alertCredit(),!1;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(this.amount_paid<this.discounted_total&&!this.accept_amount&&"Cash"==this.payment_method)return console.log("caught"),this.alert(),!1;this.notify.showLoading(),this.receipt_items=[];for(let n=0;n<this.items.length;n++)this.receipt_items.push(this.items[n]);let e;this.accept_amount=!1,"Cash"!=this.payment_method?(this.receipt_amount_paid=this.sale_total,this.amount_paid=this.sale_total):this.receipt_amount_paid=this.amount_paid;let t=new s;t.display_name=this.authService.current_user.display_name,t.date=this.dbService.getToday(),t.created_on=this.dbService.getToday("timestamp"),t.created_by=this.authService.current_user.id,t.payment_method=this.payment_method,t.amount_paid=this.amount_paid,t.items=this.items,t.company_id=this.authService.current_user.company_id,t.code=this.authService.current_user.id+""+this.dbService.getToday("timestamp_string"),t.insurance_provider=this.insurer_id,t.insurance_member_name=this.insurance_member_name,t.insurance_member_id=this.insurance_member_id,t.momo_reference=this.momo_reference,t.creditor_name=this.creditor_name,t.discount=this.discount,this.time=this.dbService.getToday("timestamp"),this.selected_code=t.code,this.localforage.getItem(this.dbService.OFFLINE_SALES_KEY).subscribe(n=>{if(e=null!=n?n:[],e.push(t),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,e),this.dbService.unsynced_sales.next(e),localStorage.setItem("receipt_total",JSON.stringify(this.sale_total)),this.notify.hideLoading(),this.saveItems(t.code),this.amount_paid>this.sale_total)return $("#change_modal").modal({backdrop:"static",keyboard:!1}),$("#change_modal").on("shown.bs.modal",(function(){$("#finish_sale_btn").focus()})),!1;this.finishSale()},n=>{this.notify.hideLoading(),e=[],console.log("local forage new sales save error",n),e.push(t),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,e),this.selected_code=t.code,localStorage.setItem("receipt_total",JSON.stringify(this.sale_total))})}saveItems(e){let t=[],n=[],i=[],r=[],a=[];this.ts=this.dbService.getToday("timestamp_string");for(let s=0;s<this.items.length;s++){let e=this.items[s];t.push(e.product_id),n.push(e.price),i.push(e.quantity),r.push(e.product_name),a.push(e.cost_price)}const o=new FormData;o.append("products",t.join("||")),o.append("prices",n.join("||")),o.append("cost_prices",a.join("||")),o.append("quantities",i.join("||")),o.append("code",e),o.append("product_names",r.join("||")),o.append("amount_paid",this.amount_paid.toString()),o.append("discount",this.discount.toString()),o.append("created_by",this.authService.current_user.id),o.append("date",this.dbService.getToday()),o.append("created_on",this.dbService.getToday("timestamp")),o.append("display_name",this.authService.current_user.display_name),o.append("payment_method",this.payment_method),"Insurance"==this.payment_method&&(o.append("insurance_provider",this.insurer_id),o.append("insurance_member_name",this.insurance_member_name),o.append("insurance_member_id",this.insurance_member_id)),"Mobile Money"===this.payment_method&&o.append("momo_reference",this.momo_reference),"Credit"===this.payment_method&&o.append("creditor_name",this.creditor_name),this.dbService.postData(o,"sale/saveBulk",this.authService.current_user).subscribe(t=>{this.notify.hideLoading(),"0"===t.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-1"===t.status?alert("Server error. Please click the `Upload Sales menu in the top bar to try again` "):"-9"===t.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.notify.successNotification("Sales synced successfully"),this.localforage.getItem(this.dbService.OFFLINE_SALES_KEY).subscribe(t=>{let n=t;console.log(n.length);for(let i=0;i<n.length;i++)if(n[i].code==e){n.splice(i,1);break}this.socket.sendEvent({company_id:this.authService.current_user.company_id,parent_company_id:this.authService.current_user.parent_company.id,message:"New sale",event:"new_sale"}),this.localforage.setItem(this.dbService.OFFLINE_SALES_KEY,n),this.dbService.unsynced_sales.next(n)}))},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification(),console.log(e)})}sync(){}increment(e){null!=e&&null!=e?(e.quantity=(parseFloat(e.quantity)+1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),this.new_quantity++,$("#new_quantity").focus(),this.focusCursor())}decrement(e){null!=e&&null!=e?parseFloat(e.quantity)>1&&(e.quantity=(parseFloat(e.quantity)-1).toString(),this.getTotal()):(this.dbService.isEmpty(this.new_quantity)&&(this.new_quantity=0),parseFloat(this.new_quantity)>1&&this.new_quantity--,$("#new_quantity").focus(),this.focusCursor())}keyChangeQuantity(e){40==e.keyCode?this.decrement():38==e.keyCode&&this.increment(),this.focusCursor()}closeHeld(){$("#held_items_modal").modal("hide"),this.key_state=""}finishSale(){this.items=[],this.amount_paid=0,this.insurance_member_id="",this.insurance_member_name="",this.momo_reference="",this.discount=0,this._discount=null,this.discounted_total=0,this.getTotal(),this.print(),this.ts=this.dbService.getToday("timestamp_string")}cancel(){this.items=[],this.amount_paid=0,this.getTotal()}goBack(){window.history.back()}keyUp(e){switch(e.keyCode){case 13:this.saveLocalItems()}}print(){let e,t,n=0;e="",this.receipt_items.map(e=>{n+=e.quantity*e.product.price}),this.receipt_total=n,e=document.getElementById("invoice").innerHTML,t=window.open("","_blank","top=0,left=0,height=100%,width=auto"),t.document.open(),t.document.write(`\n          <html>\n            <head>\n              <title>Invoice</title>\n              <style>\n              body{\n                font-size: 13px;\n              }\n              #invoice { page-break-after: always; }\n    #invoice:last-child { page-break-after: avoid; }\n\n\n    table{\n        width: 100%;\n        border: 1px solid #e9ecef;\n        font-size: 13px !important;\n    }\n\n    .small-margin{\n      margin-bottom: 10px;\n    }\n\n    .table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}\n           .center{\n             text-align:center\n           }\n           .text-left{text-align:left!important}.text-right{text-align:right!important; float:right}\n           .text-center{text-align:center!important}\n           @media (min-width:576px){.text-sm-left{text-align:left!important}\n           .text-sm-right{text-align:right!important}\n           .text-sm-center{text-align:center!important}}\n           @media (min-width:768px){.text-md-left{text-align:left!important}\n           .text-md-right{text-align:right!important}\n           .text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}\n\n           .row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}\n              </style>\n            </head>\n        <body onload="window.print();window.close()"><div id="invoice">${e}</div> </body>\n          </html>`),t.document.close(),this.ts=this.dbService.getToday("timestamp_string")}holdItems(){let e=new o;e.items=this.items,e.user=this.authService.current_user.display_name,e.time=this.dbService.getToday("timestamp"),this.held_items.push(e),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),this.items=[],this.getTotal(),this.ts=this.dbService.getToday("timestamp_string")}viewHeldItems(){$("#held_items_modal").modal({backdrop:"static",keyboard:!1}),this.held_items.length>0&&(this.selectedHeldItem=this.held_items[0]),this.key_state="held_items"}selectHeldItem(e){this.selectedHeldItem=e}unhold(e){this.items=e.items,this.held_items.splice(this.held_items.indexOf(e),1),localStorage.setItem("heldItems",JSON.stringify(this.held_items)),$("#held_items_modal").modal("hide"),this.getTotal()}deleteHeldItem(){this.held_items.splice(this.held_items.indexOf(this.selectedHeldItem),1),this.selectedHeldItem=null,localStorage.setItem("heldItems",JSON.stringify(this.held_items))}unholdSelected(){this.unhold(this.selectedHeldItem)}clearHeldItems(){localStorage.removeItem("heldItems"),this.selectedHeldItem=null,this.held_items=[],$("#held_items_modal").modal("hide")}productAdded(e){}clearAmountPaid(){0!=this.amount_paid&&null!=this.amount_paid||(this.amount_paid=null,$("#amount_paid").focus(),$("#amount_paid").tooltip({title:"Enter the amount paid"}))}ngOnDestroy(){this.items.length>0&&(this.holdItems(),this.notify.successNotification("Receipt held automatically"))}focusCursor(){let e=$("#new_quantity").val();$("#new_quantity").val("").val(e)}applyDiscount(){$("#discount_modal").modal({backdrop:"static",keyboard:!1}),$("#discount_modal").on("shown.bs.modal",(function(){$("#_discount").focus()})),this.key_state="discount_modal"}acceptDiscount(){$("#discount_modal").modal("hide"),this.discount=this._discount,this.getTotal()}rejectDiscount(){$("#discount_modal").modal("hide"),this._discount=null}removeDiscount(){this.discount=0,this.getTotal()}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](h.a),l["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-sale"]],hostBindings:function(e,t){1&e&&l["\u0275\u0275listener"]("keydown",(function(e){return t.keyEvent(e)}),!1,l["\u0275\u0275resolveWindow"])},decls:236,vars:40,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"timestamp","type","onAdd"],[1,"col-12"],[1,"card","card-body","table-responsive","sales_items"],[1,"table","table-striped","table-bordered","table-hover"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"card-body"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],[4,"ngIf"],[1,""],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"btn","btn-info","btn-sm",3,"click"],["name","payment_method","id","payment_method",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],["id","sale_confirm_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["autocomplete","off","required","","id","new_quantity","name","new_quantity",3,"ngModel","keyup","ngModelChange"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-danger",3,"click"],["id","discount_modal","tabindex","-1","role","dialog",1,"modal","fade"],["autocomplete","off","required","","id","_discount","name","_discount",3,"ngModel","ngModelChange"],["id","change_modal","tabindex","-1","role","dialog",1,"modal","fade"],["id","finish_sale_btn","type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["id","insurance_modal","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-header"],[3,"onFinish"],["type","text","name","insurance_member_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","insurance_member_id",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","data-dismiss","modal",1,"btn","btn-success"],["id","held_items_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],["class","row",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["id","add_new_product_modal","tabindex","-1","role","dialog",1,"modal"],["id","invoice"],[1,"text-left"],[1,"text-right"],[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[3,"bc-value","bc-height","bc-font-size","bc-display-value"],[3,"ngClass"],["class","text-muted",4,"ngIf"],["title","custom quantity",1,"btn","btn-info","btn-sm",3,"click"],["title","increase quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","decrease quantity by 1",1,"btn","btn-info","btn-sm",3,"click"],["title","The quantity entered is more than the current stock","class","text-danger fa fa-exclamation-triangle",4,"ngIf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-remove"],[1,"text-muted"],["title","Item expired",1,"fa","fa-calendar","text-danger"],["title","The quantity entered is more than the current stock",1,"text-danger","fa","fa-exclamation-triangle"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["id","amount_paid","size","10","autocomplete","off","type","text","name","amount_paid","value","0",3,"disabled","ngModel","focus","keydown","ngModelChange"],["id","creditor_name","type","text","name","creditor_name",3,"ngModel","keydown","ngModelChange"],["id","momo_reference","type","text","name","momo_reference",3,"ngModel","keydown","ngModelChange"],[1,"col-7"],[3,"ngClass","dblclick","click",4,"ngFor","ngForOf"],[1,"col-5"],["class","table table-striped table-bordered table-hover",4,"ngIf"],[3,"ngClass","dblclick","click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"section",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"h4"),l["\u0275\u0275text"](5,"New Sales Receipt"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",4),l["\u0275\u0275elementStart"](7,"app-select-product",5),l["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",2),l["\u0275\u0275elementStart"](9,"div",6),l["\u0275\u0275elementStart"](10,"div",7),l["\u0275\u0275elementStart"](11,"table",8),l["\u0275\u0275elementStart"](12,"thead"),l["\u0275\u0275elementStart"](13,"tr"),l["\u0275\u0275elementStart"](14,"th"),l["\u0275\u0275text"](15,"Product"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"th"),l["\u0275\u0275text"](17,"Quantity"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"th"),l["\u0275\u0275text"](19,"Price"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"th"),l["\u0275\u0275text"](21,"Total"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"th"),l["\u0275\u0275text"](23,"On-hand"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](24,"th"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"tbody"),l["\u0275\u0275template"](26,v,23,10,"tr",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",10),l["\u0275\u0275elementStart"](28,"div"),l["\u0275\u0275elementStart"](29,"b"),l["\u0275\u0275text"](30),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](31," | "),l["\u0275\u0275template"](32,E,2,0,"button",11),l["\u0275\u0275template"](33,w,5,1,"span",12),l["\u0275\u0275elementStart"](34,"span",13),l["\u0275\u0275elementStart"](35,"button",14),l["\u0275\u0275listener"]("click",(function(){return t.holdItems()})),l["\u0275\u0275text"](36,"Hold"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](37,"button",15),l["\u0275\u0275listener"]("click",(function(){return t.viewHeldItems()})),l["\u0275\u0275text"](38),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",13),l["\u0275\u0275elementStart"](40,"b"),l["\u0275\u0275text"](41),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](42," | "),l["\u0275\u0275elementStart"](43,"b"),l["\u0275\u0275text"](44,"Method"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"select",16),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.payment_method=e})),l["\u0275\u0275elementStart"](46,"option"),l["\u0275\u0275text"](47,"Cash"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](48,"option"),l["\u0275\u0275text"](49,"Mobile Money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](50,"option"),l["\u0275\u0275text"](51,"Cheque"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"option"),l["\u0275\u0275text"](53,"POS"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](54,"option"),l["\u0275\u0275text"](55,"Credit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](56,"option"),l["\u0275\u0275text"](57,"Insurance"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](58,"option"),l["\u0275\u0275text"](59,"Other"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](60," \xa0| "),l["\u0275\u0275template"](61,I,7,7,"span",12),l["\u0275\u0275template"](62,k,3,0,"span",12),l["\u0275\u0275template"](63,M,4,1,"span",12),l["\u0275\u0275template"](64,j,4,1,"span",12),l["\u0275\u0275elementStart"](65,"span",13),l["\u0275\u0275elementStart"](66,"button",17),l["\u0275\u0275listener"]("click",(function(){return t.cancel()})),l["\u0275\u0275text"](67,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](68,"button",18),l["\u0275\u0275listener"]("click",(function(){return t.saveLocalItems()})),l["\u0275\u0275text"](69,"Save"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](70,"div",19),l["\u0275\u0275elementStart"](71,"div",20),l["\u0275\u0275elementStart"](72,"div",21),l["\u0275\u0275elementStart"](73,"div",22),l["\u0275\u0275elementStart"](74,"h5"),l["\u0275\u0275text"](75,"The amount paid is less than the total cost. Continue?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](76,"div",23),l["\u0275\u0275elementStart"](77,"button",24),l["\u0275\u0275listener"]("click",(function(){return t.acceptAmount()})),l["\u0275\u0275text"](78,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](79,"button",25),l["\u0275\u0275text"](80,"Reject"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](81,"div",26),l["\u0275\u0275elementStart"](82,"div",27),l["\u0275\u0275elementStart"](83,"div",21),l["\u0275\u0275elementStart"](84,"form",28,29),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptItem()})),l["\u0275\u0275elementStart"](86,"div",22),l["\u0275\u0275template"](87,F,2,1,"h5",12),l["\u0275\u0275elementStart"](88,"input",30),l["\u0275\u0275listener"]("keyup",(function(e){return t.keyChangeQuantity(e)}))("ngModelChange",(function(e){return t.new_quantity=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](89,"br"),l["\u0275\u0275elementStart"](90,"button",31),l["\u0275\u0275listener"]("click",(function(){return t.increment()})),l["\u0275\u0275text"](91,"+1"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](92,"button",32),l["\u0275\u0275listener"]("click",(function(){return t.decrement()})),l["\u0275\u0275text"](93,"-1"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](94,"div",23),l["\u0275\u0275elementStart"](95,"button",33),l["\u0275\u0275text"](96,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](97,"button",34),l["\u0275\u0275listener"]("click",(function(){return t.rejectItem()})),l["\u0275\u0275text"](98,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](99,"div",35),l["\u0275\u0275elementStart"](100,"div",27),l["\u0275\u0275elementStart"](101,"div",21),l["\u0275\u0275elementStart"](102,"form",28,29),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.acceptDiscount()})),l["\u0275\u0275elementStart"](104,"div",22),l["\u0275\u0275elementStart"](105,"h5"),l["\u0275\u0275text"](106,"Enter Discount Amount:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](107,"input",36),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t._discount=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](108,"div",23),l["\u0275\u0275elementStart"](109,"button",33),l["\u0275\u0275text"](110,"Accept"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](111,"button",34),l["\u0275\u0275listener"]("click",(function(){return t.rejectDiscount()})),l["\u0275\u0275text"](112,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](113,"div",37),l["\u0275\u0275elementStart"](114,"div",20),l["\u0275\u0275elementStart"](115,"div",21),l["\u0275\u0275elementStart"](116,"div",22),l["\u0275\u0275elementStart"](117,"h5"),l["\u0275\u0275text"](118),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](119,"div",23),l["\u0275\u0275elementStart"](120,"button",38),l["\u0275\u0275listener"]("click",(function(){return t.finishSale()})),l["\u0275\u0275text"](121,"OK"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](122,"div",39),l["\u0275\u0275elementStart"](123,"div",20),l["\u0275\u0275elementStart"](124,"div",21),l["\u0275\u0275elementStart"](125,"div",40),l["\u0275\u0275elementStart"](126,"h5"),l["\u0275\u0275text"](127,"Insurance Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](128,"div",22),l["\u0275\u0275elementStart"](129,"form",28),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.finishSale()})),l["\u0275\u0275elementStart"](130,"div"),l["\u0275\u0275elementStart"](131,"label"),l["\u0275\u0275text"](132,"Insurance provider"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](133,"app-select-insurer",41),l["\u0275\u0275listener"]("onFinish",(function(e){return t.setInsurer(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](134,"div"),l["\u0275\u0275elementStart"](135,"label"),l["\u0275\u0275text"](136,"Member Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](137,"input",42),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](138,"div"),l["\u0275\u0275elementStart"](139,"label"),l["\u0275\u0275text"](140,"Member Id Number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](141,"input",43),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.insurance_member_id=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](142,"button",44),l["\u0275\u0275text"](143,"OK"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](144,"button",25),l["\u0275\u0275text"](145,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](146,"div",23),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](147,"div",45),l["\u0275\u0275elementStart"](148,"div",46),l["\u0275\u0275elementStart"](149,"div",21),l["\u0275\u0275elementStart"](150,"div",40),l["\u0275\u0275text"](151," Held Items "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](152,"div",22),l["\u0275\u0275template"](153,q,2,0,"span",12),l["\u0275\u0275template"](154,T,17,2,"div",47),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](155,"div",23),l["\u0275\u0275elementStart"](156,"button",48),l["\u0275\u0275listener"]("click",(function(){return t.unholdSelected()})),l["\u0275\u0275text"](157,"Unhold Selected"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](158,"button",49),l["\u0275\u0275listener"]("click",(function(){return t.deleteHeldItem()})),l["\u0275\u0275text"](159,"Delete Selected"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](160,"button",34),l["\u0275\u0275listener"]("click",(function(){return t.clearHeldItems()})),l["\u0275\u0275text"](161,"Delete All"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](162,"button",50),l["\u0275\u0275listener"]("click",(function(){return t.closeHeld()})),l["\u0275\u0275text"](163,"Close"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](164,"div",51),l["\u0275\u0275elementStart"](165,"div",46),l["\u0275\u0275elementStart"](166,"div",21),l["\u0275\u0275elementStart"](167,"div",40),l["\u0275\u0275elementStart"](168,"h5"),l["\u0275\u0275text"](169,"Add new product"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](170,"div",22),l["\u0275\u0275elementStart"](171,"app-product-form",41),l["\u0275\u0275listener"]("onFinish",(function(e){return t.productAdded(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](172,"div",23),l["\u0275\u0275elementStart"](173,"button",25),l["\u0275\u0275text"](174,"Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](175,"div",52),l["\u0275\u0275elementStart"](176,"div"),l["\u0275\u0275elementStart"](177,"div"),l["\u0275\u0275elementStart"](178,"span",53),l["\u0275\u0275text"](179),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](180,"span",54),l["\u0275\u0275text"](181),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](182,"br"),l["\u0275\u0275elementStart"](183,"div",55),l["\u0275\u0275elementStart"](184,"b"),l["\u0275\u0275text"](185),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](186,"br"),l["\u0275\u0275text"](187),l["\u0275\u0275element"](188,"br"),l["\u0275\u0275text"](189),l["\u0275\u0275element"](190,"br"),l["\u0275\u0275text"](191),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](192,"br"),l["\u0275\u0275elementStart"](193,"b"),l["\u0275\u0275text"](194,"Cashier:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](195),l["\u0275\u0275element"](196,"hr"),l["\u0275\u0275elementStart"](197,"table",56),l["\u0275\u0275elementStart"](198,"thead"),l["\u0275\u0275elementStart"](199,"tr"),l["\u0275\u0275elementStart"](200,"th"),l["\u0275\u0275text"](201,"Item Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](202,"th"),l["\u0275\u0275text"](203,"Qty"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](204,"th"),l["\u0275\u0275text"](205,"Price"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](206,"th"),l["\u0275\u0275text"](207,"Ext. Price"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](208,"tbody"),l["\u0275\u0275template"](209,A,9,4,"tr",57),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](210,"br"),l["\u0275\u0275element"](211,"br"),l["\u0275\u0275elementStart"](212,"div"),l["\u0275\u0275elementStart"](213,"span",54),l["\u0275\u0275text"](214),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](215,"br"),l["\u0275\u0275elementStart"](216,"span",54),l["\u0275\u0275text"](217),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](218,"br"),l["\u0275\u0275elementStart"](219,"span",54),l["\u0275\u0275text"](220,"Local Sales Tax: 0% Tax: + 0.00 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](221,"br"),l["\u0275\u0275elementStart"](222,"b",54),l["\u0275\u0275text"](223),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](224,"br"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](225,"div",55),l["\u0275\u0275text"](226),l["\u0275\u0275element"](227,"br"),l["\u0275\u0275elementStart"](228,"b",13),l["\u0275\u0275text"](229),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](230,"br"),l["\u0275\u0275element"](231,"ngx-barcode",58),l["\u0275\u0275element"](232,"br"),l["\u0275\u0275elementStart"](233,"b",55),l["\u0275\u0275text"](234,"Thanks for shopping with us!"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](235,"br"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("timestamp",t.ts)("type","search"),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("ngForOf",t.items),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("Total: GHC ",t.sale_total.toFixed(2)," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",0==t.discount),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.discount>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.items.length<1),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("Held Items (",t.held_items.length,")"),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("Amount to be paid: GHC ",t.discounted_total.toFixed(2)," "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.payment_method),l["\u0275\u0275advance"](16),l["\u0275\u0275property"]("ngIf","Cash"==t.payment_method),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","Insurance"==t.payment_method),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","Credit"==t.payment_method),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","Mobile Money"==t.payment_method),l["\u0275\u0275advance"](23),l["\u0275\u0275property"]("ngIf",null!=t.new_item),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngModel",t.new_quantity),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("ngModel",t._discount),l["\u0275\u0275advance"](11),l["\u0275\u0275textInterpolate1"]("Change due: GHC ",(t.amount_paid-t.sale_total).toFixed(2)," "),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("ngModel",t.insurance_member_name),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.insurance_member_id),l["\u0275\u0275advance"](12),l["\u0275\u0275property"]("ngIf",t.held_items.length<1),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.held_items.length>0),l["\u0275\u0275advance"](25),l["\u0275\u0275textInterpolate1"]("",t.time," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("#",t.selected_code,""),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("",t.company_name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.company_address," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" DIGITAL ADDRESS ",t.digital_address," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.company_phone," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",t.cashier," "),l["\u0275\u0275advance"](14),l["\u0275\u0275property"]("ngForOf",t.receipt_items),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" Subtotal: ",t.receipt_total.toFixed(2)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" Discount: ",t.receipt_discount.toFixed(2)," "),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" RECEIPT TOTAL: ",t.receipt_discounted_total.toFixed(2)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"](" ",t.payment_method," GHC ",t.receipt_amount_paid," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" Change: ",(t.receipt_amount_paid-t.receipt_discounted_total).toFixed(2)," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("bc-value",t.selected_code)("bc-height",35)("bc-font-size",13)("bc-display-value",!0))},directives:[p.a,i.i,i.j,f.m,f.e,f.h,f.i,f.n,f.f,f.g,f.b,f.l,_.a,g.a,b.a,i.h],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.f.forChild(H)],r.f]}),e})();var D=n("nEHF"),J=n("rNAZ"),K=n("nBlB");let U=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,P,D.a,J.a,K.a]]}),e})()},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},jr2M:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("fXoL"),r=n("c92J"),a=n("1VJT"),o=n("ccyI"),s=n("ofXK"),l=n("3Pt+");function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",4),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",e),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",e," ")}}function c(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275elementStart"](1,"select",1),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selected=t}))("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().item_selected()})),i["\u0275\u0275template"](2,d,2,2,"option",2),i["\u0275\u0275elementStart"](3,"option",3),i["\u0275\u0275text"](4,"Other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.objects)}}let m=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.objects=[],this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.selected=null}ngOnInit(){this.start()}start(){this.is_loaded=!1,this.is_loading=!0,this.dbService.getData("product/getCategories",this.authService.current_user).subscribe(e=>{"-1"===e.status&&(this.notify.failNotification(e.message),this.error=!0),"-9"===e.status?(this.notify.failNotification(e.message),this.error=!0):(this.objects=e.data,this.is_loaded=!0,this.error=!1),this.is_loading=!1},e=>{this.notify.noConnectionNotification()})}item_selected(){this.onFinish.emit(this.selected)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-product-category"]],inputs:{selected:"selected"},outputs:{onFinish:"onFinish"},decls:1,vars:1,consts:[[4,"ngIf"],["name","selected",1,"",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["value","other"],[3,"value"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,c,5,2,"span",0),2&e&&i["\u0275\u0275property"]("ngIf",t.is_loaded)},directives:[s.j,l.m,l.e,l.h,s.i,l.i,l.n],styles:[""]}),e})()},mS1k:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){}}},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),r=n("nEHF"),a=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a]]}),e})()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),r=n("nEHF"),a=n("6QD7"),o=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,r.a,a.b],a.b]}),e})()}}]);