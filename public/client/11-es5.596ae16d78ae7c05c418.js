function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Ikxx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){_classCallCheck(this,e)}},M6vu:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,a=n("fXoL"),r=n("ccyI"),s=n("c92J"),o=n("ofXK"),c=n("6QD7"),l=((i=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.dbService=t,this.authService=n,this.height=50,this.dbService.server_address.subscribe((function(e){i.base_url=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dbService.getDataByAuthless("getAppName").subscribe((function(t){e.title=t.name}),(function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||i)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](r.a))},i.\u0275cmp=a["\u0275\u0275defineComponent"]({type:i,selectors:[["app-app-name"]],inputs:{height:"height"},decls:1,vars:1,template:function(e,t){1&e&&a["\u0275\u0275text"](0),2&e&&a["\u0275\u0275textInterpolate1"]("",t.title,"\n")},styles:[""]}),i);function d(e,t){if(1&e&&a["\u0275\u0275element"](0,"div",11),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",n.extra_data,a["\u0275\u0275sanitizeHtml"])}}function u(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.product.name),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.quantity),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.price),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",(n.quantity*n.price).toFixed(2)," ")}}function m(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",2),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate3"](" ",n.tax_title,": ",n.tax,"%: + ",n.tax_amount.toFixed(2)," ")}}function h(e,t){if(1&e&&a["\u0275\u0275element"](0,"div",11),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",n.footer,a["\u0275\u0275sanitizeHtml"])}}function p(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"b",12),a["\u0275\u0275text"](1),a["\u0275\u0275element"](2,"br"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" Change: ",(n.receipt_amount_paid-n.receipt_discounted_total).toFixed(2)," ")}}function f(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"em"),a["\u0275\u0275elementStart"](2,"b"),a["\u0275\u0275text"](3,"Software: "),a["\u0275\u0275element"](4,"app-app-name"),a["\u0275\u0275text"](5," - +233 20 552 3796"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var v,g=((v=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.dbService=n,this.receipt_discount=0,this.receipt_discounted_total=0,this.payment_method="Cash",this.invoice_items=[],this.receipt_total=0,this.time="",this.digital_address="",this.receipt_amount_paid=0,this.receipt_items=[],this.tax=0,this.extra_data="",this.footer="",this.show_tax="no",this.tax_title="",this.show_credit="no",this.company_address=t.current_user.company_address,this.company_phone=t.current_user.company_phone,this.company_name=t.current_user.company_name,this.cashier=t.current_user.display_name,this.digital_address=t.current_user.digital_address}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dbService.getDataByAuthless("getAppName").subscribe((function(t){e.extra_data=t.name}),(function(e){})),this.dbService.getData("admin/getSetting?setting=receipt_show_credits",this.authService.current_user).subscribe((function(t){e.show_credit=t.data})),this.dbService.getData("admin/getSetting?setting=receipt_extra_info",this.authService.current_user).subscribe((function(t){e.extra_data=t.data})),this.dbService.getData("admin/getSetting?setting=receipt_footer",this.authService.current_user).subscribe((function(t){e.footer=t.data})),this.dbService.getData("admin/getSetting?setting=tax_title",this.authService.current_user).subscribe((function(t){e.tax_title=t.data})),this.dbService.getData("admin/getSetting?setting=show_tax_on_receipt",this.authService.current_user).subscribe((function(t){e.show_tax=t.data}))}},{key:"isEmpty",value:function(e){return this.dbService.isEmpty(e)}}]),e}()).\u0275fac=function(e){return new(e||v)(a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](s.a))},v.\u0275cmp=a["\u0275\u0275defineComponent"]({type:v,selectors:[["app-sales-invoice"]],inputs:{receipt_discount:"receipt_discount",receipt_discounted_total:"receipt_discounted_total",payment_method:"payment_method",invoice_items:"invoice_items",company_name:"company_name",company_phone:"company_phone",company_address:"company_address",receipt_total:"receipt_total",change:"change",selected_code:"selected_code",cashier:"cashier",time:"time",digital_address:"digital_address",receipt_amount_paid:"receipt_amount_paid",receipt_items:"receipt_items",tax:"tax",tax_amount:"tax_amount",extra_data:"extra_data",footer:"footer"},decls:61,vars:22,consts:[["id","invoice"],[1,"text-left"],[1,"text-right"],[1,"text-center"],[3,"innerHTML",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","text-right ",4,"ngIf"],["class","",4,"ngIf"],[3,"bc-value","bc-height","bc-font-size","bc-display-value"],[4,"ngIf"],[3,"innerHTML"],[1,""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div"),a["\u0275\u0275elementStart"](2,"div"),a["\u0275\u0275elementStart"](3,"span",1),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",2),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"br"),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"b"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"br"),a["\u0275\u0275text"](12),a["\u0275\u0275element"](13,"br"),a["\u0275\u0275text"](14),a["\u0275\u0275element"](15,"br"),a["\u0275\u0275text"](16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](17,d,1,1,"div",4),a["\u0275\u0275element"](18,"br"),a["\u0275\u0275elementStart"](19,"b"),a["\u0275\u0275text"](20,"Cashier:"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](21),a["\u0275\u0275element"](22,"hr"),a["\u0275\u0275elementStart"](23,"table",5),a["\u0275\u0275elementStart"](24,"thead"),a["\u0275\u0275elementStart"](25,"tr"),a["\u0275\u0275elementStart"](26,"th"),a["\u0275\u0275text"](27,"Item Name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"th"),a["\u0275\u0275text"](29,"Qty"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"th"),a["\u0275\u0275text"](31,"Price"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"th"),a["\u0275\u0275text"](33,"Ext. Price"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"tbody"),a["\u0275\u0275template"](35,u,9,4,"tr",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"br"),a["\u0275\u0275element"](37,"br"),a["\u0275\u0275elementStart"](38,"div"),a["\u0275\u0275elementStart"](39,"span",2),a["\u0275\u0275text"](40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](41,"br"),a["\u0275\u0275elementStart"](42,"span",2),a["\u0275\u0275text"](43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](44,"br"),a["\u0275\u0275template"](45,m,2,3,"span",7),a["\u0275\u0275element"](46,"br"),a["\u0275\u0275elementStart"](47,"b",2),a["\u0275\u0275text"](48),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](49,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"div",3),a["\u0275\u0275text"](51),a["\u0275\u0275element"](52,"br"),a["\u0275\u0275template"](53,h,1,1,"div",4),a["\u0275\u0275template"](54,p,3,1,"b",8),a["\u0275\u0275element"](55,"ngx-barcode",9),a["\u0275\u0275element"](56,"br"),a["\u0275\u0275elementStart"](57,"b",3),a["\u0275\u0275text"](58,"Thanks for shopping with us!"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](59,f,6,0,"div",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](60,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"]("",t.time," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("#",t.selected_code,""),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"]("",t.company_name," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",t.company_address," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" DIGITAL ADDRESS ",t.digital_address," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",t.company_phone," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isEmpty(t.extra_data)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",t.cashier," "),a["\u0275\u0275advance"](14),a["\u0275\u0275property"]("ngForOf",t.receipt_items),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" Subtotal: ",t.receipt_total.toFixed(2)," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" Discount: ",t.receipt_discount.toFixed(2)," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf","yes"==t.show_tax),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" RECEIPT TOTAL: ",t.receipt_discounted_total.toFixed(2)," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate2"](" ",t.payment_method," GHC ",t.receipt_amount_paid," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.isEmpty(t.footer)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Cash"==t.payment_method),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("bc-value",t.selected_code)("bc-height",35)("bc-font-size",13)("bc-display-value",!0),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",t.show_credit))},directives:[o.j,o.i,c.a,l],styles:[""]}),v)},NFbv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("nEHF"),r=n("fXoL"),s=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,a.a]]}),e}()},QQkv:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("fXoL"),a=n("c92J"),r=n("ccyI"),s=n("1VJT"),o=n("ofXK"),c=n("mEfR"),l=n("3Pt+");function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"datalist",9),i["\u0275\u0275element"](1,"option",10),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate2"]("value","",n.name," (",n.phone,")")}}function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",n.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("",n.name," ",n.phone," ")}}function m(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275elementStart"](1,"select",11),i["\u0275\u0275listener"]("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().itemSelected()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selected=e})),i["\u0275\u0275template"](2,u,2,3,"option",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"a",13),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addNew()})),i["\u0275\u0275element"](4,"i",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",a.selected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.objects)}}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var p=function(e){return{"select-product-active":e}};function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",21),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](3).add(e)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,s=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](3,p,r==s.arrowkeyLocation)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"](" ",a.name," (",a.phone,") ")}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275elementStart"](1,"ul",19),i["\u0275\u0275template"](2,f,2,5,"li",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.objects)}}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," No customer found. Check the spelling.\n"),i["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"input",16),i["\u0275\u0275listener"]("keyup",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().keyUp(e)}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().param=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,h,3,0,"div",1),i["\u0275\u0275template"](3,v,3,1,"div",17),i["\u0275\u0275template"](4,g,2,0,"div",1),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",a.param),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.objects.length<1&&a.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.objects.length>0&&a.is_finished_search),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.objects.length<1&&a.is_finished_search)}}var y=function(){var e=function(){function e(t,n,a){_classCallCheck(this,e),this.dbService=t,this.authService=n,this.notify=a,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.autocomplete=!1,this.autocomplete_list=[],this.onAdd=new i.EventEmitter,this.type="search",this.show="no",this.added=[],this.filter_param="",this.filter_results=[],this.arrowkeyLocation=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.getCustomers()}},{key:"getCustomers",value:function(){var e=this;this.dbService.getData("customer/getList",this.authService.current_user).subscribe((function(t){"1"==t.status&&(e.objects=t.data)}),(function(t){e.notify.failNotification("Unable to get customers. Check connection")}))}},{key:"ngOnChanges",value:function(){"search"==this.type&&this.search()}},{key:"select_autocomplete",value:function(e){}},{key:"addItem",value:function(){$("#add_customer_modal").modal("show")}},{key:"itemAdded",value:function(e){this.objects.push(e),$("#add_customer_modal").modal("hide"),this.onFinish.emit(e)}},{key:"search",value:function(){var e=this;this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.param).subscribe((function(t){"-1"===t.status?(e.is_searching=!1,e.is_finished_search=!1,e.error_search=!0):(e.objects=t.data,e.is_searching=!1,e.is_finished_search=!0,e.error_search=!1,e.selected=null)}),(function(t){e.is_searching=!1,e.is_finished_search=!1,e.error_search=!0}))}},{key:"add",value:function(e){this.onAdd.emit(e),console.log(e),this.is_finished_search=!1,$("#customer_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}},{key:"select",value:function(e){this.selected=e,this.onFinish.emit(e)}},{key:"itemSelected",value:function(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.selected){this.onFinish.emit(this.objects[e]);break}}},{key:"highlightObject",value:function(e){this.objects.map((function(e){e.selected=!1})),this.highlightedObject=e,e.selected=!0}},{key:"keyUp",value:function(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:var t=this.objects[this.arrowkeyLocation];null!=t&&null!=t&&this.add(t);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.search()}}},{key:"focusCursor",value:function(){var e=$("#customer_search").val();$("#customer_search").val("").val(e)}},{key:"hideSearchResults",value:function(){this.param="",this.objects.length=0,this.is_finished_search=!1}},{key:"addNew",value:function(){$("#addCustomerModal").modal("show")}},{key:"customerAdded",value:function(e){this.objects.push(e),this.selected=e.id,this.onFinish.emit(e),$("#addCustomerModal").modal("hide")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-customer"]],inputs:{btn_text:"btn_text",param:"param",selected:"selected",autocomplete:"autocomplete",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:3,consts:[["id","customer_list",4,"ngFor","ngForOf"],[4,"ngIf"],["id","addCustomerModal","tabindex","-1","role","dialog",1,"modal","fade","in"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[3,"onFinish"],["class","focus_search",4,"ngIf"],["id","customer_list"],[3,"value"],["name","customer",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["title","add new customer",1,"btn-sm","btn-primary","btn",3,"click"],[1,"fa","fa-plus"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter customer name or phone","required","","type","text","id","customer_search","name","search",3,"ngModel","keyup","ngModelChange"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],[1,"list-group"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,d,2,2,"datalist",0),i["\u0275\u0275template"](1,m,5,2,"span",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275elementStart"](6,"h5"),i["\u0275\u0275text"](7,"Add new Customer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",6),i["\u0275\u0275elementStart"](9,"app-customer-form",7),i["\u0275\u0275listener"]("onFinish",(function(e){return t.customerAdded(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,_,5,4,"div",8)),2&e&&(i["\u0275\u0275property"]("ngForOf",t.objects),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf","search"==t.type))},directives:[o.i,o.j,c.a,l.i,l.n,l.m,l.e,l.h,l.b,l.l,o.h],styles:[".autocomplete-items[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}"]}),e}()},mEfR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),a=n("Ikxx"),r=n("c92J"),s=n("1VJT"),o=n("ccyI"),c=n("3Pt+"),l=function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this.dbService=t,this.notify=n,this.authService=r,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new i.EventEmitter,this.uploadUrl="admin/uploadPicture",this.url="customer/findById",null!=this.id&&null!=this.id||(this.customer=new a.a)}return _createClass(e,[{key:"ngOnInit",value:function(){null==this.id||null==this.id||this.getCustomer(this.id)}},{key:"uploadFinished",value:function(e){this.pic_location=e,this.customer.picture=e}},{key:"getCustomer",value:function(e){var t=this;this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe((function(e){t.customer=e.data,t.is_loading=!1,t.is_loaded=!0,t.error=!1}),(function(e){t.is_loading=!1,t.error=!0,t.is_loaded=!1}))}},{key:"submit",value:function(){var e=this;this.notify.showLoading();var t=new FormData;for(var n in this.customer)t.append(n,this.customer[n]);null!=this.id&&null!=this.id||t.append("createdAt",this.dbService.getToday()),t.append("display_name",this.authService.current_user.display_name),this.dbService.postData(t,"customer/save",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):(e.customer.id=t.status,e.notify.successNotification("Customer saved successfully"),e.onFinish.emit(e.customer),e.customer=new a.a)}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customer-form"]],inputs:{id:"id"},outputs:{onFinish:"onFinish"},decls:36,vars:5,consts:[["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"row"],[1,"col-sm-6"],["required","","type","text","name","name",3,"ngModel","ngModelChange"],["required","","type","text","name","phone",3,"ngModel","ngModelChange"],["name","sex",3,"ngModel","ngModelChange"],["value","Male"],["value","Female"],["name","email","type","email",3,"ngModel","ngModelChange"],["name","date_of_birth","type","date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),i["\u0275\u0275elementStart"](2,"b"),i["\u0275\u0275text"](3,"Fields marked * are required"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"label"),i["\u0275\u0275text"](7,"Name*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"br"),i["\u0275\u0275elementStart"](9,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.name=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",3),i["\u0275\u0275elementStart"](11,"label"),i["\u0275\u0275text"](12,"Phone*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"br"),i["\u0275\u0275elementStart"](14,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.phone=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",3),i["\u0275\u0275elementStart"](16,"label"),i["\u0275\u0275text"](17,"Sex"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"br"),i["\u0275\u0275elementStart"](19,"select",6),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.sex=e})),i["\u0275\u0275elementStart"](20,"option",7),i["\u0275\u0275text"](21,"Male"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"option",8),i["\u0275\u0275text"](23,"Female"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",3),i["\u0275\u0275elementStart"](25,"label"),i["\u0275\u0275text"](26,"Email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"br"),i["\u0275\u0275elementStart"](28,"input",9),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.email=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",3),i["\u0275\u0275elementStart"](30,"label"),i["\u0275\u0275text"](31,"Date of Birth"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](32,"br"),i["\u0275\u0275elementStart"](33,"input",10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customer.date_of_birth=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",3),i["\u0275\u0275element"](35,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.name),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.phone),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.sex),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.customer.email),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.customer.date_of_birth))},directives:[c.f,c.g,c.b,c.l,c.e,c.h,c.m,c.i,c.n],styles:[""]}),e}()},yGzR:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("fXoL"),a=n("c92J"),r=n("eJvr"),s=n("ccyI"),o=n("1VJT"),c=n("ofXK"),l=n("3Pt+"),d=n("hiAm");function u(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",6),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).addItem()})),i["\u0275\u0275element"](1,"i",7),i["\u0275\u0275elementEnd"]()}}function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275propertyInterpolate"]("value",n.id),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,u,2,0,"button",3),i["\u0275\u0275elementStart"](2,"label"),i["\u0275\u0275text"](3,"Select Insurer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275elementStart"](5,"select",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).select_item=e}))("change",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).itemSelected()})),i["\u0275\u0275template"](6,m,2,2,"option",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.show_add),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",a.select_item),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.objects)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,h,7,3,"div",1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.is_loaded)}}function f(e,t){1&e&&i["\u0275\u0275element"](0,"app-loading")}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"h4"),i["\u0275\u0275text"](2,"Not found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",12),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](3).add(e)})),i["\u0275\u0275elementStart"](1,"b"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"i",13),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",a.name," ")}}function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275template"](1,g,4,1,"a",11),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.objects)}}function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,f,1,0,"app-loading",1),i["\u0275\u0275template"](3,v,3,0,"div",1),i["\u0275\u0275elementStart"](4,"button",6),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addItem()})),i["\u0275\u0275text"](5,"+"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,_,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",a.is_searching),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.error_search),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.is_finished_search)}}var b=function(){var e=function(){function e(t,n,a,r){_classCallCheck(this,e),this.dbService=t,this.localforage=n,this.authService=a,this.notify=r,this.onFinish=new i.EventEmitter,this.btn_text="Select",this.onAdd=new i.EventEmitter,this.type="select",this.show_add=!0,this.param="",this.selected=null,this.emit=!1,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.is_loaded=!1,this.added=[]}return _createClass(e,[{key:"ngOnInit",value:function(){"list"!=this.type&&"select"!=this.type||this.list()}},{key:"itemSelected",value:function(){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==this.select_item){this.onFinish.emit(this.objects[e]);break}}},{key:"addItem",value:function(){var e=this;this.notify.showLoading();var t=window.prompt("Enter name of Insurance Provider");if(this.dbService.isEmpty(t))return this.notify.failNotification("name is required"),!1;var n=new FormData;n.append("name",t),this.dbService.postData(n,"admin/addInsurer",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Server error. Please try again"):"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):(e.list(),e.notify.successNotification("Insurer added successfully"),e.itemSelected())}),(function(t){e.notify.noConnectionNotification()}))}},{key:"itemAdded",value:function(e){this.objects.push(e),$("#add_vendor_modal").modal("hide"),this.onFinish.emit(e)}},{key:"list",value:function(){var e=this;this.is_loaded=!1,this.notify.showLoading(),this.dbService.getData("admin/getInsurers",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status||(e.objects=t.data,e.is_loaded=!0,e.emit&&e.onFinish.emit(e.objects))}),(function(t){e.localforage.getItem(e.dbService.OFFLINE_INSURERS_KEY).subscribe((function(t){e.is_loaded=!0,e.objects=null==t?[]:t})),e.notify.hideLoading(),e.notify.noConnectionNotification()}))}},{key:"add",value:function(e){this.added.push(e),this.onAdd.emit(e),e.is_selected=!0}},{key:"select",value:function(e){this.selected=e,this.onFinish.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-insurer"]],inputs:{btn_text:"btn_text",type:"type",show_add:"show_add",emit:"emit"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},decls:2,vars:2,consts:[["class","",4,"ngIf"],[4,"ngIf"],[1,""],["type","button","class","",3,"click",4,"ngIf"],["name","vendors",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"",3,"click"],[1,"fa","fa-plus"],[3,"value"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"fa","fa-plus","pull-right"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,p,3,1,"div",0),i["\u0275\u0275template"](1,y,7,3,"div",1)),2&e&&(i["\u0275\u0275property"]("ngIf","select"==t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","list"==t.type))},directives:[c.j,l.m,l.e,l.h,c.i,l.i,l.n,d.a],styles:[""]}),e}()}}]);