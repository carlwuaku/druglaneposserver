(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e})()},vfUp:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomersModule",(function(){return j}));var i=n("ofXK"),a=n("tyNb"),r=n("fXoL"),s=n("ccyI"),o=n("1VJT"),l=n("c92J"),d=n("3Pt+"),c=n("VWED"),m=n("hiAm");function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"a",19),r["\u0275\u0275element"](1,"i",20),r["\u0275\u0275text"](2," Add New Customer"),r["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function h(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275elementStart"](1,"h4"),r["\u0275\u0275text"](2,"No results"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"em"),r["\u0275\u0275text"](4,"Check the spelling to make sure it's correct"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementStart"](3,"div",21),r["\u0275\u0275elementStart"](4,"button",22),r["\u0275\u0275text"](5,"Menu"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",23),r["\u0275\u0275elementStart"](7,"a",24),r["\u0275\u0275text"](8,"Details "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"a",24),r["\u0275\u0275text"](10,"Edit "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"a",25),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().delete(n)})),r["\u0275\u0275text"](12,"Delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275elementStart"](14,"a"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275text"](17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"td"),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"td"),r["\u0275\u0275text"](21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",n+1," "),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate1"]("routerLink","/customerDetails/",e.id,""),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate1"]("routerLink","/edit_customer/",e.id,""),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",e.name," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",e.phone," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.email),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.created_on)}}let g=(()=>{class e{constructor(e,t,n){this.authService=e,this.notify=t,this.dbService=n,this.objects=[],this.search_by="names",this.categories=[],this.total=0,this.offset=0,this.field="",this.category="all",this.limit=1e3,this.title="All",this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.can_add=!0}ngOnInit(){this.getItems()}reset(){this.param="",this.getItems()}getItems(){this.is_loading=!0,this.dbService.getData("customer/getList",this.authService.current_user).subscribe(e=>{this.objects=e.data,this.total=e.total,this.is_loading=!1},e=>{this.is_loading=!1})}pageChanged(e){this.offset=e*this.limit,this.getItems()}limitChanged(e){this.offset=0,this.limit=e,this.getItems()}search(){this.title=`'${this.param}'`;let e="customer/search?param="+this.param;this.is_loaded=!1,this.is_loading=!0,this.dbService.getData(e,this.authService.current_user).subscribe(e=>{this.is_loading=!1,"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):"0"===e.status?this.notify.showNotification("You are not logged in","fail",3e3):(this.objects=e.data,this.is_loaded=!0,this.error=!1)},e=>{this.is_loading=!1,this.notify.noConnectionNotification()})}goBack(){window.history.back()}delete(e){if(window.confirm("Sure you want to delete this customer? You cannot undo this")){let t=new FormData;this.notify.showLoading(),t.append("id",e.id),t.append("name",e.name),t.append("display_name",this.authService.current_user.display_name),this.dbService.postData(t,"customer/delete",this.authService.current_user).subscribe(t=>{this.notify.hideLoading(),"1"===t.status&&(this.objects.splice(this.objects.indexOf(e),1),this.notify.showNotification("Customer deleted successfully","success",3e3))},e=>{this.notify.noConnectionNotification()})}}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customers"]],decls:39,vars:7,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],["routerLink","/add_customer","class","btn btn-sm btn-primary",4,"ngIf"],[1,"col-md-6"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["type","text","name","param","required","","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","name","search","value","Search",1,"btn","btn-success","btn-sm"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[4,"ngIf"],[1,"card"],[1,"card-body"],[3,"limit","total"],["class","",4,"ngIf"],[1,""],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],["routerLink","/add_customer",1,"btn","btn-sm","btn-primary"],[1,"feather","icon-plus"],[1,"dropdown-primary","dropdown","open"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"btn","btn-sm","btn-primary","dropdown-toggle","waves-effect","waves-light"],["data-dropdown-in","fadeIn","data-dropdown-out","fadeOut",1,"dropdown-menu"],[1,"dropdown-item","waves-light","waves-effect",3,"routerLink"],[1,"dropdown-item","waves-light","waves-effect",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5," Customers"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,u,3,0,"a",4),r["\u0275\u0275element"](7,"hr"),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"label"),r["\u0275\u0275text"](11,"search for a customer name or phone"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](12,"br"),r["\u0275\u0275elementStart"](13,"form",6,7),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.search()})),r["\u0275\u0275elementStart"](15,"input",8),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.param=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"input",9),r["\u0275\u0275elementStart"](17,"button",10),r["\u0275\u0275listener"]("click",(function(){return t.reset()})),r["\u0275\u0275text"](18,"Reset"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,p,1,0,"app-loading",11),r["\u0275\u0275elementStart"](20,"div",12),r["\u0275\u0275elementStart"](21,"div",13),r["\u0275\u0275element"](22,"app-pagination",14),r["\u0275\u0275template"](23,h,5,0,"div",15),r["\u0275\u0275elementStart"](24,"div",16),r["\u0275\u0275elementStart"](25,"table",17),r["\u0275\u0275elementStart"](26,"thead"),r["\u0275\u0275elementStart"](27,"tr"),r["\u0275\u0275element"](28,"th"),r["\u0275\u0275elementStart"](29,"th"),r["\u0275\u0275text"](30,"Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"th"),r["\u0275\u0275text"](32,"Phone"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"th"),r["\u0275\u0275text"](34,"Email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"th"),r["\u0275\u0275text"](36,"Created on"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"tbody"),r["\u0275\u0275template"](38,f,22,7,"tr",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.can_add),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngModel",t.param),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.is_loading),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("limit",t.limit)("total",t.total),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.objects.length<1),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",t.objects))},directives:[i.j,d.f,d.g,d.b,d.l,d.e,d.h,c.a,i.i,a.e,m.a],styles:[""]}),e})();function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"a",5),r["\u0275\u0275text"](1,"Edit"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate2"]("routerLink","/",e.edit_string,"/",e.object.id,"")}}function b(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275elementStart"](1,"em",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," : "),r["\u0275\u0275elementStart"](4,"b"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.replace(e," ")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](n.object[e])}}function S(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",6),r["\u0275\u0275template"](1,b,6,2,"div",7),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.keys)}}let y=(()=>{class e{constructor(e,t,n,i){this.dbService=e,this.location=t,this.notify=n,this.authService=i,this.exclude=["_id","picture","thumbnail","__v"],this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.new_picture=null,this.uploadUrl="uploadstudentPicture",this.can_edit=!0,this.keys=null}ngOnInit(){this.keys=this.extractKeys(this.object)}uploadFinished(e){this.new_picture=e}extractKeys(e){let t=[];for(let n in e)-1==this.exclude.indexOf(n)&&t.push(n);return t}replace(e,t){return e.replace(/_/g,t)}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](i.f),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-details"]],inputs:{object:"object",module:"module",edit_string:"edit_string",exclude:"exclude"},decls:5,vars:2,consts:[[1,"card"],[1,"card-header"],["class","btn btn-success",3,"routerLink",4,"ngIf"],[1,"card-body","table-responsive"],["class","list-group",4,"ngIf"],[1,"btn","btn-success",3,"routerLink"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"capitalize"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275template"](2,v,2,2,"a",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275template"](4,S,2,1,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.can_edit),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null!=t.keys))},directives:[i.j,a.e,i.i],styles:[""]}),e})();function E(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275element"](1,"app-details",9),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("edit_string","edit_customer")("module","Customer")("object",e.object)}}function x(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}const _=[{path:"",component:g},{path:"details/:id",component:(()=>{class e{constructor(e,t,n,i){this.dbService=t,this.notify=n,this.authService=i,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.is_loading_purchases=!0,this.is_loaded_purchases=!1,this.purchases=[],this.id=e.snapshot.params.id}ngOnInit(){this.getData()}getData(){this.getObject(this.id)}getObject(e){this.dbService.getDataWithQuery("customer/findById",this.authService.current_user,"id="+this.id).subscribe(e=>{this.object=e.data,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-customer-details"]],decls:13,vars:2,consts:[[1,"content"],[1,"container"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-refresh"],[1,"row","clearfix"],["class"," col-md-4",4,"ngIf"],[1,"col-md-8"],[4,"ngIf"],[1,"col-md-4"],[3,"edit_string","module","object"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3," Customer Details "),r["\u0275\u0275elementStart"](4,"button",2),r["\u0275\u0275listener"]("click",(function(){return t.getData()})),r["\u0275\u0275element"](5,"i",3),r["\u0275\u0275text"](6," Refresh"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",4),r["\u0275\u0275template"](8,E,2,3,"div",5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"h6"),r["\u0275\u0275text"](11,"Sales History"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,x,1,0,"app-loading",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",t.is_loaded),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.is_loading_purchases))},directives:[i.j,y,m.a],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(_)],a.f]}),e})();var I=n("nEHF");let j=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,w,I.a]]}),e})()}}]);