function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"i",0),i["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()},nDyQ:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewActivitiesModule",(function(){return x}));var i=n("ofXK"),a=n("tyNb"),r=n("fXoL"),l=n("ccyI"),o=n("1VJT"),s=n("c92J"),c=n("3Pt+"),d=n("8ApV"),u=n("hiAm");function m(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"form",7,8),r["\u0275\u0275listener"]("ngSubmit",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().getAll()})),r["\u0275\u0275elementStart"](2,"span",9),r["\u0275\u0275text"](3,"Optional: filter between dates"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"label"),r["\u0275\u0275text"](5,"Start Date: "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().start_date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"label"),r["\u0275\u0275text"](8,"End Date: "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"input",11),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().end_date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",12),r["\u0275\u0275elementStart"](11,"a",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().clearFilter()})),r["\u0275\u0275text"](12,"Clear filter / View All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",i.start_date),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",i.end_date)}}function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275elementStart"](2,"a",19),r["\u0275\u0275elementStart"](3,"b"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275elementStart"](6,"b"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](8,"br"),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate1"]("routerLink","/user_activities/",n.user.id,""),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",n.user.display_name,""),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",n.activity," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" [",n.created_on,"]")}}function p(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275elementStart"](1,"table",15),r["\u0275\u0275elementStart"](2,"thead"),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"User"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Activity [Time]"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"tbody"),r["\u0275\u0275template"](9,f,10,4,"tr",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",17),r["\u0275\u0275elementStart"](11,"app-load-more",18),r["\u0275\u0275listener"]("onFinish",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().addMoreItems(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngForOf",i.objects),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("url_has_params",i.url_has_params)("limit",i.limit)("url",i.url)("offset",i.offset)("total",i.total)}}function v(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function h(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",20),r["\u0275\u0275text"](1," Unable to connect to server. Please check your connection "),r["\u0275\u0275elementEnd"]())}var g,y,b,_,S=((g=function(){function e(t,n,i){_classCallCheck(this,e),this.authService=t,this.notify=n,this.dbService=i,this.reg=null,this.error=!1,this.url="getAllActivities",this.url_has_params="no"}return _createClass(e,[{key:"ngOnInit",value:function(){null==this.reg?this.getAll():this.getSpecific()}},{key:"getSpecific",value:function(){var e=this;this.notify.showLoading(),this.dbService.getDataByRegNum(this.reg,"admin/getActivities",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"==t.status||"0"==t.status||"-9"==t.status?(e.notify.failNotification(t.message),e.objects=[]):(e.objects=t.data,e.is_loaded=!0,e.error=!1)}),(function(t){e.notify.hideLoading(),e.is_loaded=!0,e.error=!0}))}},{key:"getAll",value:function(){var e=this;this.notify.showLoading(),this.url="admin/getAllActivities",null!=this.start_date&&null!=this.start_date&&null!=this.end_date&&null!=this.end_date&&(this.url="admin/getAllActivities?start_date="+this.start_date+"&end_date="+this.end_date,this.url_has_params="yes"),this.dbService.getData(this.url,this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"==t.status||"0"==t.status||"-9"==t.status?(e.notify.failNotification(t.message),e.objects=[]):(e.objects=t.data,e.limit=t.limit,e.offset=e.objects.length,e.total=t.total,e.is_loaded=!0,e.error=!1)}),(function(t){e.notify.hideLoading(),e.error=!0,e.is_loaded=!1}))}},{key:"clearFilter",value:function(){this.start_date=void 0,this.end_date=void 0,this.getAll()}},{key:"addMoreItems",value:function(e){var t=this;e.map((function(e){t.objects.push(e)}))}}]),e}()).\u0275fac=function(e){return new(e||g)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a))},g.\u0275cmp=r["\u0275\u0275defineComponent"]({type:g,selectors:[["app-activity-view"]],inputs:{reg:"reg"},decls:9,vars:4,consts:[[1,"card"],[1,"card-header","table-responsive"],["ngNativeValidate","",3,"ngSubmit",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["class","",4,"ngIf"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"text-muted"],["required","","type","date","name","start_date",3,"ngModel","ngModelChange"],["required","","type","date","name","end_date",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-primary"],["role","button",1,"btn","btn-warning",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],[1,"row","clear-fix","text-center"],[3,"url_has_params","limit","url","offset","total","onFinish"],[3,"routerLink"],[1,""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"h4"),r["\u0275\u0275text"](3,"Activity History"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,m,13,2,"form",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275template"](6,p,12,6,"div",4),r["\u0275\u0275template"](7,v,1,0,"app-loading",5),r["\u0275\u0275template"](8,h,2,0,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",null==t.reg),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loaded),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.is_loaded),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.error))},directives:[i.j,c.f,c.g,c.b,c.l,c.e,c.h,i.i,d.a,a.e,u.a],styles:[""]}),g),w=[{path:"",component:(y=function(){function e(t,n,i){_classCallCheck(this,e),this.authService=t,this.notify=n,this.dbService=i,this.can_view=!0,-1==this.authService.current_user.permissions.indexOf("View User Activities")&&(this.notify.failNotification("You are not permitted to view this page"),this.goBack(),this.can_view=!1)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"goBack",value:function(){window.history.back()}}]),e}(),y.\u0275fac=function(e){return new(e||y)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a))},y.\u0275cmp=r["\u0275\u0275defineComponent"]({type:y,selectors:[["app-view-activities"]],decls:5,vars:0,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275element"](4,"app-activity-view"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())},directives:[S],styles:[""]}),y)}],C=((b=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:b}),b.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||b)},imports:[[a.f.forChild(w)],a.f]}),b),E=n("nEHF"),x=((_=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:_}),_.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||_)},imports:[[i.b,C,E.a]]}),_)}}]);