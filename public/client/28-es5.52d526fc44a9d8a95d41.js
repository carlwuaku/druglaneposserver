function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"9EpT":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n("fXoL"),i=["bcElement"],r=n("YsXA"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.elementType="svg",this.cssClass="barcode",this.format="CODE128",this.lineColor="#000000",this.width=2,this.height=100,this.displayValue=!1,this.fontOptions="",this.font="monospace",this.textAlign="center",this.textPosition="bottom",this.textMargin=2,this.fontSize=20,this.background="#ffffff",this.margin=10,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.value="",this.valid=function(){return!0}}return _createClass(e,[{key:"ngOnChanges",value:function(){this.createBarcode()}},{key:"createBarcode",value:function(){if(this.value){var e;switch(this.elementType){case"img":e=this.renderer.createElement("img");break;case"canvas":e=this.renderer.createElement("canvas");break;case"svg":default:e=this.renderer.createElement("svg","svg")}r(e,this.value,this.options);var t,n=_createForOfIteratorHelper(this.bcElement.nativeElement.childNodes);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.renderer.removeChild(this.bcElement.nativeElement,a)}}catch(i){n.e(i)}finally{n.f()}this.renderer.appendChild(this.bcElement.nativeElement,e)}}},{key:"options",get:function(){return{format:this.format,lineColor:this.lineColor,width:this.width,height:this.height,displayValue:this.displayValue,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:this.valid}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](a.Renderer2))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-barcode6"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275staticViewQuery"](i,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.bcElement=n.first)},inputs:{elementType:["bc-element-type","elementType"],cssClass:["bc-class","cssClass"],format:["bc-format","format"],lineColor:["bc-line-color","lineColor"],width:["bc-width","width"],height:["bc-height","height"],displayValue:["bc-display-value","displayValue"],fontOptions:["bc-font-options","fontOptions"],font:["bc-font","font"],textAlign:["bc-text-align","textAlign"],textPosition:["bc-text-position","textPosition"],textMargin:["bc-text-margin","textMargin"],fontSize:["bc-font-size","fontSize"],background:["bc-background","background"],margin:["bc-margin","margin"],marginTop:["bc-margin-top","marginTop"],marginBottom:["bc-margin-bottom","marginBottom"],marginLeft:["bc-margin-left","marginLeft"],marginRight:["bc-margin-right","marginRight"],value:["bc-value","value"],valid:["bc-valid","valid"]},features:[a["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["bcElement",""]],template:function(e,t){1&e&&a["\u0275\u0275element"](0,"div",null,0),2&e&&a["\u0275\u0275classMap"](t.cssClass)},encapsulation:2}),e}(),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[]]}),e}()},SqMz:function(e,t,n){"use strict";n.r(t),n.d(t,"ProductDetailsModule",(function(){return G}));var a=n("ofXK"),i=n("tyNb"),r=n("fXoL"),o=n("c92J"),l=n("1VJT"),s=n("ccyI"),d=n("thd7"),c=n("iuVp"),m=n("6CxU"),u=n("hiAm"),p=n("9EpT"),h=n("STgK"),f=n("rfqN");function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"button",50),r["\u0275\u0275element"](1,"i",51),r["\u0275\u0275text"](2," Edit"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate1"]("routerLink","/edit_product/",n.id,"")}}function b(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",52),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().delete()})),r["\u0275\u0275element"](1,"i",53),r["\u0275\u0275text"](2," Delete"),r["\u0275\u0275elementEnd"]()}}function g(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function _(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"h4"),r["\u0275\u0275text"](2,"Product not found. Error"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275elementStart"](1,"div",54),r["\u0275\u0275elementStart"](2,"div",55),r["\u0275\u0275elementStart"](3,"span",56),r["\u0275\u0275element"](4,"i",57),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",58),r["\u0275\u0275elementStart"](6,"span",59),r["\u0275\u0275text"](7,"Current Stock"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"span",60),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",54),r["\u0275\u0275elementStart"](11,"div",55),r["\u0275\u0275elementStart"](12,"span",56),r["\u0275\u0275element"](13,"i",61),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",58),r["\u0275\u0275elementStart"](15,"span",59),r["\u0275\u0275text"](16,"Stock Value"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"span",60),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",54),r["\u0275\u0275elementStart"](20,"div",55),r["\u0275\u0275elementStart"](21,"span",62),r["\u0275\u0275element"](22,"i",61),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",58),r["\u0275\u0275elementStart"](24,"span",59),r["\u0275\u0275text"](25,"Sold This Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"span",60),r["\u0275\u0275text"](27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",54),r["\u0275\u0275elementStart"](29,"div",55),r["\u0275\u0275elementStart"](30,"span",63),r["\u0275\u0275element"](31,"i",61),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",58),r["\u0275\u0275elementStart"](33,"span",59),r["\u0275\u0275text"](34,"Sold Last Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"span",60),r["\u0275\u0275text"](36),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](n.object.stock),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](n.object.stock_value),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate2"]("",n.object.this_month_quantity," (GH\xa2 ",n.object.this_month_amount,") "),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate2"]("",n.object.last_month_quantity," (GH\xa2 ",n.object.last_month_amount,")")}}function S(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",a+1," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",n.batch_number," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.expiry),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.quantity),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.purchase_code),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.barcode),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",n.quantity_sold," ")}}function x(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275elementStart"](1,"div",64),r["\u0275\u0275elementStart"](2,"table",65),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"td"),r["\u0275\u0275text"](5,"Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"td"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"tr"),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10,"Category"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"tr"),r["\u0275\u0275elementStart"](14,"td"),r["\u0275\u0275text"](15,"Current Stock"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275text"](17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"tr"),r["\u0275\u0275elementStart"](19,"td"),r["\u0275\u0275text"](20,"Selling Price"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"td"),r["\u0275\u0275text"](22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"tr"),r["\u0275\u0275elementStart"](24,"td"),r["\u0275\u0275text"](25,"Unit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"td"),r["\u0275\u0275text"](27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"tr"),r["\u0275\u0275elementStart"](29,"td"),r["\u0275\u0275text"](30,"Cost Price"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"td"),r["\u0275\u0275text"](32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"tr"),r["\u0275\u0275elementStart"](34,"td"),r["\u0275\u0275text"](35,"Expiry Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"td"),r["\u0275\u0275text"](37),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"tr"),r["\u0275\u0275elementStart"](39,"td"),r["\u0275\u0275text"](40,"Notes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"td"),r["\u0275\u0275text"](42),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"tr"),r["\u0275\u0275elementStart"](44,"td"),r["\u0275\u0275text"](45,"Size"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"td"),r["\u0275\u0275text"](47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"tr"),r["\u0275\u0275elementStart"](49,"td"),r["\u0275\u0275text"](50,"Shelf/Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"td"),r["\u0275\u0275text"](52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](53,"tr"),r["\u0275\u0275elementStart"](54,"td"),r["\u0275\u0275text"](55,"Active Ingredients"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"td"),r["\u0275\u0275text"](57),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](58,"tr"),r["\u0275\u0275elementStart"](59,"td"),r["\u0275\u0275text"](60,"Drug Information"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](61,"td"),r["\u0275\u0275text"](62),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"tr"),r["\u0275\u0275elementStart"](64,"td"),r["\u0275\u0275text"](65,"Barcode"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"td"),r["\u0275\u0275text"](67),r["\u0275\u0275element"](68,"ngx-barcode6",66),r["\u0275\u0275elementStart"](69,"button",5),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().printBarcode()})),r["\u0275\u0275element"](70,"i",67),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"div",64),r["\u0275\u0275elementStart"](72,"h6"),r["\u0275\u0275text"](73,"Batches"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](74,"table",32),r["\u0275\u0275elementStart"](75,"thead"),r["\u0275\u0275elementStart"](76,"tr"),r["\u0275\u0275elementStart"](77,"th"),r["\u0275\u0275text"](78,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](79,"th"),r["\u0275\u0275text"](80,"Batch Number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"th"),r["\u0275\u0275text"](82,"Expiry Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](83,"th"),r["\u0275\u0275text"](84,"Quantity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](85,"th"),r["\u0275\u0275text"](86,"Purchase Invoice"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](87,"th"),r["\u0275\u0275text"](88,"Barcode"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](89,"th"),r["\u0275\u0275text"](90,"Quantity Sold"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](91,"tbody"),r["\u0275\u0275template"](92,S,15,7,"tr",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"]("",a.object.name," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.category," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.stock," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.price," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.unit," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.cost_price," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.expiry," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.notes," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.size," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.shelf," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.active_ingredients," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.drug_info," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",a.object.barcode," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("bc-element-type","img")("bc-value",a.object.barcode)("bc-display-value",!0)("bc-height",25)("bc-width",1),r["\u0275\u0275advance"](24),r["\u0275\u0275property"]("ngForOf",a.object.batches)}}function E(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function w(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function k(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275elementStart"](12,"a",68),r["\u0275\u0275text"](13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275text"](17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",a+1," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",n.date," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.price),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.quantity),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.vendor_name),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate1"]("routerLink","/view_invoice/",n.code,"/purchase"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.code," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.markup),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",n.display_name," ")}}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",69),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" Sales Invoice: #",n.selected_item.invoice," ")}}function C(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function j(e,t){if(1&e&&r["\u0275\u0275element"](0,"app-sales-history",70),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("show_return",!1)("objects",n.sale_invoice_objects)}}function D(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",69),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" Purchase Invoice - #",n.selected_item.invoice," ")}}function N(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function T(e,t){if(1&e&&r["\u0275\u0275element"](0,"app-purchase-history",71),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("objects",n.purchase_invoice_objects)}}function L(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",69),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" Transfer Invoice - #",n.selected_item.invoice," ")}}function P(e,t){1&e&&r["\u0275\u0275element"](0,"app-loading")}function O(e,t){if(1&e&&r["\u0275\u0275element"](0,"app-transfer-history",71),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("objects",n.transfer_invoice_objects)}}function q(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",72),r["\u0275\u0275elementStart"](1,"div",73),r["\u0275\u0275element"](2,"ngx-barcode6",74),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("bc-value",n.object.barcode)("bc-display-value",!0)("bc-height",40)}}var A,B,R,F=[{path:"",component:(A=function(){function e(t,n,a,i){_classCallCheck(this,e),this.dbService=n,this.notify=a,this.authService=i,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.orders=[],this.is_loading_orders=!0,this.is_loaded_orders=!1,this.sales=[],this.is_loading_sales=!0,this.is_loaded_sales=!1,this.purchases=[],this.is_loading_purchases=!0,this.is_loaded_purchases=!1,this.prices=[],this.is_loading_prices=!0,this.is_loaded_prices=!1,this.stock_changes=[],this.branches=[],-1==this.authService.current_user.permissions.indexOf("View Inventory")&&(this.notify.failNotification("You are not permitted to view the page"),this.dbService.goBackHome()),this.user_type=this.authService.current_user.type,this.dbService.setTitle("Product Details"),this.id=t.snapshot.params.id}return _createClass(e,[{key:"ngOnInit",value:function(){this.getObject(this.id)}},{key:"getObject",value:function(e){var t=this;this.is_loading=!0,this.is_loaded=!1,this.error=!1,this.dbService.getDataWithQuery("product/findById",this.authService.current_user,"id="+this.id+"&company_id="+this.authService.current_user.company_id+"&user_type="+this.authService.current_user.type).subscribe((function(e){"1"==e.status?(t.object=e.data,t.is_loading=!1,t.is_loaded=!0,t.error=!1,t.getChanges()):(t.is_loading=!1,t.is_loaded=!1,t.error=!0)}),(function(e){t.is_loading=!1,t.error=!0,t.is_loaded=!1}))}},{key:"getOrders",value:function(){var e=this;this.dbService.getDataWithQuery("order/getList",this.authService.current_user,"product="+this.object.name).subscribe((function(t){e.orders=t.data,e.is_loading_orders=!1,e.is_loaded_orders=!0}),(function(t){e.is_loading_orders=!1,e.is_loaded_orders=!1}))}},{key:"getSales",value:function(){var e=this;this.dbService.getDataWithQuery("sale/getProductSales",this.authService.current_user,"product="+this.object.id+"&company_id="+this.authService.current_user.company_id).subscribe((function(t){e.sales=t.data,e.is_loading_sales=!1,e.is_loaded_sales=!0}),(function(t){e.is_loading_sales=!1,e.is_loaded_sales=!1}))}},{key:"getChanges",value:function(){var e=this;this.dbService.getDataWithQuery("product/getStockChanges",this.authService.current_user,"product="+this.object.id+"&company_id="+this.authService.current_user.company_id).subscribe((function(t){if("-1"==t.status);else{e.dbService.sortObjects(t.data,"timestamp");var n=0;t.data.map((function(e){switch(e.type){case"sale":e.previous_stock=n,e.new_stock=n-=parseInt(e.quantity);break;case"stock_adjustment":e.previous_stock=n,e.new_stock=n=parseInt(e.quantity);break;case"purchase":case"transfer":e.previous_stock=n,e.new_stock=n+=parseInt(e.quantity)}})),e.stock_changes=t.data}e.is_loading_purchases=!1,e.is_loaded_purchases=!0}),(function(t){e.is_loading_purchases=!1,e.is_loaded_purchases=!1}))}},{key:"showDetails",value:function(e){switch(e.type){case"purchase":this.showPurchaseInvoiceDetails(e);break;case"transfer":this.showTransferInvoiceDetails(e);break;case"sale":default:this.showSalesInvoiceDetails(e.invoice)}}},{key:"showSalesInvoiceDetails",value:function(e){var t=this;$("#sale_details_modal").modal("show"),this.is_loaded_sales_details=!1,this.is_loading_sales_details=!0,this.dbService.getData("sale/getSaleDetails?code="+e+"&company_id="+this.authService.current_user.company_id,this.authService.current_user).subscribe((function(e){t.sale_invoice_objects=e.data,t.sale_invoice_objects.map((function(e){})),t.is_loaded_sales_details=!0,t.is_loading_sales_details=!1}),(function(e){t.is_loaded_sales_details=!0,t.is_loading_sales_details=!1,t.notify.failNotification("Unable to get sales")}))}},{key:"showPurchaseInvoiceDetails",value:function(e){var t=this;$("#purchase_details_modal").modal("show"),this.selected_item=e,this.is_loaded_purchase_details=!1,this.is_loading_purchase_details=!0,this.dbService.getData("purchase/getDetails?code="+e.invoice+"&company_id="+this.authService.current_user.company_id,this.authService.current_user).subscribe((function(e){t.purchase_invoice_objects=e.data,t.purchase_invoice_objects.map((function(e){})),t.is_loaded_purchase_details=!0,t.is_loading_purchase_details=!1}),(function(e){t.is_loaded_purchase_details=!0,t.is_loading_purchase_details=!1,t.notify.failNotification("Unable to get purchases invoice")}))}},{key:"showTransferInvoiceDetails",value:function(e){var t=this;$("#transfer_details_modal").modal("show"),this.selected_item=e,this.is_loaded_transfer_details=!1,this.is_loading_transfer_details=!0,this.dbService.getData("transfer/getDetails?code="+e.invoice+"&company_id="+this.authService.current_user.company_id,this.authService.current_user).subscribe((function(e){t.transfer_invoice_objects=e.data,t.transfer_invoice_objects.map((function(e){})),t.is_loaded_transfer_details=!0,t.is_loading_transfer_details=!1}),(function(e){t.is_loaded_transfer_details=!0,t.is_loading_transfer_details=!1,t.notify.failNotification("Unable to get transfers")}))}},{key:"goBack",value:function(){window.history.back()}},{key:"getBranchDetails",value:function(){var e=this;this.is_loading_branches=!0,this.notify.showLoading(),this.dbService.getData("product/getBranchProductDetails?only_others=no&product_id="+this.id,this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status||(e.branches=t.data,e.is_loading_branches=!1)}),(function(t){e.is_loading_branches=!0,e.notify.hideLoading(),e.notify.noConnectionNotification()}))}},{key:"salesSelected",value:function(e){this.showSalesInvoiceDetails(e[0].code)}},{key:"delete",value:function(){var e=this;if(window.confirm("Sure you want to delete the selected products?")){var t=[this.id],n=new FormData;this.notify.showLoading(),n.append("id",t.toString()),this.dbService.postData(n,"product/delete",this.authService.current_user).subscribe((function(t){switch(e.notify.hideLoading(),t.status){case"0":e.notify.failNotification("Error: You are not logged in");break;case"-9":e.notify.failNotification("Error: You are not permitted");break;case"-1":$("#erase_modal").modal("show");break;default:e.goBack(),e.notify.showNotification("Products deleted successfully","success",3e3)}}),(function(t){e.notify.noConnectionNotification()}))}}},{key:"erase",value:function(){var e=this;$("#erase_modal").modal("hide");var t=[this.id],n=new FormData;this.notify.showLoading(),n.append("id",t.toString()),this.dbService.postData(n,"product/erase",this.authService.current_user).subscribe((function(t){switch(e.notify.hideLoading(),t.status){case"0":e.notify.failNotification("Error: You are not logged in");break;case"-9":e.notify.failNotification("Error: You are not permitted");break;case"-1":alert("Server error! Please try again or contact admin");break;default:e.goBack(),e.notify.showNotification("Products deleted successfully","success",3e3)}}),(function(t){e.notify.noConnectionNotification()}))}},{key:"showPriceHistory",value:function(){var e=this;this.is_loaded_prices=!1,this.is_loading_prices=!0,this.dbService.getData("purchase/getProductPurchases?product="+this.id+"&company_id="+this.authService.current_user.company_id,this.authService.current_user).subscribe((function(t){e.prices=t.data,e.is_loaded_prices=!0,e.is_loading_prices=!1}),(function(t){e.is_loaded_prices=!1,e.is_loading_prices=!1,e.notify.failNotification("Unable to get price history")}))}},{key:"printBarcode",value:function(){var e,t;e=document.getElementById("invoice").innerHTML,(t=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),t.document.write('\n          <html>\n            <head>\n              <title>Invoice</title>\n              <style>\n              body{\n                font-size: 13px;\n              }\n              #invoice { page-break-after: always; }\n    #invoice:last-child { page-break-after: avoid; }\n\n\n    table{\n        width: 100%;\n        border: 1px solid #e9ecef;\n        font-size: 13px !important;\n    }\n\n    .small-margin{\n      margin-bottom: 10px;\n    }\n\n    .table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}\n           .center{\n             text-align:center\n           }\n           .text-left{text-align:left!important}.text-right{text-align:right!important; float:right}\n           .text-center{text-align:center!important}\n           @media (min-width:576px){.text-sm-left{text-align:left!important}\n           .text-sm-right{text-align:right!important}\n           .text-sm-center{text-align:center!important}}\n           @media (min-width:768px){.text-md-left{text-align:left!important}\n           .text-md-right{text-align:right!important}\n           .text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}\n\n           .row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}\n              </style>\n            </head>\n        <body onload="window.print();"><div id="invoice">'.concat(e,"</div>\n        <script>\n               window.onafterprint = function(){\n                window.close();\n              }\n               <\/script>\n                </body>\n          </html>")),t.document.close()}}]),e}(),A.\u0275fac=function(e){return new(e||A)(r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](s.a))},A.\u0275cmp=r["\u0275\u0275defineComponent"]({type:A,selectors:[["app-product-details"]],decls:126,vars:22,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],["class","btn btn-sm btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-refresh"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],["role","tablist",1,"nav","nav-tabs","md-tabs"],[1,"nav-item"],["role","tab","href","#details","data-toggle","tab",1,"nav-link","active"],[1,"slide"],["role","tab","href","#purchase","data-toggle","tab",1,"nav-link"],["role","tab","href","#consumption","data-toggle","tab",1,"nav-link"],[1,"nav-item",3,"click"],["role","tab","href","#sales","data-toggle","tab",1,"nav-link"],["role","tab","href","#prices","data-toggle","tab",1,"nav-link"],[1,"tab-content","tabs","card-block"],["role","tabpanel","id","details",1,"tab-pane","active"],[1,"card"],[1,"card-body"],["role","tabpanel","id","purchase",1,"tab-pane"],[1,"card-header"],[1,"fa","fa-info"],[3,"id"],["role","tabpanel","id","consumption",1,"tab-pane"],["role","tabpanel","id","sales",1,"tab-pane"],[3,"objects","onFinish"],["role","tabpanel","id","prices",1,"tab-pane"],[1,"card-body","table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[4,"ngFor","ngForOf"],["id","sale_details_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],["class","modal-header",4,"ngIf"],[1,"modal-body"],[3,"show_return","objects",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["id","purchase_details_modal","tabindex","-1","role","dialog",1,"modal","fade"],[3,"objects",4,"ngIf"],["id","transfer_details_modal","tabindex","-1","role","dialog",1,"modal","fade"],["id","erase_modal","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-header","text-danger"],["data-dismiss","modal",1,"btn","btn-danger","btn-sm"],[1,"btn","btn-success","btn-sm",3,"click"],["id","invoice",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-remove"],[1,"col-md-3","col-sm-6","col-12"],[1,"info-box"],[1,"info-box-icon","bg-warning"],[1,"fa","fa-database"],[1,"info-box-content"],[1,"info-box-text"],[1,"info-box-number"],[1,"fa","fa-dollar"],[1,"info-box-icon","bg-info"],[1,"info-box-icon","bg-success"],[1,"col-md-4"],[1,"table","table-striped","table-bordered"],[3,"bc-element-type","bc-value","bc-display-value","bc-height","bc-width"],[1,"fa","fa-print"],[3,"routerLink"],[1,"modal-header"],[3,"show_return","objects"],[3,"objects"],["id","invoice"],[1,"text-center"],[3,"bc-value","bc-display-value","bc-height"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Product Details "),r["\u0275\u0275template"](6,v,3,1,"button",4),r["\u0275\u0275elementStart"](7,"button",5),r["\u0275\u0275listener"]("click",(function(){return t.ngOnInit()})),r["\u0275\u0275element"](8,"i",6),r["\u0275\u0275text"](9," Refresh"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,b,3,0,"button",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](11,g,1,0,"app-loading",8),r["\u0275\u0275template"](12,_,3,0,"div",8),r["\u0275\u0275template"](13,y,37,6,"div",9),r["\u0275\u0275elementStart"](14,"ul",10),r["\u0275\u0275elementStart"](15,"li",11),r["\u0275\u0275elementStart"](16,"a",12),r["\u0275\u0275text"](17,"DETAILS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](18,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"li",11),r["\u0275\u0275elementStart"](20,"a",14),r["\u0275\u0275text"](21,"STOCK CHANGES"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"li",11),r["\u0275\u0275elementStart"](23,"a",15),r["\u0275\u0275text"](24,"PRODUCT CONSUMPTION"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"li",16),r["\u0275\u0275listener"]("click",(function(){return t.getSales()})),r["\u0275\u0275elementStart"](26,"a",17),r["\u0275\u0275text"](27,"SALES"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"li",16),r["\u0275\u0275listener"]("click",(function(){return t.showPriceHistory()})),r["\u0275\u0275elementStart"](30,"a",18),r["\u0275\u0275text"](31,"PRICE HISTORY"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](32,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div",19),r["\u0275\u0275elementStart"](34,"div",20),r["\u0275\u0275elementStart"](35,"div",21),r["\u0275\u0275elementStart"](36,"div",22),r["\u0275\u0275template"](37,x,93,19,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"div",23),r["\u0275\u0275elementStart"](39,"div",21),r["\u0275\u0275elementStart"](40,"div",24),r["\u0275\u0275element"](41,"i",25),r["\u0275\u0275text"](42," Click an invoice number for more details "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"div",22),r["\u0275\u0275element"](44,"app-product-history",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",27),r["\u0275\u0275elementStart"](46,"div",21),r["\u0275\u0275elementStart"](47,"div",24),r["\u0275\u0275text"](48," Choose a period to view the quantities purchased, sold, and transferred for this product "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"div",22),r["\u0275\u0275element"](50,"app-product-consumption-single",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"div",28),r["\u0275\u0275template"](52,E,1,0,"app-loading",8),r["\u0275\u0275elementStart"](53,"div",21),r["\u0275\u0275elementStart"](54,"div",22),r["\u0275\u0275elementStart"](55,"app-sales-history",29),r["\u0275\u0275listener"]("onFinish",(function(e){return t.salesSelected(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"div",30),r["\u0275\u0275template"](57,w,1,0,"app-loading",8),r["\u0275\u0275elementStart"](58,"div",21),r["\u0275\u0275elementStart"](59,"div",31),r["\u0275\u0275elementStart"](60,"table",32),r["\u0275\u0275elementStart"](61,"thead"),r["\u0275\u0275elementStart"](62,"tr"),r["\u0275\u0275elementStart"](63,"th"),r["\u0275\u0275text"](64,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"th"),r["\u0275\u0275text"](66,"Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](67,"th"),r["\u0275\u0275text"](68,"Price"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](69,"th"),r["\u0275\u0275text"](70,"Quantity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"th"),r["\u0275\u0275text"](72,"Vendor"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](73,"th"),r["\u0275\u0275text"](74,"Invoice"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](75,"th"),r["\u0275\u0275text"](76,"Markup"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](77,"th"),r["\u0275\u0275text"](78,"By"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](79,"tbody"),r["\u0275\u0275template"](80,k,18,9,"tr",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"div",34),r["\u0275\u0275elementStart"](82,"div",35),r["\u0275\u0275elementStart"](83,"div",36),r["\u0275\u0275template"](84,I,2,1,"div",37),r["\u0275\u0275elementStart"](85,"div",38),r["\u0275\u0275template"](86,C,1,0,"app-loading",8),r["\u0275\u0275template"](87,j,1,2,"app-sales-history",39),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](88,"div",40),r["\u0275\u0275elementStart"](89,"button",41),r["\u0275\u0275text"](90,"Close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](91,"div",42),r["\u0275\u0275elementStart"](92,"div",35),r["\u0275\u0275elementStart"](93,"div",36),r["\u0275\u0275template"](94,D,2,1,"div",37),r["\u0275\u0275elementStart"](95,"div",38),r["\u0275\u0275template"](96,N,1,0,"app-loading",8),r["\u0275\u0275template"](97,T,1,1,"app-purchase-history",43),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](98,"div",40),r["\u0275\u0275elementStart"](99,"button",41),r["\u0275\u0275text"](100,"Close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](101,"div",44),r["\u0275\u0275elementStart"](102,"div",35),r["\u0275\u0275elementStart"](103,"div",36),r["\u0275\u0275template"](104,L,2,1,"div",37),r["\u0275\u0275elementStart"](105,"div",38),r["\u0275\u0275template"](106,P,1,0,"app-loading",8),r["\u0275\u0275template"](107,O,1,1,"app-transfer-history",43),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](108,"div",40),r["\u0275\u0275elementStart"](109,"button",41),r["\u0275\u0275text"](110,"Close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](111,"div",45),r["\u0275\u0275elementStart"](112,"div",35),r["\u0275\u0275elementStart"](113,"div",36),r["\u0275\u0275elementStart"](114,"div",46),r["\u0275\u0275elementStart"](115,"h5"),r["\u0275\u0275text"](116,"Attention - Delete Product"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](117,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](118,"div",38),r["\u0275\u0275text"](119," This product has previous records. Do you really want to delete it? The system will also delete every record of the item in sales, purchases, transfers, stock adjustment "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](120,"div",40),r["\u0275\u0275elementStart"](121,"button",47),r["\u0275\u0275text"](122,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](123,"button",48),r["\u0275\u0275listener"]("click",(function(){return t.erase()})),r["\u0275\u0275text"](124,"Continue to Delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](125,q,3,3,"div",49)),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf","admin"!=t.user_type),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf","admin"!=t.user_type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.error),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded),r["\u0275\u0275advance"](24),r["\u0275\u0275property"]("ngIf",t.is_loaded),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("id",t.id),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("id",t.id),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loading_sales_details),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("objects",t.sales),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loading_prices),r["\u0275\u0275advance"](23),r["\u0275\u0275property"]("ngForOf",t.prices),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",null!=t.selected_item),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loading_sales_details),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded_sales_details),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",null!=t.selected_item),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loading_purchase_details),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded_purchase_details),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",null!=t.selected_item),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.is_loading_transfer_details),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded_transfer_details),r["\u0275\u0275advance"](18),r["\u0275\u0275property"]("ngIf",t.is_loaded))},directives:[a.j,d.a,c.a,m.a,a.i,i.d,u.a,p.a,i.e,h.a,f.a],styles:[""]}),A)}],M=((B=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||B)},imports:[[i.f.forChild(F)],i.f]}),B),Q=n("nEHF"),V=n("nBlB"),z=n("rNAZ"),H=n("wDHj"),G=((R=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||R)},imports:[[a.b,M,Q.a,V.a,z.a,H.a,p.b]]}),R)},mS1k:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function e(){_classCallCheck(this,e),this.active_ingredients="",this.drug_info=""}},nBlB:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("ofXK"),i=n("nEHF"),r=n("9EpT"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.b,i.a,r.b]]}),e}()},rfqN:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("fXoL"),i=n("c92J"),r=n("1VJT"),o=n("ccyI"),l=n("ofXK"),s=n("n49D"),d=n("nVU4"),c=["agGrid"];function m(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",1),a["\u0275\u0275elementStart"](1,"h4"),a["\u0275\u0275text"](2,"No results"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var u=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.dbService=t,this.notify=n,this.authService=i,this.objects=[],this.show_options=!0,this.type="",this.receipt="",this.onReturn=new a.EventEmitter,this.can_view=!0,this.can_edit=!0,this.can_create=!0,this.can_delete=!0,this.edit_keys=["quantity"],this.offset=0,this.summary=[],this.overall_total=0,this.quantity_error=!1,this.columnDefs=[{headerName:"Product",field:"product_name",sortable:!0,filter:!0,checkboxSelection:!1},{headerName:"Quantity",field:"quantity",sortable:!0,filter:!0},{headerName:"Price",field:"price",sortable:!0,filter:!0},{headerName:"Total Amount",field:"total",sortable:!0,filter:!0},{headerName:"Receipt",field:"code",sortable:!0,filter:!0},{headerName:"Date",field:"date",sortable:!0,filter:!0}],this.rowData=[],this.selected_items=[],-1==this.authService.current_user.permissions.indexOf("Delete Transfers")&&(this.can_delete=!1),this.defaultColDef={resizable:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){this.prep()}},{key:"onGridReady",value:function(e){this.gridApi=e.api,this.agGrid.api.sizeColumnsToFit()}},{key:"onSelectionChanged",value:function(e){var t=this.gridApi.getSelectedRows();this.selected_items=t}},{key:"ngOnChanges",value:function(){this.prep()}},{key:"prep",value:function(){this.objects.map((function(e){e.total=e.price*e.quantity})),this.calculateTotals()}},{key:"startEdit",value:function(e){this.selected=e,this.new_quantity=this.selected.quantity,$("#edit_sale_modal").modal({backdrop:"static",keyboard:!1})}},{key:"returnSelected",value:function(){$("#return_sale_modal").modal({backdrop:"static",keyboard:!1})}},{key:"getSelectedRows",value:function(){var e=this.agGrid.api.getSelectedNodes().map((function(e){return e.data})).map((function(e){return e.product_name+" "+e.price})).join(", ");alert("Selected nodes: ".concat(e))}},{key:"checkQuantity",value:function(){this.quantity_error=!1,parseInt(this.new_quantity)>this.selected.quantity&&(this.quantity_error=!0,this.new_quantity=this.selected.quantity)}},{key:"saveReturns",value:function(){var e=this;if(null==this.selected_items||null==this.selected_items||this.selected_items.length<1)return this.notify.failNotification("Please add at least one product"),!1;this.notify.showLoading();for(var t=[],n=[],a=[],i=[],r="RFS-"+this.dbService.getToday("timestamp_string"),o=0;o<this.selected_items.length;o++){var l=this.selected_items[o];t.push(l.product_id),n.push(l.price),a.push(-1*l.quantity),i.push(l.product_name)}var s=new FormData;s.append("products",t.join("||")),s.append("prices",n.join("||")),s.append("quantities",a.join("||")),s.append("code",r),s.append("product_names",i.join("||")),s.append("amount_paid","0"),s.append("created_by",this.authService.current_user.id),s.append("date",this.dbService.getToday()),s.append("display_name",this.authService.current_user.display_name),s.append("payment_method","Return"),this.dbService.postData(s,"sale/saveBulk",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):($("#return_sale_modal").modal("hide"),e.agGrid.api.deselectAll(),e.selected_items=[],e.notify.hideLoading(),e.onReturn.emit(t.code),e.notify.successNotification("Items returned successfully"))}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification(),console.log(t)}))}},{key:"saveQuantity",value:function(){var e=this;$("#edit_sale_modal").modal("hide");var t=new FormData;this.notify.showLoading();var n=-1*parseFloat(this.new_quantity);t.append("quantities",n.toString()),t.append("products",this.selected.product.id),t.append("prices",this.selected.price.toFixed(2)),t.append("product_name",this.selected.product.name),t.append("created_by",this.authService.current_user.id),t.append("date",this.dbService.getToday()),this.dbService.postData(t,"sale/saveBulk",this.authService.current_user).subscribe((function(t){switch(e.notify.hideLoading(),t.status){case"0":e.notify.failNotification("You are not logged in");break;case"-1":e.notify.failNotification("server error. Contact admin");break;case"-9":e.notify.failNotification("You are not permitted ");break;default:e.notify.successNotification("sale edited successfully"),e.calculateTotals()}}),(function(t){e.notify.noConnectionNotification()}))}},{key:"delete",value:function(e){var t=this;if(window.confirm("Sure you want to delete this sale? You cannot undo this")){var n=new FormData;this.notify.showLoading(),n.append("id",e.id),n.append("display_name",this.authService.current_user.display_name),n.append("code",e.code),n.append("name",e.product.name),this.dbService.postData(n,"sale/deleteItem",this.authService.current_user).subscribe((function(n){t.notify.hideLoading(),"1"===n.status&&(t.objects.splice(t.objects.indexOf(e),1),t.notify.showNotification("Sale deleted successfully","success",3e3),t.calculateTotals())}),(function(e){t.notify.noConnectionNotification()}))}}},{key:"calculateTotals",value:function(){var e=0;this.objects.map((function(t){e+=t.price*t.quantity})),this.overall_total=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-transfer-history"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](c,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.agGrid=n.first)},inputs:{objects:"objects",show_options:"show_options",type:"type",receipt:"receipt",offset:"offset"},outputs:{onReturn:"onReturn"},features:[a["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:6,consts:[["class","",4,"ngIf"],[1,""],["id","sales_details"],[1,"well"],[1,"text-danger"],[3,"objects"],["rowSelection","single",1,"ag-theme-balham",2,"width","100%","height","400px","font-family","Muli","font-size","15px",3,"rowData","columnDefs","defaultColDef","selectionChanged","gridReady"],["agGrid",""]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,m,3,0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"b"),a["\u0275\u0275text"](5,"Overall Total: "),a["\u0275\u0275elementStart"](6,"span",4),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"app-export-to-excel",5),a["\u0275\u0275elementStart"](9,"ag-grid-angular",6,7),a["\u0275\u0275listener"]("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("gridReady",(function(e){return t.onGridReady(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngIf",t.objects.length<1),a["\u0275\u0275advance"](7),a["\u0275\u0275textInterpolate1"]("GHC ",t.overall_total.toFixed(2),""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("objects",t.objects),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("rowData",t.objects)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef))},directives:[l.j,s.a,d.AgGridAngular],styles:[""]}),e}()},wDHj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("ofXK"),i=n("nEHF"),r=n("6QD7"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.b,i.a,r.b],r.b]}),e}()}}]);