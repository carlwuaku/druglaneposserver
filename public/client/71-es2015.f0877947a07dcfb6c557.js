(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{vCx3:function(e,t,n){"use strict";n.r(t),n.d(t,"AddPurchasePaymentModule",(function(){return v}));var i=n("ofXK"),o=n("tyNb"),r=n("9iXL"),a=n("fXoL"),d=n("c92J"),l=n("1VJT"),c=n("bgkY"),m=n("ccyI"),s=n("3Pt+"),u=n("tW9x");const p=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,a){this.dbService=e,this.router=t,this.ar=n,this.notify=i,this.socket=o,this.authService=a,this.vendor_id="",-1==this.authService.current_user.permissions.indexOf("Manage Accounts")&&-1==this.authService.current_user.permissions.indexOf("Receive Purchases")&&(this.notify.failNotification("You are not permitted to view the page"),this.goBack()),this.dbService.setTitle("Record Payment for Purchase"),this.object=new r.a,n.queryParams.subscribe(e=>{console.log(e),this.object.item_code=e.item_code,this.object.recipient=e.recipient,this.vendor_id=e.recipient})}ngOnInit(){}vendorSelected(e){this.object.recipient=e.id,this.vendor=e,console.log(e)}submit(){this.notify.showLoading();const e=new FormData;e.append("item_code",this.object.item_code),e.append("notes",this.object.notes),e.append("transaction_id",this.object.transaction_id),e.append("date",this.object.date),e.append("created_by",this.authService.current_user.id),e.append("type","Credit Purchase Payment"),e.append("payment_method",this.object.payment_method),e.append("amount",this.object.amount),e.append("recipient",this.object.recipient),e.append("created_on",this.dbService.getToday("timestamp")),e.append("display_name",this.authService.current_user.display_name),this.dbService.postData(e,"admin/saveOutgoingPayment",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"0"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-1"===e.status?this.notify.failNotification("Server error. Please try again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.notify.successNotification("Payment saved successfully"),this.object=new r.a,this.object.recipient=this.vendor.id)},e=>{this.notify.hideLoading(),this.notify.noConnectionNotification()})}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](o.c),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-purchase-payment"]],decls:63,vars:8,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,""],[1,"row","bottom-margin"],[1,"col-md-4"],["required","","type","date","name","date",3,"ngModel","ngModelChange"],["required","","type","text","name","amount",3,"ngModel","ngModelChange"],[3,"select_item","type","onFinish"],["required","","type","text","name","item_code",1,"form-control",3,"ngModel","ngModelChange"],["name","payment_method",3,"ngModel","ngModelChange"],["required","","type","text","name","transaction_id",1,"form-control",3,"ngModel","ngModelChange"],["name","notes","rows","3","cols","40",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success"],["type","reset","name","reset","value","Reset",1,"btn","btn-warning"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"h4"),a["\u0275\u0275text"](5,"Enter Payment For A Purchase "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"form",6,7),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),a["\u0275\u0275elementStart"](10,"div",8),a["\u0275\u0275elementStart"](11,"em"),a["\u0275\u0275text"](12,"Fields marked * are required"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"div",10),a["\u0275\u0275elementStart"](15,"label"),a["\u0275\u0275text"](16,"Payment Date*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"br"),a["\u0275\u0275elementStart"](18,"input",11),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.date=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",10),a["\u0275\u0275elementStart"](20,"label"),a["\u0275\u0275text"](21,"Amount Paid*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](22,"br"),a["\u0275\u0275elementStart"](23,"input",12),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.amount=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",10),a["\u0275\u0275elementStart"](25,"app-select-vendor",13),a["\u0275\u0275listener"]("onFinish",(function(e){return t.vendorSelected(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"hr"),a["\u0275\u0275elementStart"](27,"div",9),a["\u0275\u0275elementStart"](28,"div",10),a["\u0275\u0275elementStart"](29,"label"),a["\u0275\u0275text"](30,"Invoice Numbers"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"br"),a["\u0275\u0275elementStart"](32,"input",14),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.item_code=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",10),a["\u0275\u0275elementStart"](34,"label"),a["\u0275\u0275text"](35,"Payment Method*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"br"),a["\u0275\u0275elementStart"](37,"div"),a["\u0275\u0275elementStart"](38,"select",15),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.payment_method=e})),a["\u0275\u0275elementStart"](39,"option"),a["\u0275\u0275text"](40,"Cash"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"option"),a["\u0275\u0275text"](42,"Mobile Money"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"option"),a["\u0275\u0275text"](44,"Cheque"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"option"),a["\u0275\u0275text"](46,"POS"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"option"),a["\u0275\u0275text"](48,"Other"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](49,"div",10),a["\u0275\u0275elementStart"](50,"label"),a["\u0275\u0275text"](51,"Transaction Id/Reference/Cheque No.*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](52,"br"),a["\u0275\u0275elementStart"](53,"input",16),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.transaction_id=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](54,"hr"),a["\u0275\u0275elementStart"](55,"div",9),a["\u0275\u0275elementStart"](56,"div",10),a["\u0275\u0275elementStart"](57,"label"),a["\u0275\u0275text"](58,"Notes"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](59,"br"),a["\u0275\u0275elementStart"](60,"textarea",17),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.object.notes=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](61,"input",18),a["\u0275\u0275element"](62,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](18),a["\u0275\u0275property"]("ngModel",t.object.date),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",t.object.amount),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("select_item",t.vendor_id)("type","select"),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",t.object.item_code),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.object.payment_method),a["\u0275\u0275advance"](15),a["\u0275\u0275property"]("ngModel",t.object.transaction_id),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",t.object.notes))},directives:[s.f,s.g,s.b,s.l,s.e,s.h,u.a,s.m,s.i,s.n],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(p)],o.f]}),e})();var b=n("nEHF"),g=n("wDHj");let v=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,h,b.a,g.a]]}),e})()}}]);