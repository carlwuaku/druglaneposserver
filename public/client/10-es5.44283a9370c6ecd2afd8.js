function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5Ztd":function(e,t,n){"use strict";n.r(t),n.d(t,"ViewClientDiagnosticsModule",(function(){return N}));var i=n("ofXK"),s=n("tyNb"),r=n("fXoL"),o=n("1VJT"),c=n("c92J"),a=n("ccyI"),l=n("3Pt+");function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"datalist",2),r["\u0275\u0275element"](1,"option",3),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate2"]("value","",n.name," (",n.phone,")")}}function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"b"),r["\u0275\u0275text"](2,"Not found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}var d=function(e){return{"select-product-active":e}};function f(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",11),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"](3).add(e)})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,s=t.index,o=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](3,d,s==o.arrowkeyLocation)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",i.name," (",i.phone,") ")}}function p(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275elementStart"](1,"ul",9),r["\u0275\u0275template"](2,f,2,5,"li",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",n.objects)}}function m(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1," No customer found. Check the spelling.\n"),r["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"input",5),r["\u0275\u0275listener"]("keyup",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().keyUp(e)}))("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().param=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](2,u,3,0,"div",6),r["\u0275\u0275template"](3,p,3,1,"div",7),r["\u0275\u0275template"](4,m,2,0,"div",6),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",i.param),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.objects.length<1&&i.is_finished_search),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.objects.length>0&&i.is_finished_search),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.objects.length<1&&i.is_finished_search)}}var g,_=((g=function(){function e(t,n){_classCallCheck(this,e),this.dbService=t,this.authService=n,this.onFinish=new r.EventEmitter,this.btn_text="Select",this.param="",this.objects=[],this.selected=null,this.is_searching=!1,this.is_finished_search=!1,this.error_search=!1,this.autocomplete=!1,this.autocomplete_list=[],this.onAdd=new r.EventEmitter,this.type="search",this.show="no",this.added=[],this.filter_param="",this.filter_results=[],this.arrowkeyLocation=0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){console.log(this.param),this.search()}},{key:"select_autocomplete",value:function(e){}},{key:"addItem",value:function(){$("#add_customer_modal").modal("show")}},{key:"itemAdded",value:function(e){this.objects.push(e),$("#add_customer_modal").modal("hide"),this.onFinish.emit(e)}},{key:"search",value:function(){var e=this;this.is_searching=!0,this.is_finished_search=!1,this.error_search=!1,this.dbService.getDataWithQuery("customer/search",this.authService.current_user,"param="+this.param).subscribe((function(t){"-1"===t.status?(e.is_searching=!1,e.is_finished_search=!1,e.error_search=!0):(e.objects=t.data,e.is_searching=!1,e.is_finished_search=!0,e.error_search=!1,e.selected=null)}),(function(t){e.is_searching=!1,e.is_finished_search=!1,e.error_search=!0}))}},{key:"add",value:function(e){this.onAdd.emit(e),console.log(e),this.is_finished_search=!1,$("#customer_search").focus(),this.param="",this.objects=[],this.arrowkeyLocation=0}},{key:"select",value:function(e){this.selected=e,this.onFinish.emit(e)}},{key:"highlightObject",value:function(e){this.objects.map((function(e){e.selected=!1})),this.highlightedObject=e,e.selected=!0}},{key:"keyUp",value:function(e){switch(e.keyCode){case 38:0==this.arrowkeyLocation||this.arrowkeyLocation--,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 40:this.arrowkeyLocation==this.objects.length-1||this.arrowkeyLocation++,$(".search_results").scrollTop(0),$(".search_results").scrollTop($(".select-product-active:first").offset().top-$(".search_results").height()+10),console.log($(".select-product-active:first").offset().top-$(".search_results").height()),this.focusCursor();break;case 13:var t=this.objects[this.arrowkeyLocation];null!=t&&null!=t&&this.add(t);break;case 27:this.hideSearchResults();break;default:this.arrowkeyLocation=0,this.search()}}},{key:"focusCursor",value:function(){var e=$("#customer_search").val();$("#customer_search").val("").val(e)}},{key:"hideSearchResults",value:function(){this.param="",this.objects.length=0,this.is_finished_search=!1}}]),e}()).\u0275fac=function(e){return new(e||g)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](a.a))},g.\u0275cmp=r["\u0275\u0275defineComponent"]({type:g,selectors:[["app-select-customer"]],inputs:{btn_text:"btn_text",param:"param",autocomplete:"autocomplete",type:"type",show:"show",timestamp:"timestamp"},outputs:{onFinish:"onFinish",onAdd:"onAdd"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["id","customer_list",4,"ngFor","ngForOf"],["class","focus_search",4,"ngIf"],["id","customer_list"],[3,"value"],[1,"focus_search"],["autofocus","","autocomplete","off","placeholder","Enter customer name or phone","required","","type","text","id","customer_search","name","search",3,"ngModel","keyup","ngModelChange"],[4,"ngIf"],["class","search_results ","id","search_results_list",4,"ngIf"],["id","search_results_list",1,"search_results"],[1,"list-group"],["tabindex","-1","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"list-group-item",3,"ngClass","click"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,h,2,2,"datalist",0),r["\u0275\u0275template"](1,v,5,4,"div",1)),2&e&&(r["\u0275\u0275property"]("ngForOf",t.objects),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","search"==t.type))},directives:[i.i,i.j,l.i,l.n,l.b,l.l,l.e,l.h,i.h],styles:[".autocomplete-items[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}"]}),g),y=n("NGcU");function b(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1," Type the name or phone of the client and select it. "),r["\u0275\u0275element"](2,"br"),r["\u0275\u0275elementStart"](3,"app-select-customer",6),r["\u0275\u0275listener"]("onAdd",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().itemSelected(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("type","search"))}function k(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"h5"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",n.client.name," (",n.client.phone,") ")}}function C(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275template"](2,k,2,2,"h5",4),r["\u0275\u0275elementStart"](3,"button",9),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().cancel()})),r["\u0275\u0275text"](4,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",10),r["\u0275\u0275element"](6,"app-diagnostics-list",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null!=i.client&&null!=i.client),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("objects",i.objects)("client_name",i.client_name)("client_phone",i.client_phone)}}var w,x,j,S=[{path:"",component:(w=function(){function e(t,n,i,s,r){_classCallCheck(this,e),this.notify=t,this.dbService=n,this.router=s,this.authService=r,this.stock_changes=[],this.can_master_edit=!0,this.can_edit=!0,this.client=null,this.objects=[],this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.client_name="",this.client_phone="",this.id=i.snapshot.params.id,this.dbService.setTitle(" Client Diagnostic History")}return _createClass(e,[{key:"ngOnInit",value:function(){null!=this.id&&(this.getClient(),this.getItems())}},{key:"getClient",value:function(){var e=this;this.is_loading=!0,this.notify.showLoading(),this.dbService.getData("customer/findById?id="+this.id,this.authService.current_user).subscribe((function(t){e.client=t.data,e.client_name=e.client.name,e.client_phone=e.client.phone,e.is_loading=!1,e.notify.hideLoading()}),(function(t){e.is_loading=!1,e.notify.noConnectionNotification()}))}},{key:"getItems",value:function(){var e=this;this.is_loading=!0,this.notify.showLoading(),this.dbService.getData("customer/getCustomerDiagnosticsList?customer="+this.id,this.authService.current_user).subscribe((function(t){e.objects=t.data,e.is_loading=!1,e.notify.hideLoading()}),(function(t){e.is_loading=!1,e.notify.noConnectionNotification()}))}},{key:"goBack",value:function(){window.history.back()}},{key:"itemSelected",value:function(e){this.router.navigate(["/viewclientdiagnostics/"+e.id])}},{key:"cancel",value:function(){this.router.navigate(["/viewclientdiagnostics"])}}]),e}(),w.\u0275fac=function(e){return new(e||w)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](s.d),r["\u0275\u0275directiveInject"](a.a))},w.\u0275cmp=r["\u0275\u0275defineComponent"]({type:w,selectors:[["app-view-client-diagnostics"]],decls:8,vars:2,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"],[4,"ngIf"],["class","card",4,"ngIf"],[3,"type","onAdd"],[1,"card"],[1,"card-header"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"card-body"],[3,"objects","client_name","client_phone"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Client Diagnostic History"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,b,4,1,"div",4),r["\u0275\u0275template"](7,C,7,4,"div",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",null==t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!=t.id&&null!=t.id))},directives:[i.j,_,y.a],styles:[""]}),w)}],I=((x=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},imports:[[s.f.forChild(S)],s.f]}),x),E=n("nEHF"),F=n("rNAZ"),L=n("NFbv"),N=((j=function e(){_classCallCheck(this,e)}).\u0275mod=r["\u0275\u0275defineNgModule"]({type:j}),j.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||j)},imports:[[i.b,I,E.a,F.a,L.a]]}),j)},n49D:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),s=n("4AQi"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.excel=t,this.objects=[],this.filename="download"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"export",value:function(){this.excel.exportAsExcelFile(this.objects,this.filename)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-export-to-excel"]],inputs:{objects:"objects",filename:"filename"},decls:3,vars:0,consts:[[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-file-excel-o"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("click",(function(){return t.export()})),i["\u0275\u0275element"](1,"i",1),i["\u0275\u0275text"](2," Export To Excel"),i["\u0275\u0275elementEnd"]())},styles:[""]}),e}()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),s=n("nEHF"),r=n("6QD7"),o=n("fXoL"),c=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,s.a,r.b],r.b]}),e}()}}]);