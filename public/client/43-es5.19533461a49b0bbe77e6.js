function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{FPPG:function(e,t,n){"use strict";n.r(t),n.d(t,"EditUserModule",(function(){return x}));var r=n("ofXK"),a=n("tyNb"),i=n("zmU/"),o=n("MCNt"),l=n("fXoL"),s=n("c92J"),d=n("1VJT"),m=n("ccyI"),c=n("3Pt+"),u=n("hiAm");function p(e,t){1&e&&l["\u0275\u0275element"](0,"app-loading")}function f(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",23),l["\u0275\u0275text"](1," Please make sure passwords match "),l["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option",26),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275propertyInterpolate"]("value",n.role_id),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.role_name," ")}}function g(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"td"),l["\u0275\u0275elementStart"](1,"select",24),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).role_id=e})),l["\u0275\u0275template"](2,h,2,2,"option",25),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](3,"span",15),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngModel",r.role_id),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",r.roles)}}function v(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"table",12),l["\u0275\u0275elementStart"](2,"tbody"),l["\u0275\u0275elementStart"](3,"tr"),l["\u0275\u0275elementStart"](4,"td"),l["\u0275\u0275elementStart"](5,"label"),l["\u0275\u0275text"](6,"Full Name*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275elementStart"](8,"input",13),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().user.display_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"tr"),l["\u0275\u0275elementStart"](10,"td"),l["\u0275\u0275elementStart"](11,"label"),l["\u0275\u0275text"](12,"Username*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"td"),l["\u0275\u0275elementStart"](14,"input",14),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().user.username=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](15,"span",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"tr"),l["\u0275\u0275elementStart"](17,"td"),l["\u0275\u0275elementStart"](18,"label"),l["\u0275\u0275text"](19,"Phone*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"td"),l["\u0275\u0275elementStart"](21,"input",16),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().user.phone=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"tr"),l["\u0275\u0275elementStart"](23,"td"),l["\u0275\u0275elementStart"](24,"label"),l["\u0275\u0275text"](25,"Email*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"td"),l["\u0275\u0275elementStart"](27,"input",17),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().user.email=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"tr"),l["\u0275\u0275elementStart"](29,"td"),l["\u0275\u0275elementStart"](30,"label"),l["\u0275\u0275text"](31,"Password"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](32,"br"),l["\u0275\u0275elementStart"](33,"em",18),l["\u0275\u0275text"](34,"leave the passwords empty if you do not intend to change the password"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"td"),l["\u0275\u0275elementStart"](36,"input",19),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().password=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](37,"tr"),l["\u0275\u0275elementStart"](38,"td"),l["\u0275\u0275elementStart"](39,"label"),l["\u0275\u0275text"](40,"Confirm Password"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](41,"td"),l["\u0275\u0275elementStart"](42,"input",20),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().confirm_password=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](43,f,2,0,"div",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"tr"),l["\u0275\u0275elementStart"](45,"td"),l["\u0275\u0275elementStart"](46,"label"),l["\u0275\u0275text"](47,"Role*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](48,g,4,2,"td",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](49,"input",22),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngModel",r.user.display_name),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",r.user.username),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngModel",r.user.phone),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",r.user.email),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngModel",r.password),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",r.confirm_password),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",r.password!=r.confirm_password),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",r.is_loaded_roles)}}var y,S,_,b=[{path:"",component:(y=function(){function e(t,n,r,a,l,s){_classCallCheck(this,e),this.location=t,this.router=n,this.dbService=a,this.notify=l,this.authService=s,this.uploadUrl="uploadPharmacistPicture",this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.error_roles=!1,this.is_loading_roles=!0,this.is_loaded_roles=!1,this.id=r.snapshot.params.id,this.user=new i.a,this.user.role=new o.a,-1==this.authService.current_user.permissions.indexOf("Manage Staff")&&this.dbService.goBackHome(),this.dbService.setTitle("Edit User")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dbService.getDataById(this.id,"admin/getUser",this.authService.current_user).subscribe((function(t){e.user=t.data,e.role_id=e.user.role.role_id,e.company_id=e.user.company_id,e.is_loading=!1,e.is_loaded=!0,e.error=!1}),(function(t){e.is_loading=!1,e.error=!0,e.is_loaded=!1})),this.dbService.getData("admin/getRoles",this.authService.current_user).subscribe((function(t){e.roles=t.data,e.is_loading_roles=!1,e.is_loaded_roles=!0,e.error_roles=!1}),(function(t){e.is_loading_roles=!1,e.error_roles=!0,e.is_loaded_roles=!1})),this.getBranches()}},{key:"uploadFinished",value:function(e){this.user.picture=e}},{key:"getBranches",value:function(){var e=this;this.notify.showLoading();var t="admin/getBranches?only_others=no";"admin"==this.authService.current_user.type&&(t+="&parent_company_id="+this.authService.current_user.parent_company_id),this.dbService.getData(t,this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status||(e.branches=t.data)}),(function(t){e.notify.hideLoading(),e.notify.noConnectionNotification()}))}},{key:"submit",value:function(){var e=this;this.notify.showLoading();var t=new FormData;t.append("display_name",this.user.display_name),t.append("username",this.user.username),t.append("password",this.password),t.append("email",this.user.email),t.append("role_id",this.role_id),t.append("type",this.user.type),t.append("phone",this.user.phone),t.append("picture",this.user.picture),t.append("company_id",this.company_id),t.append("id",this.id),this.dbService.postData(t,"admin/saveUser",this.authService.current_user).subscribe((function(t){e.notify.hideLoading(),"-1"===t.status?e.notify.failNotification("Unable to authenticate. Please login again"):"-9"===t.status?e.notify.showNotification("You are not permitted to perform this action","fail",3e3):(e.notify.successNotification("User edited successfully"),e.router.navigate(["/users"]))}),(function(t){e.notify.noConnectionNotification()}))}},{key:"goBack",value:function(){window.history.back()}}]),e}(),y.\u0275fac=function(e){return new(e||y)(l["\u0275\u0275directiveInject"](r.f),l["\u0275\u0275directiveInject"](a.c),l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](m.a))},y.\u0275cmp=l["\u0275\u0275defineComponent"]({type:y,selectors:[["app-edit-user"]],decls:13,vars:2,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[4,"ngIf"],[1,"card-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],["class","body",4,"ngIf"],[1,"body"],[1,"table","table-striped","table-bordered"],["id","name","required","","type","text","name","name","maxlength","50",3,"ngModel","ngModelChange"],["id","username","required","","type","text","name","username","maxlength","20",3,"ngModel","ngModelChange"],[1,"help-inline"],["required","","type","text","name","phone",3,"ngModel","ngModelChange"],["required","","id","email","type","email","name","email",3,"ngModel","ngModelChange"],[1,"text-muted"],["type","password","name","password",3,"ngModel","ngModelChange"],["type","password","name","c_password",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["type","submit","name","","value","Submit",1,"btn","btn-primary"],[1,"text-danger"],["required","","name","role",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"section",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"h5"),l["\u0275\u0275text"](7,"Edit user"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,p,1,0,"app-loading",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275elementStart"](10,"form",8,9),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),l["\u0275\u0275template"](12,v,50,8,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",t.is_loading),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.is_loaded))},directives:[r.j,c.f,c.g,u.a,c.b,c.l,c.d,c.e,c.h,c.m,r.i,c.i,c.n],styles:[""]}),y)}],E=((S=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[a.f.forChild(b)],a.f]}),S),w=n("uQlb"),C=n("nEHF"),x=((_=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:_}),_.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||_)},imports:[[r.b,E,w.a,C.a]]}),_)},hiAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),a=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"fa","fa-spin","fa-spinner"]],template:function(e,t){1&e&&(r["\u0275\u0275element"](0,"i",0),r["\u0275\u0275text"](1," Loading..."))},styles:[""]}),e}()},rNAZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ofXK"),a=n("nEHF"),i=n("6QD7"),o=n("fXoL"),l=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.b,a.a,i.b],i.b]}),e}()}}]);