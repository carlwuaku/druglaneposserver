(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"1oy2":function(e,t,n){"use strict";n.r(t),n.d(t,"AddOrderModule",(function(){return k}));var i=n("ofXK"),a=n("tyNb"),r=n("fXoL"),o=n("N6Jo");class s{constructor(){}}var l=n("c92J"),d=n("eJvr"),m=n("1VJT"),c=n("ccyI"),p=n("3Pt+");function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",5),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275propertyInterpolate"]("value",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",e," ")}}function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"option",6),r["\u0275\u0275text"](1,"Other"),r["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"select",1),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().selected=t}))("change",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().item_selected()})),r["\u0275\u0275template"](2,h,2,2,"option",2),r["\u0275\u0275template"](3,u,2,0,"option",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"i",4),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().ngOnInit()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",e.selected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.objects),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.show_other)}}function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",5),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275propertyInterpolate"]("value",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",e," ")}}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"datalist",7),r["\u0275\u0275template"](2,g,2,2,"option",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.objects)}}let _=(()=>{class e{constructor(e,t,n){this.dbService=e,this.notify=t,this.authService=n,this.objects=[],this.is_loading=!1,this.error=!1,this.is_loaded=!1,this.onFinish=new r.EventEmitter,this.selected=null,this.type="",this.show_other=!0}ngOnInit(){this.start()}ngOnChanges(){console.log(this.tracker),this.start()}start(){this.is_loaded=!1,this.is_loading=!0;var e="";switch(this.type){case"packaging":e="order/getDeliveryPoints?status=Pending";break;case"delivery":e="order/getDeliveryPoints?status=Packaged";break;default:e="order/getDeliveryPoints"}this.dbService.getData(e,this.authService.current_user).subscribe(e=>{"-1"===e.status&&(this.notify.failNotification(e.message),this.error=!0),"-9"===e.status?(this.notify.failNotification(e.message),this.error=!0):(this.objects=e.data,this.is_loaded=!0,this.error=!1),this.is_loading=!1},e=>{this.notify.noConnectionNotification()})}item_selected(){this.onFinish.emit(this.selected)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-select-delivery-point"]],inputs:{selected:"selected",type:"type",show_other:"show_other",tracker:"tracker"},outputs:{onFinish:"onFinish"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[[4,"ngIf"],["name","selected",1,"",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["value","other",4,"ngIf"],[1,"fa","fa-refresh",3,"click"],[3,"value"],["value","other"],["id","delivery_point_list"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,f,5,3,"span",0),r["\u0275\u0275template"](1,y,3,1,"span",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.is_loaded&&"datalist"!=t.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.is_loaded&&"datalist"==t.type))},directives:[i.j,p.m,p.e,p.h,i.i,p.i,p.n],styles:[""]}),e})();var v=n("4j6H");function S(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",30),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().order.delivery_point=t})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",e.order.delivery_point)}}function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275elementStart"](4,"input",31),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](e),t.$implicit.quantity=n}))("change",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().getTotal()}))("keyup",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().getTotal()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275elementStart"](10,"a",32),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().removeItem(n)})),r["\u0275\u0275element"](11,"i",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.product_name),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.quantity),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.price),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"]((e.price*e.quantity).toFixed(2))}}function w(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275elementStart"](2,"div",34),r["\u0275\u0275elementStart"](3,"input",35),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().new_quantity=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",36),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate3"](" ",e.new_item.name," [price: ",e.new_item.price,"/",e.new_item.unit,"] "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.new_quantity)}}function E(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",e.phone," ")}}let x=(()=>{class e{constructor(e,t,n,i){this.dbService=e,this.localforage=t,this.notify=n,this.authService=i,this.error=!1,this.is_loading=!0,this.is_loaded=!1,this.onFinish=new r.EventEmitter,this.url="orders/findById",this.items=[],this.new_item=null,this.new_quantity=0,this.amount_paid="0",this.added_names=[],this.order_total=0,this.editing=!1,this.customers_local=[],this.ts="",null!=this.id&&null!=this.id||(this.order=new o.a,this.order.createdAt=this.dbService.getToday())}ngOnInit(){if(this.ts=this.dbService.getToday(),null==this.id||null==this.id||this.getObject(this.id),null!=this.order._id&&null!=this.order._id){this.getTotal();var e=this;this.items.map(t=>{e.added_names.push(t.product_name)}),this.order.createdAt=this.dbService.getToday("",this.order.createdAt),this.editing=!0}this.localforage.getItem("customers").subscribe(e=>{this.customers_local=e,console.log(this.customers_local)},e=>{console.log(e)})}deliveryPointSelected(e){this.dp_selected=e,"other"!=this.dp_selected&&(this.order.delivery_point=e)}getObject(e){this.dbService.getDataWithQuery(this.url,this.authService.current_user,"id="+this.id).subscribe(e=>{this.order=e.data,this.is_loading=!1,this.is_loaded=!0,this.error=!1},e=>{this.is_loading=!1,this.error=!0,this.is_loaded=!1})}customerSelected(e){this.order.customer=e}populateCustomer(){this.first_name="",this.last_name="",this.work_place="";for(var e=0;e<this.customers_local.length;e++){var t=this.customers_local[e];if(t.phone==this.phone){this.first_name=t.first_name,this.last_name=t.last_name,this.work_place=t.place_of_work;break}}}trackBy(e,t){return t.product._id}productSelected(e){if(-1==this.added_names.indexOf(e.name)){if(this.new_item=e,"number"!=typeof e.price)return this.notify.failNotification("Price not defined."),!1;this.new_quantity=1,$("#enter_quantity_modal").modal("show"),$("#enter_quantity_modal").on("shown.bs.modal",(function(){$("#qtt").focus()}))}else this.notify.failNotification("Item already in list")}increment(e){null!=e&&null!=e?(e.quantity=(parseFloat(e.quantity)+1).toString(),this.getTotal()):this.new_quantity++}decrement(e){null!=e&&null!=e?parseFloat(e.quantity)>1&&(e.quantity=(parseFloat(e.quantity)-1).toString(),this.getTotal()):parseFloat(this.new_quantity)>1&&this.new_quantity--}addItem(){if(!$.isNumeric(this.new_quantity))return this.notify.failNotification("Enter a valid number"),!1;if(parseFloat(this.new_quantity)<0)return this.notify.failNotification("Enter a quantity above 0"),!1;if(-1==this.added_names.indexOf(this.new_item.name)){var e=new s;e.product_name=this.new_item.name,e.product_id=this.new_item.id,e.price=this.new_item.price,e.quantity=this.new_quantity,e.total=this.new_quantity*this.new_item.price,this.items.push(e),this.added_names.push(this.new_item.name),this.new_item=null,this.new_quantity=0,this.getTotal(),$("#enter_quantity_modal").modal("hide"),this.ts=this.dbService.getToday("timestamp_string")}else this.ts=this.dbService.getToday("timestamp_string"),this.notify.failNotification("Item already in the list")}removeItem(e){this.items.splice(this.items.indexOf(e),1),this.added_names.splice(this.added_names.indexOf(e.name),1),this.getTotal()}setQuantities(){var e=0,t=this;$(".quantities").each((function(){t.items[e].quantity=$(this).val(),e++})),this.getTotal()}getTotal(){var e=0;this.items.map(t=>{e+=t.quantity*t.price}),this.order_total=e}saveItems(){if(this.phone)return this.notify.failNotification("Please fill the customer details"),!1;if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;this.notify.showLoading();for(var e="RF-"+this.dbService.getToday("timestamp_string"),t=0;t<this.items.length;t++){var n=this.items[t];let i=new FormData;i.append("id",this.order._id),i.append("product",n.product_id),i.append("price",n.price.toFixed(2)),i.append("quantity",n.quantity.toFixed(2)),i.append("phone",this.phone),i.append("first_name",this.first_name),i.append("last_name",this.last_name),i.append("place_of_work",this.work_place),i.append("delivery_point",this.order.delivery_point),i.append("notes",this.order.notes),i.append("status","Pending"),i.append("code",e),i.append("customer_name",this.order.customer.first_name+" "+this.order.customer.last_name),i.append("product_name",n.product_name),i.append("createdAt",this.dbService.getToday("timestamp")),i.append("display_name",this.authService.current_user.display_name),this.dbService.postData(i,"orders/save",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.order=new o.a,this.items=this.added_names=[],this.getTotal())},e=>{})}this.notify.successNotification("Orders saved successfully")}saveBulk(){if(null==this.items||null==this.items||this.items.length<1)return this.notify.failNotification("Please add at least one product"),!1;if(null==this.phone||null==this.phone||null==this.first_name||null==this.first_name||null==this.last_name||null==this.last_name)return this.notify.failNotification("Please fill the customer details"),!1;if(""==this.order.delivery_point||null==this.order.delivery_point||null==this.order.delivery_point)return this.notify.failNotification("Please select a delivery point"),!1;this.notify.showLoading();var e=[],t=[],n=[],i=[];if(this.editing)a=this.order.code;else{this.order_code=this.dbService.abbreviate(this.order.delivery_point,2);var a=this.order_code+"-"+this.dbService.getToday("timestamp_string")}for(var r=0;r<this.items.length;r++){var s=this.items[r];e.push(s.product_id),t.push(s.price),n.push(s.quantity),i.push(s.product_name)}let l=new FormData;l.append("products",e.join("||")),l.append("prices",t.join("||")),l.append("quantities",n.join("||")),l.append("code",a),l.append("product_names",i.join("||")),l.append("added_by",this.authService.current_user._id),l.append("display_name",this.authService.current_user.display_name),l.append("phone",this.phone),l.append("first_name",this.first_name),l.append("last_name",this.last_name),l.append("place_of_work",this.work_place),l.append("amount_paid",this.amount_paid),l.append("delivery_point",this.order.delivery_point),l.append("notes",this.order.notes),l.append("status",this.order.status),this.editing&&l.append("editing","yes"),this.dbService.postData(l,"order/saveBulk",this.authService.current_user).subscribe(e=>{this.notify.hideLoading(),"-1"===e.status?this.notify.failNotification("Unable to authenticate. Please login again"):"-9"===e.status?this.notify.showNotification("You are not permitted to perform this action","fail",3e3):(this.notify.hideLoading(),this.order=new o.a,this.items=this.added_names=[],this.getTotal(),this.notify.successNotification("Order saved successfully"),this.ts=this.dbService.getToday("timestamp_string"))},e=>{this.ts=this.dbService.getToday("timestamp_string"),this.notify.hideLoading(),this.notify.noConnectionNotification()})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-order-form"]],inputs:{order:"order",id:"id",items:"items"},outputs:{onFinish:"onFinish"},decls:83,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["autocomplete","off","list","customers","type","text","name","phone",3,"ngModel","change","keyup","ngModelChange"],["type","text","name","first_name",3,"ngModel","ngModelChange"],["type","text","name","last_name",3,"ngModel","ngModelChange"],["type","text","name","work_place",3,"ngModel","ngModelChange"],["required","","type","date","name","createdAt",3,"ngModel","ngModelChange"],["type","text","list","delivery_point_list","name","delivery_point",3,"ngModel","ngModelChange"],[3,"type"],["required","","type","text","name","delivery_point",3,"ngModel","ngModelChange",4,"ngIf"],["name","notes",1,"form-control",3,"ngModel","ngModelChange"],[3,"timestamp","type","onAdd"],[1,"col-md-8"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Submit",1,"btn","btn-success",3,"click"],["id","enter_quantity_modal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-body"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-warning","waves-effect"],["id","customers"],["required","","type","text","name","delivery_point",3,"ngModel","ngModelChange"],["type","number","name","quantities[]",3,"ngModel","ngModelChange","change","keyup"],["title","remove this item",1,"btn","btn-xs","btn-warning",3,"click"],[1,"feather","icon-x"],[1,""],["type","text","required","","name","new_quantity","id","qtt","placeholder","quantity",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Add Item",1,"btn","btn-success","waves-effect"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"h6"),r["\u0275\u0275text"](3,"Customer details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"label"),r["\u0275\u0275text"](8,"Phone number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](9,"br"),r["\u0275\u0275elementStart"](10,"input",5),r["\u0275\u0275listener"]("change",(function(){return t.populateCustomer()}))("keyup",(function(){return t.populateCustomer()}))("ngModelChange",(function(e){return t.phone=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"label"),r["\u0275\u0275text"](13,"First Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"br"),r["\u0275\u0275elementStart"](15,"input",6),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.first_name=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"br"),r["\u0275\u0275elementStart"](17,"label"),r["\u0275\u0275text"](18,"Last Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"br"),r["\u0275\u0275elementStart"](20,"input",7),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.last_name=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",4),r["\u0275\u0275elementStart"](22,"label"),r["\u0275\u0275text"](23,"Work Place"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](24,"br"),r["\u0275\u0275elementStart"](25,"input",8),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.work_place=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",3),r["\u0275\u0275elementStart"](27,"div",4),r["\u0275\u0275elementStart"](28,"label"),r["\u0275\u0275text"](29,"Date of Order*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"br"),r["\u0275\u0275elementStart"](31,"input",9),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.createdAt=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",4),r["\u0275\u0275elementStart"](33,"label"),r["\u0275\u0275text"](34,"Delivery Point*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](35,"br"),r["\u0275\u0275elementStart"](36,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.delivery_point=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](37,"app-select-delivery-point",11),r["\u0275\u0275template"](38,S,1,1,"input",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"div",4),r["\u0275\u0275elementStart"](40,"label"),r["\u0275\u0275text"](41,"Notes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](42,"br"),r["\u0275\u0275elementStart"](43,"textarea",13),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.notes=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"div",3),r["\u0275\u0275elementStart"](45,"div",4),r["\u0275\u0275elementStart"](46,"app-select-product",14),r["\u0275\u0275listener"]("onAdd",(function(e){return t.productSelected(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",15),r["\u0275\u0275elementStart"](48,"div",0),r["\u0275\u0275elementStart"](49,"div",2),r["\u0275\u0275elementStart"](50,"table",16),r["\u0275\u0275elementStart"](51,"thead"),r["\u0275\u0275elementStart"](52,"tr"),r["\u0275\u0275elementStart"](53,"th"),r["\u0275\u0275text"](54,"Product"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"th"),r["\u0275\u0275text"](56,"Quantity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"th"),r["\u0275\u0275text"](58,"Price"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"th"),r["\u0275\u0275text"](60,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](61,"th"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"tbody"),r["\u0275\u0275template"](63,b,12,4,"tr",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](64,"h4"),r["\u0275\u0275text"](65),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"label"),r["\u0275\u0275text"](67,"Amount Paid"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](68,": "),r["\u0275\u0275elementStart"](69,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.amount_paid=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"input",19),r["\u0275\u0275listener"]("click",(function(){return t.saveBulk()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"div",20),r["\u0275\u0275elementStart"](72,"div",21),r["\u0275\u0275elementStart"](73,"div",22),r["\u0275\u0275elementStart"](74,"div",23),r["\u0275\u0275elementStart"](75,"form",24,25),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.addItem()})),r["\u0275\u0275template"](77,w,5,4,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"div",27),r["\u0275\u0275elementStart"](79,"button",28),r["\u0275\u0275text"](80,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"datalist",29),r["\u0275\u0275template"](82,E,2,1,"option",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngModel",t.phone),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.first_name),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.last_name),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.work_place),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.order.createdAt),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.order.delivery_point),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("type","datalist"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","other"==t.dp_selected),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.order.notes),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("timestamp",t.ts)("type","search"),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",t.items),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("Total: ",t.order_total,""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.amount_paid),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",null!=t.new_item),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",t.customers_local))},directives:[p.b,p.e,p.h,p.l,_,i.j,v.a,i.i,p.f,p.g,p.j,p.i,p.n],styles:[""]}),e})();const C=[{path:"",component:(()=>{class e{constructor(e,t){this.router=t,this.id=e.snapshot.params.id}ngOnInit(){}productAdded(e){null==this.id||null==this.id||this.router.navigate(["/order/"+this.id])}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-order"]],decls:7,vars:0,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-12"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Add a new order"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"app-order-form"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())},directives:[x],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(C)],a.f]}),e})();var I=n("nEHF"),q=n("rMCG");let k=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,M,I.a,q.a]]}),e})()}}]);